/*!CK:3528023735!*//*1434980005,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["YI6R+"]); }

__d("PluginSend",["Arbiter","CSS","DOM","DOMEvent","DOMEventListener","Focus","Plugin","PluginOptin","PluginResize"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=function(q,r,s,t,u,v){if(u)new o(function(){return q.offsetWidth;},function(){return q.offsetHeight;}).resize().auto();if(!t){var w=new n('send').addReturnParams({act:'send'});k.add(r,'click',w.start.bind(w));return;}var x=false,y=false;function z(){y=!y;h.toggle(r);h.toggle(s);h.toggle(t);if(y){setTimeout(function(){var ca=i.find(t,'.textInput');l.set(ca);},500);}else{var aa=i.find(r,'button');l.set(aa);}if(!x){var ba=window.ServerJSAsyncLoader;ba&&ba.ondemandjs&&ba.run(ba.ondemandjs);x=true;}new o(function(){return Math.max(q.offsetWidth,t.offsetWidth);},function(){return Math.max(q.offsetHeight,t.offsetHeight+t.offsetTop);},'resize.iframe',true).resize().auto();}k.add(r,'click',z);k.add(s,'click',z);k.add(q.parentNode,'click',function(aa){aa=new j(aa);if(aa.target===q.parentNode){aa.kill();z();}});g.subscribe(p.CLOSE,z);g.subscribe(m.ERROR,function(event,aa){i.setContent(q,aa.content);z();});if(v)z();};Object.assign(p,{SUCCESS:'platform/plugins/send/success',CLOSE:'platform/plugins/send/close',success:function(){g.inform(this.SUCCESS);}});e.exports=p;},null);
__d("PluginUITypeahead",["DOMDimensions","DOMQuery","Tokenizer","getElementPosition"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(){return h.scry(document.body,'.uiTokenizer').map(function(m){var n=i.getInstance(m);if(!n)return {x:0,y:0};var o=n.getTypeahead().getView(),p=j(o.getElement()),q=g.getElementDimensions(o.getElement());return {x:p.x+q.width,y:p.y+q.height};});}var l={width:function(){return Math.max.apply(null,k().map(function(m){return m.x;}));},height:function(){return Math.max.apply(null,k().map(function(m){return m.y;}));}};e.exports=l;},null);
__d("PluginSendFlyout",["Arbiter","Button","DOMEvent","DOMEventListener","DOMQuery","Focus","Form","PluginResize","PluginSend","PluginUITypeahead","Tokenizer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();function r(){}Object.assign(r,{init:function(s){var t=k.find(s,'.uiTokenizer'),u=q.getInstance(t),v=k.find(s,'.textInput'),w=k.find(s,'.pluginSendFlyoutTextarea'),x=k.find(s,'form'),y=k.find(document.body,'.pluginSend'),z=k.find(x,'.pluginSendFlyoutCancelButton'),aa=k.find(x,'.pluginSendFlyoutSendButton');g.subscribe('Form/change',function(ca,da){if(da.node!==t)return;h.setEnabled(aa,u.getTokens().length>0);});function ba(){u.reset();w.value='';h.setEnabled(aa,false);l.setWithoutOutline(y);g.inform(o.CLOSE);}j.add(x,'submit',function(ca){new i(ca).kill();m.bootstrap(x);});j.add(z,'click',function(ca){new i(ca).kill();ba();});j.add(z,'keydown',function(ca){ca=new i(ca);var da=ca.event.keyCode||ca.event.which;if(da==9&&!ca.event.shiftKey){ca.preventDefault();l.set(v);}});j.add(v,'keydown',function(ca){ca=new i(ca);var da=ca.event.keyCode||ca.event.which;if(da==9&&ca.event.shiftKey){ca.preventDefault();if(v.getAttribute('aria-expanded')=='true'){v.setAttribute('aria-expanded','false');}else l.set(z);}});j.add(x,'keyup',function(ca){ca=new i(ca);var da=ca.event.keyCode||ca.event.which;if(da==27)ba();});g.subscribe(o.SUCCESS,ba);new n(function(){return Math.max(y.offsetWidth,s.offsetWidth,p.width());},function(){return Math.max(y.offsetHeight,s.offsetHeight+s.offsetTop,p.height());},'resize.iframe',false).resize().auto();}});e.exports=r;},null);
__d("TypeaheadPreventSubmitOnEnter",["Event","Keys"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._typeahead=j;}i.prototype.enable=function(){"use strict";var j=this._typeahead.getCore().getElement();this._listener=g.listen(j,'keypress',function(k){if(g.getKeyCode(k)==h.RETURN)k.kill();});};i.prototype.disable=function(){"use strict";this._listener.remove();this._listener=null;};Object.assign(i.prototype,{_listener:null});e.exports=i;},null);
__d("TypeaheadShowResultsOnFocus",["Event","Keys"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._typeahead=j;}i.prototype.enable=function(){"use strict";this._typeahead.getCore().resetOnKeyup=false;this._subscription=this._typeahead.subscribe('bootstrap',function(j,k){this.firstFetch(k,this._typeahead.getCore(),this._typeahead.getData());}.bind(this));this._keyUpListener=g.listen(this._typeahead.getCore().getElement(),'keyup',function(event){if(g.getKeyCode(event)==h.BACKSPACE||g.getKeyCode(event)==h.DELETE)this.respond(this._typeahead.getCore(),this._typeahead.getData());}.bind(this));this._focusListener=g.listen(this._typeahead.getCore().getElement(),'focus',function(event){this.respond(this._typeahead.getCore(),this._typeahead.getData());}.bind(this));};i.prototype.disable=function(){"use strict";this._typeahead.unsubscribe(this._subscription);this._subscription=null;this._keyUpListener.remove();this._keyUpListener=null;this._focusListener.remove();this._focusListener=null;};i.prototype.firstFetch=function(j,k,l){"use strict";!j.bootstrapping&&this.respond(k,l);};i.prototype.respond=function(j,k){"use strict";if(!j.getValue())this.refreshAndShowNeededResults(j,k);};i.prototype.refreshAndShowNeededResults=function(j,k){"use strict";var l=this.getUidsFromData(k);j.setValue('');var m=k.buildUids(' ',l);k.respond('',m);};i.prototype.getUidsFromData=function(j){"use strict";var k=j.getAllEntries(),l=[];for(var m in k)l.push({uid:k[m].uid,index:k[m].index});l.sort(function(n,o){return n.index-o.index;});return l.map(function(n){return n.uid;});};Object.assign(i.prototype,{_subscription:null,_keyUpListener:null,_focusListener:null});e.exports=i;},null);