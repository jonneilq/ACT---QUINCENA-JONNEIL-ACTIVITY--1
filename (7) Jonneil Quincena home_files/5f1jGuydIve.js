/*!CK:2054616355!*//*1434980001,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["GDLxY"]); }

__d("BlueBar",["Arbiter","Event","Run"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j;function k(event){if(g.inform('BlueBar/homeClick')===false)event.preventDefault();}function l(){if(j){j.remove();j=null;}}var m={listen:function(n){if(!j){j=h.listen(n,'click',k);i.onUnload(l);}}};e.exports=m;},null);
__d("NotificationSeenState",["NotificationConstants","NotificationUpdates","createObjectFrom"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={},k=1,l=2,m=0,n=k,o=k|l,p=g.PayloadSourceType.INITIAL_LOAD,q={UNSEEN_AND_UNREAD:m,SEEN_BUT_UNREAD:n,SEEN_AND_READ:o};function r(u){var v=[],w=[];Object.keys(u).forEach(function(x){var y=u[x],z=j[x];j[x]=y;if(z===(void 0)){v.push(x);w.push(x);return;}var aa=z^y;if(aa&k)v.push(x);if(aa&l)w.push(x);});v.length&&h.didUpdateSeenState(v);w.length&&h.didUpdateReadState(w);}h.subscribe('update-notifications',function(u,v){var w=v.nodes;if(!w||!w.length)return;var x=v.payloadsource,y=g.PayloadSourceType,z=x==y.ENDPOINT,aa={};v.nodes.forEach(function(ba){var ca=ba.alert_id;if(!z||j[ca]===(void 0))aa[ca]=q[ba.seen_state];});r(aa);});h.subscribe('update-seen',function(u,v){if(!v.seenState)return;var w=[],x={};Object.keys(v.seenState).forEach(function(z){if(!v.seenState[z]){w.push(z);return;}var aa=j[z];if(aa!==(void 0))x[z]=aa|k;});var y=Object.assign({},i(w,m),x);r(y);});h.subscribe('update-read',function(u,v){if(!v.readState)return;var w=[],x={};Object.keys(v.readState).forEach(function(z){if(v.readState[z]){w.push(z);return;}var aa=j[z];if(aa!==(void 0)){x[z]=aa&~l;}else if(v.payloadsource==p)x[z]=n;});var y=Object.assign({},i(w,o),x);r(y);});function s(u){var v=j[u];return v;}var t={isRead:function(u){return s(u)===o;},isSeen:function(u){return s(u)!==m;},getUnseenCount:function(){return t.getUnseenIDs().length;},getUnseenIDs:function(){return Object.keys(j).filter(function(u){return j[u]===m;});},getUnreadCount:function(){return t.getUnreadIDs().length;},getUnreadIDs:function(){return Object.keys(j).filter(function(u){return j[u]!==o;});}};e.exports=t;},null);
__d("NotificationInitialLoadController",["Arbiter","NotificationConstants","NotificationUpdates","NotificationSeenState","NotificationStore"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();b('NotificationSeenState');b('NotificationStore');function j(k){i.handleUpdate(h.PayloadSourceType.INITIAL_LOAD,k);g.inform('jewel/count-updated',{jewel:'notifications',count:k.nodes.length});}e.exports=j;},null);
__d("NotificationCounter",["Arbiter","ChatConfig","DocumentTitle","JSLogger"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={messages:0,notifications:0,requests:0},l={init:function(m){g.subscribe('update_title',this._handleUpdate.bind(this));g.subscribe('jewel/count-updated',this._handleCountUpdate.bind(this));},getCount:function(){var m=0;for(var n in k){var o=Number(k[n]);if(typeof k[n]=='string'&&isNaN(o))return k[n];if(isNaN(o)||o<0){j.create('jewels').error('bad_count',{jewel:n,count:k[n]});continue;}m+=o;}return m;},updateTitle:function(){var m=this.getCount(),n=i.get();n=m?'('+m+') '+n:n;i.set(n,true);},_handleCountUpdate:function(m,n){if(h.get('remove_notification_count')&&n.jewel==='mercurymessages')return;k[n.jewel]=n.count;this.updateTitle();},_handleUpdate:function(m,n){this.updateTitle();}};e.exports=l;},null);
__d("XNotificationsSyncController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/notifications\/sync\/",{lastSync:{type:"Int",required:true}});},null);
__d("NotificationSync",["Arbiter","AsyncRequest","ChannelConstants","JSLogger","NotificationConstants","NotificationUpdates","XNotificationsSyncController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j.create('notifications'),o='channel_reload',p=0;function q(v){var w=l.getserverTime()?l.getserverTime():p,x=m.getURIBuilder().setInt('lastSync',w).getURI();v.setHandler(r).setOption('suppressErrorAlerts',true).setErrorHandler(s).setMethod('GET').setReadOnly(true).setURI(x).setAllowCrossPageTransition(true);}function r(v){var w=v.getPayload();if(w.syncPayload)l.handleUpdate(k.PayloadSourceType.SYNC,w.syncPayload);}function s(v){}function t(){var v=new h();v.setIsBackgroundRequest(true);q(v);v.send();n.bump(o);}var u={setup:function(v){p=v;g.subscribe(i.ON_INVALID_HISTORY,t);}};e.exports=u;},null);
__d("NotificationJewelController",["Arbiter","Event","NotificationConstants","NotificationCounter","NotificationSeenState","NotificationSync","NotificationUpdates","createObjectFrom","curry"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=0;function q(s){g.inform('jewel/count-updated',{jewel:s,count:k.getUnseenIDs().length},g.BEHAVIOR_STATE);}function r(s,t,u,v){"use strict";j.init();var w=h.listen(s.getRoot(),'mouseover',function(){w.remove();w=null;t.open();});if(s.isOpen()){t.open();}else var x=s.subscribe('opened',function(){x.unsubscribe();x=null;t.open();});var y=t.pause.bind(t);s.subscribe('opened',function(){setTimeout(y,0);});s.subscribe('closed',function(){t.unpause();q(s.name);});m.subscribe('seen-state-updated',o(q,s.name));m.handleUpdate(i.PayloadSourceType.INITIAL_LOAD,{seenState:n(u,p)});l.setup(v);q(s.name);}e.exports=r;},null);
__d("NotificationJewelHeaderController",["DOM","Event","NotificationSeenState","NotificationUserActions","NotificationUpdates"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m,n){"use strict";h.listen(m,'click',function(){var o=i.getUnreadIDs();if(o.length)j.markNotificationsAsRead(o);});k.subscribe('read-state-updated',function(){if(n)g.setContent(n,i.getUnreadCount());});}e.exports=l;},null);
__d("NotificationGNFState",["NotificationUpdates","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={};g.subscribe('update-notifications',function(l,m){var n=m.nodes;if(!n||!n.length)return;var o={};m.nodes.forEach(function(p){var q=p.alert_id;if(j[q]!==p.gaveGNF)o[q]=p.gaveGNF;});if(!i(o)){j=h(j,o);g.didUpdateGNFState(Object.keys(o));}});g.subscribe('update-gnf',function(l,m){if(m.gnfState){j=h(j,m.gnfState);g.didUpdateGNFState(Object.keys(m.gnfState));}});var k={gaveGNF:function(l){return !!j[l];}};e.exports=k;},null);
__d("NotificationHiddenState",["NotificationUpdates","NotificationConstants","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={};g.subscribe('update-notifications',function(m,n){var o=n.nodes,p=n.payloadsource;if(p===h.PayloadSourceType.LIVE_SEND&&o&&o.length){var q={};o.forEach(function(r){var s=r.alert_id;if(k[s])q[s]=false;});if(!j(q)){k=i(k,q);g.didUpdateHiddenState(Object.keys(q));}}});g.subscribe('update-hidden',function(m,n){if(n.hiddenState){k=i(k,n.hiddenState);g.didUpdateHiddenState(Object.keys(n.hiddenState));}});var l={isHidden:function(m){if(k[m])return k[m];return false;}};e.exports=l;},null);
__d("NotificationList.react",["NotificationConstants","NotificationGNFState","NotificationHiddenState","NotificationSeenState","NotificationStore","NotificationUpdates","NotificationUserActions","React","getObjectValues","isEmpty","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=n,s=r.PropTypes,t=g.PayloadSourceType.LIVE_SEND,u=n.createClass({displayName:"NotificationList",propTypes:{businessID:s.string,hasEverBeenOpened:s.bool,maxHeight:s.number,negativeTracking:s.object,paused:s.bool,tracking:s.string,useChevron:s.bool,numPerPage:s.number.isRequired,listRenderer:s.func.isRequired,upsell:s.object,isTicker:s.bool,isRHC:s.bool},getInitialState:function(){this._currentlyFetching=false;this._pendingNotifs={};this._shouldScroll=false;var v=q(this.props.staticNotifs,function(w){return !!w.gaveGNF;});return {canFetchMore:true,notifs:{},hiddenState:{},readState:{},gnfState:v||{},showingChevron:false};},componentWillMount:function(){k.setBusinessID(this.props.businessID);this._subscriptions=[l.subscribe('notifications-updated',function(w,x){if(x.source==t&&!p(x.updates)&&!this.props.isTicker){this._shouldScroll=true;if(this.props.paused!==false)this._pendingNotifs=Object.assign({},this._pendingNotifs,x.updates);return;}this._fetchAndUpdate(k.getCount());}.bind(this)),l.subscribe(['hidden-state-updated','read-state-updated','gnf-state-updated'],function(w,x){if(w=='hidden-state-updated'){if(x.source!==t||!this.props.paused){var y={};Object.keys(x.updates).forEach(function(ba){y[ba]=i.isHidden(ba);});this.setState({hiddenState:Object.assign({},this.state.hiddenState,y)});}}else if(w=='gnf-state-updated'){var z={};Object.keys(x.updates).forEach(function(ba){z[ba]=h.gaveGNF(ba);});this.setState({gnfState:Object.assign({},this.state.gnfState,z)});}else{var aa={};Object.keys(x.updates).forEach(function(ba){aa[ba]=j.isRead(ba);});this.setState({readState:Object.assign({},this.state.readState,aa)});}}.bind(this))];if(this.props.isTicker){var v=j.getUnseenIDs();this._updateNotifInContainer(v);}},componentWillUnmount:function(){if(this._subscriptions){while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;}},_getNotifsWithCurrentOrder:function(v){var w=Object.keys(this.state.notifs),x=Object.keys(v).filter(function(z){return !this.state.notifs[z];}.bind(this));w=w.concat(x);var y={};w.forEach(function(z){if(this._pendingNotifs[z]){if(this.state.notifs[z])y[z]=this.state.notifs[z];}else y[z]=v[z];}.bind(this));return y;},_fetchAndUpdate:function(v){this._currentlyFetching=true;k.getNotifications(v,function(w){var x=p(this._pendingNotifs)?w:this._getNotifsWithCurrentOrder(w),y={},z={},aa={};o(x).forEach(function(ba){var ca=ba.alert_id;if(!this.state||!this.state.readState[ca])y[ca]=j.isRead(ca);if(!this.state||!this.state.hiddenState[ca])z[ca]=i.isHidden(ca);if(!this.state||!this.state.gnfState[ca])aa[ca]=h.gaveGNF(ca);});this._currentlyFetching=false;this.setState({notifs:x,canFetchMore:k.canFetchMore()||k.getCount()!=Object.keys(x).length,readState:Object.assign({},this.state.readState,y),hiddenState:Object.assign({},this.state.hiddenState,z),gnfState:Object.assign({},this.state.gnfState,aa)});}.bind(this));},_fetchAndUpdateAll:function(){var v={};Object.keys(this._pendingNotifs).forEach(function(w){var x=i.isHidden(w);if(x!=this.state.hiddenState[w])v[w]=i.isHidden(w);}.bind(this));if(!p(v))this.setState({hiddenState:Object.assign({},this.state.hiddenState,v)});this._pendingNotifs={};this._fetchAndUpdate(k.getCount());},_fetchNextSet:function(){if(!this._currentlyFetching){var v=Object.keys(this.state.notifs).length;this._fetchAndUpdate(v+this.props.numPerPage);}},_onScrollAndUpdate:function(v){if(this._currentlyFetching||!this.state.canFetchMore)return;if(v)this._fetchNextSet();},_onChevronShow:function(){this.setState({showingChevron:true});},_onChevronHide:function(){this.setState({showingChevron:false});},_updateNotifInContainer:function(v){if(v.length>this.props.numPerPage){this._fetchAndUpdate(v.length);}else this._fetchNextSet();return;},componentDidUpdate:function(v){var w=j.getUnseenIDs();if(!p(this._pendingNotifs))w=w.filter(function(x){return !this._pendingNotifs[x];}.bind(this));if(w.length&&this.props.paused)m.markNotificationsAsSeen(w);if(!v.hasEverBeenOpened&&this.props.hasEverBeenOpened)this._updateNotifInContainer(w);if(v.paused&&!this.props.paused){this._shouldScroll=false;setTimeout(this._fetchAndUpdateAll,0);return;}},render:function(){var v=this.props.listRenderer;return (n.createElement(v,{hasEverBeenOpened:this.props.hasEverBeenOpened,paused:this.props.paused,tracking:this.props.tracking,negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,businessID:this.props.businessID,maxHeight:this.props.maxHeight,useChevron:this.props.useChevron,notifs:this.state.notifs,afterScroll:this._onScrollAndUpdate,onChevronShow:this._onChevronShow,onChevronHide:this._onChevronHide,canFetchMore:this.state.canFetchMore,hiddenState:this.state.hiddenState,readState:this.state.readState,gnfState:this.state.gnfState,showingChevron:this.state.showingChevron,shouldScroll:this._shouldScroll,upsell:this.props.upsell||null,isTicker:this.props.isTicker,isRHC:this.props.isRHC}));}});e.exports=u;},null);
__d("NotificationListPropTypes",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j={negativeTracking:i.object,tracking:i.string,useChevron:i.bool,notifs:i.object,afterScroll:i.func,onChevronShow:i.func,onChevronHide:i.func,canFetchMore:i.bool,hiddenState:i.object,readState:i.object,gnfState:i.object,showingChevron:i.bool,paused:i.bool,maxHeight:i.number,shouldScroll:i.bool,upsell:i.object,isTicker:i.bool,isRHC:i.bool};e.exports=j;},null);
__d("FlexibleBlock.react",["LeftRight.react","React","cx","invariant","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=k({left:true,right:true});function m(o){j(o.flex&&o.flex in n.FLEX);j(o.children&&o.children.length===2);}var n=h.createClass({displayName:"FlexibleBlock",render:function(){m(this.props);var o,p=this.props.children[0],q=this.props.children[1],r=this.props.flex==l.left,s;if(r){s=p;o=g.DIRECTION.right;}else{s=q;o=g.DIRECTION.left;}var t=h.createElement("div",{className:"_42ef"},s);return (h.createElement(g,h.__spread({},this.props,{direction:o}),r?t:this.props.children[0],r?this.props.children[1]:t));}});n.FLEX=l;e.exports=n;},null);
__d("ReadToggle.react",["React","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=g,l=k.PropTypes,m=g.createClass({displayName:"ReadToggle",propTypes:{isRead:l.bool.isRequired,onClick:l.func,readLabel:l.node,unreadLabel:l.node},getDefaultProps:function(){return {onClick:i};},render:function(){if(this.props.isRead){return (g.createElement("div",{"aria-label":this.props.readLabel,className:this._getClasses(),"data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this.props.onClick}));}else return (g.createElement("div",{"aria-label":this.props.unreadLabel,className:this._getClasses(),"data-hover":"tooltip","data-tooltip-alignh":"center",onClick:this.props.onClick,role:"button",tabIndex:"0"}));},_getClasses:function(){return j(this.props.className,((!this.props.isRead?"_5c9q":'')+(this.props.isRead?' '+"_5c9_":'')));}});e.exports=m;},null);
__d("NotificationListItem.react",["AsyncResponse","BizSiteIdentifier.brands","BanzaiLogger","BanzaiODS","CloseButton.react","Event","FlexibleBlock.react","ImageBlock.react","Keys","List.react","NotificationPhotoThumbnail","NotificationTokens","NotificationURI","NotificationUserActions","React","TextWithEntities.react","ReadToggle.react","Timestamp.react","VaultBoxURI","XUIButton.react","PopoverMenu.react","ReactXUIMenu","cx","invariant","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();var fa=ba.Item;function ga(ja,ka){return u.createElement("span",{className:"fwb"},ja);}function ha(ja){return !!(ja&&ja.id&&!ja.is_facebook_app);}var ia=u.createClass({displayName:"NotificationListItem",getInitialState:function(){return {showingOptions:false,negativeFeedbackConfirmation:null,canReportAsSpam:false,spamReportConfirmation:null,sendingFeedback:false,mayUndoHide:false,genericNegativeFeedbackConfirmation:null,isBizSite:h.isBizSite()};},_onKeyDownItem:function(ja){if(l.getKeyCode(ja.nativeEvent)==o.RETURN)this._markItemRead();},_markItemReadIfUnreadFromReadButton:function(){if(!this.props.isRead)t.setNextIsFromReadButton(true);this._markItemReadIfUnread();},_markItemReadIfUnread:function(){!this.props.isRead&&this._markItemRead();},_markItemRead:function(){t.markNotificationsAsRead([this.props.alert_id]);if(this.props.isTicker)j.bumpEntityKey('notif_ticker','click');},_onFeedbackError:function(ja){g.defaultErrorHandler(ja);this.setState({sendingFeedback:false});},_onHideSuccess:function(ja){var ka=ja.getPayload();da(ka.confirmation);this.setState({negativeFeedbackConfirmation:ka.confirmation,canReportAsSpam:ka.canReportAsSpam,sendingFeedback:false,showingOptions:true});},_onHideAppSuccess:function(ja){var ka=ja.getPayload(),la=ka.confirmation,ma=ka.canReportAsSpam;da(la);this.setState({negativeFeedbackConfirmation:la,canReportAsSpam:ma,mayUndoHide:true,sendingFeedback:false,showingOptions:true});},_onSpamReportSuccess:function(ja){var ka=ja.getPayload().spamReportConfirmation;this.setState({negativeFeedbackConfirmation:null,spamReportConfirmation:ka,sendingFeedback:false});},_onHide:function(){t.markNotificationAsHidden(this.props.alert_id,this._onHideSuccess,this._onFeedbackError);this.setState({sendingFeedback:true,mayUndoHide:true});},_onShowSuccess:function(){this.setState({genericNegativeFeedbackConfirmation:null,negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false});},_onShow:function(){var ja=this.props.negative?this.props.negative.subscription_level:null;t.markNotificationAsVisible(this.props.alert_id,ja,this._onShowSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_onReportSpam:function(){t.markNotificationAsSpam(this.props.alert_id,this._onSpamReportSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsHidden:function(){t.markAppAsHidden(this.props.alert_id,this.props.application.id,this._onHideAppSuccess,this._onFeedbackError);this.setState({sendingFeedback:true});},_markAppAsVisible:function(){t.markAppAsVisible(this.props.alert_id,this.props.application.id,function(){this.setState({negativeFeedbackConfirmation:null,sendingFeedback:false,showingOptions:false,mayUndoHide:false});}.bind(this),this._onFeedbackError);this.setState({sendingFeedback:true});},_renderAttachedImage:function(ja){if(ja)return (u.createElement("img",{src:ja.uri,className:"_42td","aria-hidden":true}));return u.createElement("span",null);},_getModifiedTrackingString:function(ja){return JSON.stringify(Object.assign({},JSON.parse(this.props.tracking),ja));},_onClickCloseButton:function(){if(this.props.useChevron){this.showCloseOptionOnMenuClose=true;}else this.setState({showingOptions:true});},_onCancelNegativeFeedback:function(){this.setState({showingOptions:false});},shouldComponentUpdate:function(ja,ka){return (this.props.visible!==ja.visible||this.props.isRead!==ja.isRead||this.props.timestamp!==ja.timestamp||this.props.gnfGiven!==ja.gnfGiven||this.state.showingOptions!==ka.showingOptions||this.state.sendingFeedback!==ka.sendingFeedback||this.state.canReportAsSpam!==ka.canReportAsSpam||this.state.spamReportConfirmation!==ka.spamReportConfirmation);},_onChevronHide:function(){this.props.onChevronHide();this._logChevronEvent('close');if(this.showCloseOptionOnMenuClose){this.showCloseOptionOnMenuClose=false;this._turnOff();}},_turnOff:function(){var ja=ha(this.props.application)?this._markAppAsHidden:this._onHide;ja();},_onChevronShow:function(){this.props.onChevronShow();this._logChevronEvent('open');},_logChevronEvent:function(ja){var ka={event:ja,notif_type:this.props.notif_type,notif_id:parseInt(r.untokenizeIDs([this.props.alert_id])[0],10)};i.log('NotifJewelMenuLoggerConfig',ka);},_onGenericSuccess:function(ja){this.setState({showingOptions:true,sendingFeedback:false,genericNegativeFeedbackConfirmation:ja});},_onClickGenericNegative:function(){this.setState({sendingFeedback:true,mayUndoHide:true});t.giveGenericNegativeFeedback(this.props.alert_id,this._onGenericSuccess,this._onFeedbackError);},_undoGenericNegative:function(){this.setState({sendingFeedback:true});t.undoGenericNegativeFeedback(this.props.alert_id,this._onShowSuccess,this._onFeedbackError);},_onOkayNegative:function(){this.setState({showingOptions:false,negativeFeedbackConfirmation:null,genericNegativeFeedbackConfirmation:null,spamReportConfirmation:null,mayUndoHide:false});},render:function(){if(!this.props.visible&&!this.state.mayUndoHide)return u.createElement("li",{className:"_4_62"});var ja=this.props.negative,ka=this.props.negativeTracking,la=((!this.props.isTicker?"_33c":'')+(this.props.isTicker?' '+"_3_4g":'')+(!this.props.isRead&&!this.props.isTicker?' '+"_4af":'')+(!this.props.isRead&&this.props.isTicker?' '+"_59l2":'')+(this.state.showingOptions?' '+"_4ag":'')+(this.state.sendingFeedback?' '+"_4m8s":''));if(this.state.negativeFeedbackConfirmation){var ma=this.state.negativeFeedbackConfirmation,na,oa;if(this.state.canReportAsSpam)if(!this.props.useChevron){na=u.createElement("span",null,u.createElement("span",{className:"mhs"},"Â·"),u.createElement("a",{href:"#",onClick:this._onReportSpam},ea._("Report app for spam")));}else oa=u.createElement("li",null,u.createElement("a",{href:"#",onClick:this._onReportSpam,className:"mls"},ea._("Report app for spam")));var pa=ha(this.props.application)?this._markAppAsVisible:this._onShow,qa=!this.props.useChevron?u.createElement("a",{href:"#",onClick:pa,className:"mls"},ea._("Undo")):null,ra=this.props.useChevron?u.createElement(p,{border:"none",spacing:"small",className:"_jeq"},u.createElement("li",null,u.createElement("a",{href:"#",onClick:pa,className:"mls"},ea._("Undo"))),oa,u.createElement("li",null,u.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},ea._("Okay")))):null;return (u.createElement("li",{className:la,"data-gt":this.props.tracking},u.createElement("div",{className:"_4ai"},u.createElement(v,{interpolator:ga,ranges:ma.ranges,aggregatedranges:ma.aggregated_ranges,text:ma.text}),qa,na),ra));}var sa=this.state.spamReportConfirmation;if(sa){var ta=this.props.useChevron?u.createElement(p,{border:"none",spacing:"small",className:"_jeq"},u.createElement("li",null,u.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},ea._("Okay")))):null;return (u.createElement("li",{className:la,"data-gt":this.props.tracking},u.createElement("div",{className:"_4ai"},u.createElement(v,{interpolator:ga,ranges:sa.ranges,aggregatedranges:sa.aggregated_ranges,text:sa.text})),ta));}if(this.state.genericNegativeFeedbackConfirmation){ma=this.state.genericNegativeFeedbackConfirmation;var ua=ja?u.createElement("li",null,u.createElement("a",{href:"#","data-gt":ab,onClick:this._turnOff,className:"mls",ref:"closeButton"},ja.menu_option_text)):null;return (u.createElement("li",{className:la,"data-gt":this.props.tracking},u.createElement("div",{className:"_4ai"},u.createElement(v,{interpolator:ga,ranges:ma.ranges,aggregatedranges:ma.aggregated_ranges,text:ma.text})),u.createElement(p,{border:"none",spacing:"small",className:"_jeq"},u.createElement("li",null,u.createElement("a",{href:"#",onClick:this._undoGenericNegative,className:"mls"},ea._("Undo"))),ua,u.createElement("li",null,u.createElement("a",{href:"#",onClick:this._onOkayNegative,className:"mls"},ea._("Okay"))))));}if(this.state.showingOptions&&!this.props.useChevron){var va=ha(this.props.application)?this._markAppAsHidden:this._onHide;return (u.createElement("li",{className:la,"data-gt":this.props.tracking},u.createElement("div",{className:"_4ai"},u.createElement("div",null,u.createElement(v,{interpolator:ga,ranges:ja.confirm_question.ranges,aggregatedranges:ja.confirm_question.aggregated_ranges,text:ja.confirm_question.text})),u.createElement("div",{className:"mts"},u.createElement(z,{"data-gt":this._getModifiedTrackingString(ka.confirm),href:{url:'#'},label:ja.turn_off,use:"confirm",onClick:va,disabled:this.state.sendingFeedback}),u.createElement(z,{"data-gt":this._getModifiedTrackingString(ka.cancel),href:{url:'#'},label:ea._("Keep On"),onClick:this._onCancelNegativeFeedback,disabled:this.state.sendingFeedback})))));}var wa=null;if(this.props.title)wa=u.createElement(v,{interpolator:ga,ranges:this.props.title.ranges,aggregatedranges:this.props.title.aggregated_ranges,text:this.props.title.text,renderEmoji:true,renderEmoticons:true});var xa=null,ya=null;if(ja){var za=this._onClickCloseButton,ab;ab=this._getModifiedTrackingString(ka.click);var bb=(("_4ah")+(' '+"_55m9"));xa=u.createElement(k,{className:bb,"data-gt":ab,size:"medium",tooltip:ja.button_tooltip,onClick:za,ref:"closeButton"});}var cb=s.localize(this.props.url),db=null;if(!this.props.noPhotoPreviews)db=q.getThumbnail(this.props.attachments,this.props.attached_story,this.props.feedback_context);var eb=db&&s.snowliftable(cb),fb=s.isVaultSetURI(cb),gb=s.isAlbumDraftRecoveryDialogURI(cb),hb=((this.props.useChevron?"_55ma":'')+(' '+"_55m9")),ib=u.createElement(w,{className:hb,isRead:!!this.props.isRead,onClick:this._markItemReadIfUnreadFromReadButton,readLabel:ea._("Read"),unreadLabel:ea._("Mark as Read")}),jb=null;if(this.props.useChevron){xa=null;var kb=(("_1_0c")+(' '+"_55m9")),lb=null;if(ja)lb=u.createElement(fa,{onclick:this._onClickCloseButton,"data-gt":ab,ref:"closeButton"},u.createElement("div",{className:"_3-y-"},ja.menu_option_title),u.createElement("div",{className:"_3-y_"},ja.menu_option_text));var mb=this.props.gnfGiven?u.createElement(fa,{onclick:this._undoGenericNegative},u.createElement("div",{className:"_3-y-"},ea._("You're not interested in this")),u.createElement("div",{className:"_3-y_"},ea._("Undo"))):u.createElement(fa,{onclick:this._onClickGenericNegative},u.createElement("div",{className:"_3-y-"},ea._("Not interested in this?")),u.createElement("div",{className:"_3-y_"},ea._("Let us know"))),nb=u.createElement(ba,null,mb,lb);jb=u.createElement(aa,{alignh:"right",menu:nb,className:kb,onShow:this._onChevronShow,onHide:this._onChevronHide},u.createElement("div",{className:"_1_0d"}));}var ob=(eb||fb||gb)?cb:this.props.ajaxify_url,pb=null,qb=null,rb=fb?y.getSyncedTabURI().toString():cb;if(eb){pb='theater';}else if(gb){pb='async-post';}else if(fb||ob)pb='dialog';var sb=null,tb=this.props.actors[0];if(tb)sb={backgroundImage:'url('+tb.profile_picture.uri+')'};var ub=false;this.props.attachments.forEach(function(wb){if(ub)return;ub=wb.style_list.indexOf("notification_target")>=0||wb.style_list.indexOf("question")>=0;if(ub)return;});var vb=this.props.isTicker?null:u.createElement("div",null,ib,xa,jb);return (u.createElement("li",{className:la,"data-gt":this.props.tracking,onMouseLeave:ya},u.createElement("div",{className:"anchorContainer"},u.createElement("a",{href:rb,ajaxify:ob,className:(("_33e")+(this.props.useChevron?' '+"_1_0e":'')+(this.props.isTicker?' '+"_3_4h":'')),rel:pb,onClick:qb,onMouseDown:this._markItemRead,onKeyDown:this._onKeyDownItem},u.createElement(n,null,u.createElement("span",{style:sb,className:((!this.props.isNotifsPage&&!this.props.isTicker?"_33h":'')+(this.props.isNotifsPage?' '+"_12u1":'')+(this.props.isTicker?' '+"_1ruy":''))}),u.createElement(m,{flex:m.FLEX.left},u.createElement("div",{className:"_4l_v"},wa,u.createElement(n,{className:(("_33f")+(this.state.isBizSite?' '+"_2g48":''))},u.createElement("img",{className:"_10cu",src:this.props.icon.uri}),u.createElement("span",null,u.createElement(x,{shorten:this.props.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose,className:"_33g"})))),this._renderAttachedImage(db)))),vb)));}});e.exports=ia;},null);
__d("NotificationJewelList.react",["Animation","Event","LoadingIndicator.react","NotificationListPropTypes","NotificationListItem.react","React","ScrollableArea.react","Vector","cx","debounce","fbt","getObjectValues","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=160,u=530,v=40,w=64,x=430,y=l.createClass({displayName:"NotificationJewelList",propTypes:j,_isLoadingIndicatorVisible:function(){var z=this.refs.loading;if(!z)return false;var aa=l.findDOMNode(this.refs.scrollable),ba=n.getElementDimensions(aa).y;if(ba===0)return false;var ca=n.getElementPosition(aa).y+ba,da=n.getElementPosition(l.findDOMNode(z)).y;da-=v;return da<ca;},_calculateHeight:function(){var z=n.getViewportDimensions().y,aa=Math.min(this.props.maxHeight||u,z-t);if(this.props.upsell)return Math.max(aa-w,0);return aa;},_keepOnLoading:function(){if(this.isMounted())this.props.afterScroll(this._isLoadingIndicatorVisible());},_renderItems:function(){return r(this.props.notifs).map(function(z){var aa=z.alert_id;return (l.createElement(k,l.__spread({key:aa,visible:!this.props.hiddenState[aa],isRead:this.props.readState[aa],gnfGiven:this.props.gnfState[aa],negativeTracking:this.props.negativeTracking,shortenTimestamp:this.props.shortenTimestamp,useChevron:this.props.useChevron,onChevronShow:this.props.onChevronShow,onChevronHide:this.props.onChevronHide,parent:this},z)));}.bind(this));},componentDidMount:function(){var z=l.findDOMNode(this.refs.scrollable);h.listen(window,'resize',p(function(){if(!s(this.props.notifs))new g(z).to('height',this._calculateHeight()+'px').duration(100).go();}.bind(this)));},componentDidUpdate:function(z){if(this.props.paused&&!z.paused)if(this.props.shouldScroll&&this.refs.scrollable)this.refs.scrollable.getArea().scrollToTop(false);setTimeout(this._keepOnLoading,0);},render:function(){var z=this.props.notifs,aa=null,ba=null,ca=x,da=null;if(!s(z)){aa=l.createElement("ul",{"data-gt":this.props.tracking},this._renderItems());ba=this._calculateHeight();}else if(!this.props.canFetchMore)aa=l.createElement("div",{className:"_572e"},q._("No new notifications"));if(this.props.canFetchMore)da=l.createElement(i,{color:"white",size:"small",ref:"loading",className:"_33i"});var ea=null;if(this.props.upsell){var fa=this.props.upsell.module;ea=l.createElement(fa,l.__spread({},this.props.upsell.props));}var ga=(("_50-t")+(this.props.showingChevron?' '+"_2iy1":''));return (l.createElement("div",{className:ga},l.createElement(m,{ref:"scrollable",width:ca,height:ba,fade:true,persistent:true,onScroll:p(this._keepOnLoading)},aa,da),ea));}});e.exports=y;},null);
__d("NotificationJewelListController",["NotificationList.react","NotificationJewelList.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l){"use strict";this.$NotificationJewelListController0=k;this.$NotificationJewelListController1=l;this.$NotificationJewelListController2=false;this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();}j.prototype.open=function(){"use strict";this.$NotificationJewelListController2=true;this.$NotificationJewelListController4();};j.prototype.pause=function(){"use strict";this.$NotificationJewelListController3=true;this.$NotificationJewelListController4();};j.prototype.unpause=function(){"use strict";this.$NotificationJewelListController3=false;this.$NotificationJewelListController4();};j.prototype.$NotificationJewelListController4=function(){"use strict";i.render(i.createElement(g,{hasEverBeenOpened:this.$NotificationJewelListController2,paused:this.$NotificationJewelListController3,tracking:this.$NotificationJewelListController1.tracking,negativeTracking:this.$NotificationJewelListController1.negativeTracking,shortenTimestamp:this.$NotificationJewelListController1.shortenTimestamp,businessID:this.$NotificationJewelListController1.businessID,maxHeight:this.$NotificationJewelListController1.maxHeight,useChevron:this.$NotificationJewelListController1.useChevron,numPerPage:5,listRenderer:h,upsell:this.$NotificationJewelListController1.upsell||null}),this.$NotificationJewelListController0);};e.exports=j;},null);
__d("ContextualHelpSearchController",["Event","AsyncRequest","DOM","CSS","Focus","Input"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=400;function n(){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;}Object.assign(n.prototype,{init:function(o,p,q,r,s,t){this.loader=o;this.search_box=p;this.topics_area=q;this.results_area=r;this.clear_button=s;this.typing_listener=g.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=g.listen(this.clear_button,'click',this.clearResults.bind(this));if(t==null||t.focusSearchBox==null||t.focusSearchBox)k.set(this.search_box);},source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';l.reset(this.search_box);k.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}j.addClass(this.clear_button,'hidden_elem');},update:function(){var o=l.getValue(this.search_box);if(o===this._lastQuery)return;this._lastQuery=o;if(o===''){this.clearResults();return;}this.show(this.loader);var p={query:o,width:this._width||m,source:this.source};this.async_request=new h('/help/ajax/search/').setData(p).setHandler(function(q){this._update(q);}.bind(this));this.async_request.send();},_update:function(o){this.async_request=null;var p=o.getPayload().results;i.setContent(this.results_area,p);this.show(this.results_area);if(l.getValue(this.search_box)===''){this.clearResults();}else j.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(o){var p=[this.loader,this.topics_area,this.results_area];for(var q=0;q<p.length;q++)j.addClass(p[q],'hidden_elem');j.removeClass(o,'hidden_elem');}});e.exports=n;},null);
__d("RequestsJewel",["Animation","AccessibilityLogger","Arbiter","AsyncRequest","AsyncSignal","ChannelConstants","CSS","DOM","Event","LinkController","Parent","ScrollableArea","Vector","$","debounce","ge","shield","fbt","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=null;y(['FriendBrowserCheckboxController'],function(ea){return z=ea;});var aa=530,ba=30,ca=160;Object.assign(da,{instance:null,getInstance:function(){return da.instance;},replaceJewelTitle:function(ea,fa){n.setContent(t(ea),fa);},updateFromDOM:function(){if(da.instance)da.instance.fromDom();},setInitialHeight:function(){if(da.instance)da.instance.setHeight();},maybeLoadJewel:function(){if(da.instance)da.instance.maybeLoadJewel();}});function da(ea,fa,ga){"use strict";da.instance=this;this.countNew=0;this.jewel=ea;this.jewelFlyoutCase=ea.getRoot();this.jewelFlyout=v('fbRequestsFlyout');this.newCountSpan=v('newRequestCount');this.folder=fa;this.doNewMarkRead=ga;this.openTimestamp=0;this.$RequestsJewel0={};this.$RequestsJewel1=0;this.shouldClearPredictionAssocOnClick=false;var ha=v('requestsMarkReadButton');if(ha)o.listen(ha,'click',w(this.$RequestsJewel2,this));this.jewel.subscribe('marked-seen',w(this.$RequestsJewel3,this));this.jewel.subscribe('closed',w(this.$RequestsJewel4,this));this.jewel.subscribe('updated',this.$RequestsJewel5.bind(this));this.jewel.subscribe('opened',this.$RequestsJewel6.bind(this));p.registerHandler(this.$RequestsJewel7.bind(this));i.subscribe(l.getArbiterType('jewel_requests_add'),this.$RequestsJewel8.bind(this));i.subscribe(l.getArbiterType('jewel_friending_notifs'),this.$RequestsJewel9.bind(this));i.subscribe(l.getArbiterType('jewel_requests_remove_old'),this.$RequestsJewela.bind(this));i.subscribe(l.getArbiterType('friend_requests_seen'),this.$RequestsJewelb.bind(this));o.listen(this.jewelFlyout,'submit',function(ja){var ka=q.byClass(ja.getTarget(),'objectListItem');if(ka){m.removeClass(ka,'jewelItemNew');m.addClass(ka,'jewelItemResponded');}}.bind(this));var ia=n.find(v('fbRequestsJewel'),'a[rel="toggle"]');o.listen(ia,'focus',function(ja){h.logFocusIn();}.bind(this));this.setupScroll();o.listen(window,'resize',u(function(){this.$RequestsJewelc();}.bind(this)));}da.prototype.setupScroll=function(){"use strict";var ea=n.scry(this.jewelFlyout,'.uiScrollableAreaWrap')[0];if(ea){this.$RequestsJeweld=ea;this.$RequestsJewele=0;this.$RequestsJewelf=o.listen(ea,'scroll',this.$RequestsJewelg.bind(this),o.Priority.$RequestsJewelh);}};da.prototype.fromDom=function(){"use strict";n.scry(this.jewelFlyout,'.jewelItemList li.objectListItem').forEach(function(ea){var fa=ea.getAttribute('id');if(fa){var ga=v(fa+'_status'),ha=this.$RequestsJeweli(fa);if(ha.requester)this.$RequestsJewel0[ha.requester]=fa;++this.$RequestsJewel1;}}.bind(this));this.$RequestsJewelj();};da.prototype.$RequestsJewelk=function(ea){"use strict";var fa=ea.match(/^(\d+)_(\d+)/);return (fa)?{requester:fa[1],type:fa[2]}:(void 0);};da.prototype.$RequestsJeweli=function(ea){"use strict";var fa=ea?this.$RequestsJewelk(ea):(void 0),ga;if(fa&&fa.requester){ga=parseInt(fa.requester,10);if(isNaN(ga))ga=(void 0);}var ha;if(fa&&fa.type){ha=parseInt(fa.type,10);if(isNaN(ha))ha=(void 0);}return {requester:ga,type:ha};};da.prototype.$RequestsJewell=function(){"use strict";if(this.countNew>0)this.countNew-=1;};da.prototype.$RequestsJewel7=function(ea,event){"use strict";var fa=q.byClass(ea,'jewelItemNew');if(fa&&q.byClass(fa,'fbRequestList')&&q.byClass(fa,'beeperEnabled')){var ga=this.$RequestsJewelk(fa.id);ga&&this.$RequestsJewel3(ga.requester,ga.type);this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});m.removeClass(fa,'jewelItemNew');}return true;};da.prototype.$RequestsJewelm=function(){"use strict";return n.scry(this.jewelFlyout,'.uiScrollableArea')[0];};da.prototype.$RequestsJewelg=function(){"use strict";var ea=n.scry(this.$RequestsJeweld,'.uiMorePager');if(!ea)return;var fa=ea.pop();if(fa){var ga=s.getElementPosition(fa,'viewport').y;if(ga>0)m.addClass(q.byClass(this.$RequestsJeweld,'uiScrollableArea'),'contentAfter');var ha=n.find(fa,'a');if(!ha)return;var ia=s.getElementPosition(ha,'viewport').y;if(ia==this.$RequestsJewele)return;var ja=s.getElementPosition(this.$RequestsJeweld,'viewport').y+s.getElementDimensions(this.$RequestsJeweld).y;if(ia-300<ja&&ia>0){this.$RequestsJewele=ia;var ka=ha.getAttribute('ajaxify');if(ka){new j(ka).setRelativeTo(ha).setStatusElement(q.byClass(ha,'stat_elem')).send();}else z&&z.getInstance('jewel').showMore();}}};da.prototype.$RequestsJewel9=function(ea,fa){"use strict";if(!fa||this.jewel.isOpen())return;if(fa.obj.notif_type!=='friend_confirmed')return;if(v('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();return;}var ga={};ga.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(ga).send();};da.prototype.$RequestsJewel8=function(ea,fa){"use strict";if(!fa)return;var ga=fa.obj.from,ha=fa.obj.suggester,ia=this.$RequestsJeweli(this.$RequestsJewel0[ga]).type,ja=ia===19&&!ha;if(!ja&&(ia||this.jewel.isOpen()))return;if(v('fbRequestsJewelLoading')){new j().setURI('/ajax/requests/loader/').send();}else{var ka={};ka.reloadcontent=true;new j().setURI('/ajax/requests/loader/').setData(ka).send();}};da.prototype.$RequestsJewela=function(ea,fa){"use strict";if(!fa||this.jewel.isOpen()||v('fbRequestsJewelLoading')!==null)return;var ga=this.$RequestsJewel0[fa.obj.from],ha=ga&&v(ga);if(ha){if(m.hasClass(ha,'jewelItemNew')){this.$RequestsJewell();i.inform('jewel/count-updated',{jewel:'requests',count:this.countNew});}if(!m.hasClass(ha,'jewelItemResponded')){n.remove(ha);delete this.$RequestsJewel0[fa.obj.from];--this.$RequestsJewel1;this.$RequestsJewelj();}}};da.prototype.$RequestsJewel2=function(){"use strict";this.jewel.markSeen();this.$RequestsJewelo();};da.prototype.$RequestsJewel3=function(ea,fa){"use strict";var ga=n.scry(this.jewelFlyout,'li');new k('/ajax/gigaboxx/endpoint/UpdateLastSeenTime.php',{folder:this.folder,first_item:ga[0].id}).send();var ha=typeof ea!='undefined'&&typeof fa!='undefined'?{requester:ea,type:fa}:{};this.doNewMarkRead&&new k('/ajax/requests/mark_read/',ha).send();};da.prototype.$RequestsJewelb=function(ea,fa){"use strict";i.inform('jewel/count-updated',{jewel:'requests',count:0});};da.prototype.$RequestsJewelo=function(ea,fa){"use strict";n.scry(this.jewel.root,'li.jewelItemNew').forEach(function(ga){m.removeClass(ga,'jewelItemNew');});};da.prototype.$RequestsJewel5=function(ea,fa){"use strict";this.countNew=fa.count;m.conditionClass(this.jewelFlyout,'beeperUnread',this.countNew>0);m.conditionClass(this.jewelFlyoutCase,'showRequests',this.countNew>0);if(this.newCountSpan){var ga=this.countNew==1?x._("{num} NEW REQUEST",[x.param("num",this.countNew)]):x._({"*":"{num} NEW REQUESTS"},[x.param("num",this.countNew,[0])]);n.setContent(this.newCountSpan,ga);}};da.prototype.$RequestsJewelj=function(){"use strict";n.scry(this.jewelFlyout,'li.empty').forEach(function(ea){m.conditionShow(ea,this.$RequestsJewel1<=0);}.bind(this));};da.prototype.$RequestsJewel6=function(){"use strict";i.inform('requestsJewel/opened');var ea=v('fbRequestsJewelLoading'),fa=this.$RequestsJewelm();if(!ea&&!fa){this.unhandledRequest=true;}else if(ea){var ga=Date.now();if(this.openTimestamp+5000<ga){this.openTimestamp=ga;new j().setURI('/ajax/requests/loader/').setData({log_impressions:true}).send();}}else{var ha=Object.keys(this.$RequestsJewel0);if(ha.length>0)new j().setURI('/friends/requests/log_impressions').setData({ids:ha.join(','),ref:'jewel'}).send();}fa&&r.poke(fa);};da.prototype.$RequestsJewel4=function(){"use strict";i.inform('requestsJewel/closed');this.$RequestsJewelo();};da.prototype.$RequestsJewelp=function(){"use strict";return Math.min(Math.max(s.getViewportDimensions().y-ca,ba),aa);};da.prototype.$RequestsJewelc=function(){"use strict";if(this.$RequestsJewelm())new g(this.$RequestsJewelm()).to('height',this.$RequestsJewelp()+'px').duration(100).go();};da.prototype.setHeight=function(){"use strict";this.$RequestsJewelm().style.height=this.$RequestsJewelp()+'px';};da.prototype.maybeLoadJewel=function(){"use strict";if(this.unhandledRequest){this.unhandledRequest=false;this.$RequestsJewel6();}};e.exports=da;},null);
__d("JewelX",["Event","Arbiter","ArbiterMixin","CSS","DOM","HTML","Keys","TabIsolation","Toggler","Run","csx","emptyFunction","reportData","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=function(v,w){v&&w&&this.init(v,w);};Object.assign(u,{_instancesByName:{},_resizeListener:null});Object.assign(u.prototype,i,{init:function(v,w){this.name=w.name;this.root=v;this.badge=w.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;this.bootload_module=w.bootload_module;this.bootload_args=w.bootload_args;this.bootload_done=false;this.togglerInstance=o.createInstance(v).setSticky(false);p.onAfterLoad(function(){return this._setupBootload();}.bind(this));if(w.keepOpenForSnowlift)this.togglerInstance.setPrePageTransitionCallback(this._onPrePageTransition.bind(this));u._instancesByName[this.name]=this;var x=this.getFlyout(),y=new n(x);o.createInstance(x).setSticky(false);o.listen('show',this.root,function(z){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();this.inform('opened');h.inform('layer_shown',{type:'Jewel'});y.enable();this.setupEvents();this._setupBootload();}.bind(this));o.listen('hide',this.root,function(z,aa){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');h.inform('layer_hidden',{type:'Jewel'});y.disable();this.removeEvents();}.bind(this));h.subscribe('jewel/count-updated',function(z,aa){aa.jewel==this.name&&this.update(aa);}.bind(this));h.subscribe('jewel/count-initial',function(z,aa){aa.jewel==this.name&&this.setInitial(aa);}.bind(this));h.subscribe('jewel/reset',function(z,aa){aa.jewel==this.name&&this.reset();}.bind(this));h.subscribe('jewel/focus',function(z,aa){if(this.isOpen())o.hide(this.root);}.bind(this));u._resizeListener=u._resizeListener||(function(){var z=null;return g.listen(window,'resize',function(){clearTimeout(z);z=t(h.inform.bind(h,'jewel/resize'),100);});})();},getRoot:function(){return this.root;},getFlyout:function(){if(typeof this._flyout==='undefined')this._flyout=k.find(this.root,".__tw");return this._flyout;},hasNew:function(){return j.hasClass(this.root,'hasNew');},isOpen:function(){return j.hasClass(this.root,'openToggler');},reset:function(){j.removeClass(this.root,'hasNew');},setContent:function(v){var w=k.find(this.root,'ul.jewelItemList');k.setContent(w,l(v));},update:function(v){this.countNew=v.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var w=isNaN(this.countNew)||this.countNew>0;j.conditionClass(this.root,'hasNew',w);this.inform('updated',v);},setInitial:function(v){this.initialCount=v;},setupEvents:function(){this.escHandler=g.listen(document.documentElement,'keydown',function(v){if(v.keyCode===m.ESC&&this.isOpen())o.hide(this.root);}.bind(this));},removeEvents:function(){if(this.escHandler){this.escHandler.remove();this.escHandler=null;}},markSeen:function(){h.inform('jewel/count-updated',{jewel:this.name,count:0},h.BEHAVIOR_STATE);this.inform('marked-seen');},_onPrePageTransition:function(v,w){if(!this._isSnowliftURI(w.from)&&!this._isSnowliftURI(w.to))this.togglerInstance&&this.togglerInstance.hide();},_isSnowliftURI:function(v){return v&&v.getQueryData().hasOwnProperty('theater');},_logFirstClick:function(){this._logFirstClick=r;s('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});},_setupBootload:function(){if(this.bootload_done||!this.bootload_module)return;this.bootload_done=true;this.bootload_module.load().then(function(v){var w=v[0];return new w(this,this.bootload_args);}.bind(this));}});e.exports=u;},null);
__d("LitestandNewsfeedCountUpdater",["Arbiter","AsyncRequest","LitestandMessages","LitestandSidebarBookmarkConfig","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l,m;function n(){m&&clearTimeout(m);if(l)return;m=setTimeout(o,j.nf_count_query_interval_ms);}function o(){if(l)return;new h().setURI('/ajax/litestand/newsfeed_count').setHandler(function(r){if(l)return;p(r.getPayload());n();}).setAllowCrossPageTransition(true).send();}function p(r){g.inform(i.UPDATE_HOME_COUNT,{count:r,onHome:l},g.BEHAVIOR_STATE);}var q={init:function(){q.init=k;g.subscribe(i.NEWSFEED_LOAD,function(){l=true;p(0);});g.subscribe(i.LEAVE_HOME,function(){l=false;n();});n();}};e.exports=q;},null);
__d("LitestandChromeHomeCount",["Arbiter","CSS","DOM","Event","LitestandMessages","LitestandNewsfeedCountUpdater","Parent","UserAgent_DEPRECATED","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=20,r,s,t,u,v,w={init:function(x){v=x;s=i.find(document,"div._uaw ._5ahz");r=s.parentNode;t=m.byClass(r,"_1ayn");u=false;g.subscribe(k.UPDATE_HOME_COUNT,function(y,z){w.updateBadge(z.onHome?0:z.count);});j.listen(t,'click',function(event){var y=event.getModifiers();if(y.shift||(n.osx()&&y.meta)||(n.windows()&&y.control))w.updateBadge(0);});l.init();w.updateBadge(v);},updateBadge:function(x){v=x;var y=x>0;w.toggleBadge(y);if(y){var z=x>q?q+'+':x;i.setContent(s,z);}},toggleBadge:function(x){if(u===x)return;u=x;h.conditionClass(r,"_5ahy",!x);}};e.exports=w;},null);
__d("MercuryJewelModuleLoader",["getModuleLoader"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g(['MercuryJewel']);},null);
__d("RenderManager",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this._isDirty=false;this._obj=h;}g.prototype.dirty=function(){"use strict";if(!this._isDirty){this._isDirty=true;setTimeout(this._doPaint.bind(this),0);}};g.prototype._doPaint=function(){"use strict";this._isDirty=false;this._obj.paint();};e.exports=g;},null);
__d("CounterDisplay",["Arbiter","CSS","DOM","RenderManager","Run","$","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o,p,q,r,s,t){Object.assign(this,{_name:o,_valueNode:l(p),_wrapperNode:l(q)||null,_statusClass:s,_rm:new j(this),_arbiterSubscription:null,_count:0});var u=this._valueNode.firstChild;if(u){var v=parseInt(u.nodeValue,10);if(!isNaN(v))this._count=v;}this._statusNode=r?l(r):null;this._subscribeAll();n.instances.push(this);if(!t)k.onLeave(this._destroy.bind(this),true);}Object.assign(n,{EVENT_TYPE_ADJUST:'CounterDisplay/adjust',EVENT_TYPE_UPDATE:'CounterDisplay/update',instances:[],adjustCount:function(o,p){g.inform(n.EVENT_TYPE_ADJUST+'/'+o,p);},setCount:function(o,p){g.inform(n.EVENT_TYPE_UPDATE+'/'+o,p);}});Object.assign(n.prototype,{_destroy:function(){delete this._valueNode;delete this._wrapperNode;if(this._arbiterSubscription){this._arbiterSubscription.unsubscribe();delete this._arbiterSubscription;}m(n.instances,this);},adjustCount:function(o){this._count=Math.max(0,this._count+o);this._rm.dirty();return this;},setCount:function(o){this._count=Math.max(0,o);this._rm.dirty();return this;},paint:function(){i.setContent(this._valueNode,this._count);this._toggleNodes();},_toggleNodes:function(){if(this._wrapperNode)h.conditionClass(this._wrapperNode,'hidden_elem',this._count<=0);if(this._statusClass&&this._statusNode)h.conditionClass(this._statusNode,this._statusClass,this._count>0);},_subscribeAll:function(){var o=[n.EVENT_TYPE_ADJUST+'/'+this._name,n.EVENT_TYPE_UPDATE+'/'+this._name];this._arbiterSubscription=g.subscribe(o,this._onInform.bind(this),g.SUBSCRIBE_NEW);},_onInform:function(o,p){p=parseInt(p);if(isNaN(p))return;if(o.indexOf(n.EVENT_TYPE_ADJUST)!=-1){this.adjustCount(p);}else if(o.indexOf(n.EVENT_TYPE_UPDATE)!=-1){this.setCount(p);}else return;return;}});e.exports=n;},null);
__d("MessagingEvents",["Arbiter","ChannelConstants","arrayContains","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={},m=new g();function n(o){if(!k(l))return;for(var p in o)m.inform('count/'+p,o[p]);}m.subscribe('mark-as-read',function(o,p){(p.tids||p.chat_ids||[]).forEach(function(q){q=''+q;if(!(q in l)){l[q]=true;var r=function(){m.unsubscribe(s);clearTimeout(t);delete l[q];},s=m.subscribe('read',function(u,v){if(i((v.tids||[]),q)||i((v.chat_ids||[]),q))r();}),t=setTimeout(r,60000);}});});g.subscribe(h.getArbiterType('messaging'),function(o,p){var q=j({},p.obj),event=q.event||'';delete q.type;delete q.event;m.inform(event,q);if('unread_counts' in q){var r=q.unread_counts;n({unread:r.inbox,other_unseen:r.other});}});g.subscribe(h.getArbiterType('inbox'),function(o,p){var q=j(p.obj);delete q.type;n(q);});a.MessagingEvents=e.exports=m;},3);
__d("TitanLeftNav",["CounterDisplay","MessagingEvents"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={initialize:function(){h.subscribe('count/other_unseen',function(j,k){g.setCount('other_unseen',k);});}};e.exports=i;},null);
__d("AccessibilityShortcut",["AccessibilityLogger","Event","Focus","ge","onEnclosingPageletDestroy","warning"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={init:function(n,o){var p=h.listen(n,'click',function(q){q.preventDefault();var r=j(o);if(r){i.set(r);g.logSRKey();}else l(r,'Failed to set focus on element with ID: %s',o);});k(n,function(){return p.remove();});}};e.exports=m;},null);
__d("AccessibleMenu",["Event","CSS","DOM","Keys","TabbableElements","Toggler"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m,n,o;function p(){var x=i.scry(m,'a[rel="toggle"]')[0];x&&x.focus();l.getInstance(m).hide();}function q(x){if(!x)return false;h.removeClass(x,'selected');x.setAttribute('aria-selected','false');}function r(x){if(!x)return false;h.addClass(x,'selected');x.setAttribute('aria-selected','true');var y=k.find(x);if(y[0])y[0].focus();}function s(x){var y=i.scry(m,'.selected')[0],z=n.indexOf(y)+x,aa=n[z];if(!aa)return false;q(y);r(aa);}function t(x){if(!l.isShown()||l.getActive()!==m||h.hasClass(m,w.MENU_HIDDEN))return true;var y=g.getKeyCode(x);switch(y){case j.TAB:s(x.shiftKey?-1:1);g.prevent(x);break;case j.ESC:p();g.prevent(x);break;case j.UP:case j.DOWN:s(y===j.UP?-1:1);g.prevent(x);break;}}function u(x,y){m=y.getActive();n=i.scry(m,'[role="menuitem"]');if(!o)o=g.listen(document.documentElement,'keydown',t);}function v(){if(l.getActive()==m)q(i.scry(m,'.selected')[0]);}var w={init:function(x){l.listen('show',x,u);l.listen('hide',x,v);},MENU_HIDDEN:'menu_hidden'};e.exports=w;},null);
__d("NotificationJewelReminder",["Arbiter","ContextualDialog","ContextualDialogXUITheme","DOM","Event","ImageBlock.react","LayerFadeOnHide","LayerFadeOnShow","NotificationStore","React","SubscriptionsHandler","Toggler","$","cx","fbt","intlList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=2,x="fbRequestsJewel",y="fbNotificationsJewel";z.init=function(aa){"use strict";new z(aa);};function z(aa){"use strict";this.$NotificationJewelReminder0=aa;if(aa.request.count>0&&aa.show_request){this.$NotificationJewelReminder1(x);}else this.$NotificationJewelReminder2();}z.prototype.$NotificationJewelReminder2=function(){"use strict";if(!this.$NotificationJewelReminder0.show_notif)return;if(o.getCount()){this.$NotificationJewelReminder3();return;}};z.prototype.$NotificationJewelReminder3=function(){"use strict";o.getNotifications(o.getCount(),this.$NotificationJewelReminder4.bind(this));};z.prototype.$NotificationJewelReminder4=function(aa){"use strict";var ba=r.getInstance(s(y));if(ba&&ba.isShown())return;var ca=[],da,ea=Object.keys(aa);for(var fa=0;fa<ea.length;fa++){if(!aa[ea[fa]].showBeep)continue;var ga=aa[ea[fa]].actors;if(ga.length===0)continue;for(var ha=0;ha<ga.length;ha++){da=da||ga[ha].profile_picture.uri;if(ca.length<w&&ga[ha].name&&ca.indexOf(ga[ha].name)===-1)ca.push(ga[ha].name);}if(ca.length===w)break;}if(ca.length===0||!da)return;var ia=this.$NotificationJewelReminder5(da,ca,ea.length,y);this.$NotificationJewelReminder6(ia);};z.prototype.$NotificationJewelReminder5=function(aa,ba,ca,da){"use strict";var ea=p.createElement("div",{className:"_5bov"},p.createElement(l,null,p.createElement("img",{className:"_5bow",src:aa}),p.createElement("div",null,this.$NotificationJewelReminder7(ca,ba,da)))),fa=j.create('div');p.render(ea,fa);var ga=new h({alignment:'right',contextSelector:'#'+da,offsetY:-10,position:'below',theme:i,width:210},fa);ga.enableBehaviors([n,m]);return ga;};z.prototype.$NotificationJewelReminder7=function(aa,ba,ca){"use strict";ba=ba.map(function(da){return p.createElement("b",null,da);});if(ca===y){return (u._({"*":{"notifications":"{number} notifications from {notification senders}","notification":"{number} notification from {notification senders}"}},[u.param("number",aa,[0]),u['enum'](aa>1?'notifications':'notification',{notifications:"notifications",notification:"notification"}),u.param("notification senders",v(ba))]));}else return (u._({"*":{"requests":"{number} friend requests from {request senders}","request":"{number} friend request from {request senders}"}},[u.param("number",aa,[0]),u['enum'](aa>1?'requests':'request',{requests:"requests",request:"request"}),u.param("request senders",v(ba))]));};z.prototype.$NotificationJewelReminder6=function(aa){"use strict";aa.show();this.$NotificationJewelReminder8=aa;var ba=aa.getRoot();this.$NotificationJewelReminder9=setTimeout(this.$NotificationJewelRemindera.bind(this),this.$NotificationJewelReminder0.show_time);this.$NotificationJewelReminderb=new q();this.$NotificationJewelReminderb.addSubscriptions(g.subscribe('layer_shown',function(ca,da){if(da&&da.type==='Jewel')this.$NotificationJewelRemindera();}.bind(this)),k.listen(ba,'mouseenter',function(){clearTimeout(this.$NotificationJewelReminder9);}.bind(this)),k.listen(ba,'mouseleave',this.$NotificationJewelRemindera.bind(this)),k.listen(ba,'click',function(){this.$NotificationJewelRemindera();r.show(s(y));}.bind(this)));};z.prototype.$NotificationJewelRemindera=function(){"use strict";clearTimeout(this.$NotificationJewelReminder9);this.$NotificationJewelReminder8.hide();this.$NotificationJewelReminderb.release();};z.prototype.$NotificationJewelReminder1=function(aa){"use strict";if(!this.$NotificationJewelReminder0.show_request||!this.$NotificationJewelReminder0.request.count)return;var ba=r.getInstance(s(aa));if(ba&&ba.isShown())return;var ca=this.$NotificationJewelReminder5(this.$NotificationJewelReminder0.request.pics[0],this.$NotificationJewelReminder0.request.names,this.$NotificationJewelReminder0.request.count,aa);this.$NotificationJewelReminderd(ca);};z.prototype.$NotificationJewelReminderd=function(aa){"use strict";aa.show();this.$NotificationJewelRemindere=aa;var ba=aa.getRoot();this.$NotificationJewelReminderf=setTimeout(this.$NotificationJewelReminderg.bind(this),this.$NotificationJewelReminder0.show_time);this.$NotificationJewelReminderh=new q();this.$NotificationJewelReminderh.addSubscriptions(g.subscribe('layer_shown',function(ca,da){if(da&&da.type==='Jewel')this.$NotificationJewelReminderg();}.bind(this)),k.listen(ba,'mouseenter',function(){clearTimeout(this.$NotificationJewelReminderf);}.bind(this)),k.listen(ba,'mouseleave',this.$NotificationJewelReminderg.bind(this)),k.listen(ba,'click',function(){this.$NotificationJewelReminderg();r.show(s(x));}.bind(this)));};z.prototype.$NotificationJewelReminderg=function(){"use strict";clearTimeout(this.$NotificationJewelReminderf);this.$NotificationJewelRemindere.hide();this.$NotificationJewelReminderh.release();this.$NotificationJewelReminder2();};e.exports=z;},null);
__d("PagesVoiceBar",["$","Arbiter","AsyncRequest","ChannelConstants","DOM","URI","ViewportBounds","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o='PagesVoiceBar/initialized',p='PagesVoiceBar/switchVoice',q='page_transition',r='pages_voice_bar_sync',s=null,t=null,u=null,v=false,w=m.addTop(0);function x(da,ea){new i('/ajax/pages/switch_voice.php').setData(ea).setHandler(function(fa){ba();}).send();}function y(){s=null;}function z(da,ea){if(ea.obj.profile_id&&ea.obj.profile_id===s)ba();}function aa(da){h.subscribe(o,da);}function ba(){l.getNextURI().go();}var ca={initVoiceBar:function(){if(v)return;t=g('pagesVoiceBarContent');h.subscribe(p,x);h.subscribe(q,y);h.subscribe(j.getArbiterType(r),z);v=true;u=k.scry(t,"^div._4f7n")[0];h.inform(o,null,h.BEHAVIOR_STATE);},update:function(da,ea){aa(function(){s=ea;k.setContent(t,da);var fa=t.offsetHeight;if(!u&&w.getSize()!==fa){w.remove();w=m.addTop(m.getTop()+fa);}});}};e.exports=ca;},null);
__d("PrivacyLiteFlyout",["Animation","Arbiter","ArbiterMixin","AsyncDialog","AsyncRequest","Banzai","CSS","DOM","Ease","Event","Parent","PrivacyConst","Style","SubscriptionsHandler","Toggler","XPrivacyCheckupSpawnDialogController","XPrivacyRemindersDismissController","copyProperties","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){b.__markCompiled&&b.__markCompiled();var ba='PrivacyLiteFlyout/expandingSection',ca={},da={};function ea(ka,la,ma){var na=la?0:ka.offsetHeight;s.set(ka,'height',na+'px');s.set(ka,'overflow','hidden');m.show(ka);var oa=la?ka.scrollHeight:0,pa=n.getID(ka);ca[pa]&&ca[pa].stop();ca[pa]=new g(ka).to('height',oa).ondone(function(){ca[pa]=null;s.set(ka,'height','');s.set(ka,'overflow','');oa||m.hide(ka);ma();}).duration(Math.abs(oa-na)*1.5).ease(o.sineOut).go();}function fa(ka){var event='other_section';switch(ka){case 'who_can_see':case 'who_can_contact':case 'how_to_stop':event=ka;break;}return event;}var ga=null,ha=false,ia=false,ja=x({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(ka){if(!ha&&aa('fbPrivacyLiteFlyoutLoading')){ha=true;new k('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:ka}).send();}},_addListener:function(ka,event,la){return p.listen(ka,'click',function(){l.post('privacy_lite',{event:event,exit_point:la});});},addLoggingElem:function(ka,event,la){var ma=this._loggingElements.length,na={elem:ka,event:event,exit:la};this._loggingElements[ma]=na;},registerSettingsAndBasicsLinkLogging:function(ka,event,la,ma){var na=n.scry(ka,"._5cw0")[0],oa=n.scry(ka,"._3djx")[0];if(na){this._settingsLinkListener&&this._settingsLinkListener.release();this._settingsLinkListener=this._addListener(na,event,la);}if(oa){this._privacyBasicsLinkListener&&this._privacyBasicsLinkListener.release();this._privacyBasicsLinkListener=this._addListener(oa,event,ma);}},_subscribeListeners:function(){this._loggingElements&&this._loggingElements.forEach(function(ka){this._subscriptions&&this._subscriptions.addSubscriptions(this._addListener(ka.elem,ka.event,ka.exit));},this);},renderBody:function(ka,la){var ma=aa('fbPrivacyLiteFlyoutLoading');if(ma){n.replace(ma,ka);ja.registerCallback(function(){ja.inform('load',null,h.BEHAVIOR_STATE);},la);}},hideCleanup:function(ka){h.inform(ba);var la=n.scry(ka,"._2va0").forEach(function(ma){m.removeClass(ma,"_2va0");});},registerFlyoutToggler:function(ka,la,ma){this._loggingElements=[];ga=la;var na=u.createInstance(ka);na.setSticky(false);u.listen(['show','hide'],la,function(oa){ja.inform(oa);ia=oa==='show';if(!ia){ja.hideCleanup(ka);na.hide();this._subscriptions&&this._subscriptions.release();this._subscriptions=null;h.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else{h.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});if(ma){ma.start(this);ma=null;}h.subscribeOnce(ba,function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=new t();this._subscribeListeners();}.bind(this));l.post('privacy_lite',{event:'show_flyout',exit_point:null});}}.bind(this));},isFlyoutVisible:function(){return ga&&u.getActive()===ga;},exists:function(){return !!n.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(ka){ka?u.show(ga):u.hide(ga);},showSection:function(ka){var la=da[ka];if(!la)return;if(!la.sublist_container){ja.inform('expanded',ka,h.BEHAVIOR_STATE);return;}var ma=la.chevron,na=la.sublist_container;h.inform(ba,ma);if(ja.inform('expand',ka)!==false){m.removeClass(ma,"_9or");m.addClass(ma,"_9os");ea(na,true,function(){ja.inform('expanded',ka);});}},hideSection:function(ka,la,ma){var na=da[ka],oa=na.chevron,pa=na.sublist_container;if(ma===oa)return;if(ja.inform('collapse',ka)!==false){m.addClass(oa,"_9or");m.removeClass(oa,"_9os");ea(pa,false,function(){ja.inform('collapsed',ka);});}},toggleSection:function(ka){var la=da[ka].chevron;u.getInstance(la).hide();if(m.hasClass(la,"_9or")){ja.showSection(ka);l.post('privacy_lite',{event:fa(ka)+'_expand',exit_point:null});new k('/ajax/privacy/privacy_lite/log_section_expand').setData({section:ka}).send();}else{ja.hideSection(ka);l.post('privacy_lite',{event:fa(ka)+'_collapse',exit_point:null});}},registerSection:function(ka,la){da[ka]=la;if(la.sublist_container){h.subscribe(ba,ja.hideSection.bind(null,ka));p.listen(la.section_block,'click',ja.toggleSection.bind(null,ka));}ja.inform(ka);},registerInlineHelpOnAudienceChangeNewSelector:function(ka,la,ma,na){ka=ka.getInstance();ka.subscribe('changed',function(oa){this._registerInlineHelpOnAudienceChange(la,ma,na,ka.getSelectedBaseValue());}.bind(this));},registerSelectorLogging:function(ka,la,ma,na){ka=ka.getInstance();ka.subscribe('open',function(){l.post('privacy_lite',{event:la,exit_point:null});});ka.subscribe('close',function(){l.post('privacy_lite',{event:ma,exit_point:null});});ka.subscribe('changed',function(){l.post('privacy_lite',{event:na,exit_point:null});});},_registerInlineHelpOnAudienceChange:function(ka,la,ma,na){var oa=n.find(ka,"._9o_"),pa=n.find(ka,"._2v9_");if(ma){var qa=n.find(ka,"._5n9w"),ra=(na==r.BaseValue.EVERYONE);m.conditionShow(qa,ra);m.conditionShow(oa,!ra);if(qa&&ra){var sa=(w.getURIBuilder()).setString('type','delta_everyone').setBool('log_plite',true).getURI();new k(sa).send();}}else m.show(oa);m.hide(pa);if(la)new k('/ajax/privacy/privacy_lite/kill_intro').send();},registerInlineHelpXOutOnClick:function(ka,la,ma){p.listen(ka,'click',function(){m.addClass(la,"_9p0");});},registerBlockUnhideOnFocus:function(ka,la){p.listen(ka,'focus',function(ma){m.show(ma);l.post('privacy_lite',{event:'block_user_input_click',exit_point:null});}.bind(this,la));},registerMessageFilterSettingOnClick:function(ka,la){var ma=n.find(ka,"._fv0");p.listen(ka,'click',function(){if(ma.checked){new k('/ajax/mercury/change_filtering_type.php').setData({filtering_type:la,source:'privacy_lite'}).send();}else{var event='basic_filtering';if(la==='strict')event='strict_filtering';l.post('privacy_lite',{event:event,exit_point:null});}});},registerPrivacyCheckupListener:function(ka){p.listen(ka,'click',function(){this.setFlyoutVisible(false);j.send(new k((v.getURIBuilder()).setEnum('source','plite').getURI()));l.post('privacy_lite',{event:'exit_flyout',exit_point:'privacy_checkup'});}.bind(this));},displayPrivacyCheckup:function(ka){ka.show();}},i);e.exports=ja;},null);
__d("PrivacyLiteFlyoutHelp",["Event","Arbiter","AsyncRequest","Banzai","ContextualHelpSearchController","CSS","DOM","Parent","copyProperties","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r,s;function t(u,v,w,x,y){this._width=315;s=m.find(v,'input');var z=m.create('div');this.init(u,s,z,w,x,{focusSearchBox:false});r=n.byClass(v,"_8-a");g.listen(y,'click',function(){this._hideSearch(this);j.post('privacy_lite',{event:'plite_search_collapse',exit_point:null});}.bind(this));h.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var aa=m.scry(r,"._d1r")[0];aa&&g.listen(aa,'click',function(){l.addClass(r,"_aw6");s.focus();j.post('privacy_lite',{event:'plite_search_expand',exit_point:null});if(!this.suggestedResults)new i('/ajax/privacy/privacy_lite/help_suggestions').setHandler(function(ba){var ca=ba.getPayload().searchSuggestions,da=m.find(r,"._4_8m");m.setContent(da,ca);l.addClass(r,"_4_8l");}.bind(this)).send();}.bind(this));}o(t.prototype,new k(),{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();l.removeClass(r,"_aw6");},show:function(u){if(u===this.topics_area){l.removeClass(r,"_aw7");return;}else if(u===this.loader){l.addClass(r,"_aw7");l.hide(this.results_area);}else l.hide(this.loader);l.show(u);}});e.exports=t;},null);
__d("ViewasChromeBar",["Event","Arbiter","AsyncRequest","CSS","DOM","Focus","ModalMask","PageTransitions","Parent","cx","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r='ViewasChromeBar/initialized',s=null,t=false;function u(x){h.subscribe(r,x);}function v(x){j.addClass(x,"_7g7");var y=k.find(x,"._7g0");l.set(k.find(y,'.textInput'));}var w={initChromeBar:function(x){if(t)return;s=x;t=true;h.inform(r,null,h.BEHAVIOR_STATE);},update:function(x,y){u(function(){k.setContent(s,x);if(y)new i('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(x){g.listen(x,'click',v.bind(null,o.byClass(x,"_7f-")));},registerFlyoutModalMask:function(){m.show();n.registerHandler(m.hide,10);}};e.exports=w;},null);