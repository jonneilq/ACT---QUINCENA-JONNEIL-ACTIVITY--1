/*!CK:533035110!*//*1434980001,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["NLWRi"]); }

__d("MercuryAudioType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"};},null);
__d("MercurySendMessageFields",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={AUTO_RETRY_CNT:"auto_retry_cnt",MANUAL_RETRY_CNT:"manual_retry_cnt"};},null);
__d("PhotoResizeModeConst",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CONTAIN:"s",COVER:"p"};},null);
__d("StoryAttachmentStyle",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",CHECKIN:"checkin",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",TRAVEL_SLIDESHOW_LIFE_EVENT:"travel_slideshow_life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",NOTE:"note",TOPIC:"topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",BROADCAST_REQUEST:"broadcast_request",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",DONATIONS_CAMPAIGN:"donations_campaign",DONATE_PROMPT:"donate_prompt",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",INSTANT_ARTICLE:"instant_article",JOIN_TOPIC_CONVERSATION:"join_topic_conversation",MOMENTS_APP_INVITATION:"moments_app_invitation",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",JOB_OFFER:"job_offer",GROUP_ADD_MEMBERS:"group_add_memebers",RTC_CALL_LOG:"rtc_call_log",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion"};},null);
__d("ChatOptions",["Arbiter","ChannelConstants","JSLogger","PresenceUtil","ChatOptionsInitialData"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=i.create('chat_options'),l={};(function(){var n=b('ChatOptionsInitialData');for(var o in n){var p=n[o];l[o]=!!p;}})();var m=Object.assign(new g(),{getSetting:function(n){return l[n];},setSetting:function(n,o,p){if(this.getSetting(n)==o)return;if(p){p='from_'+p;k.log(p,{name:n,new_value:o,old_value:this.getSetting(n)});}l[n]=!!o;g.inform('chat/option-changed',{name:n,value:o});}});g.subscribe(h.getArbiterType('setting'),function(n,o){var p=o.obj;if(p.window_id===j.getSessionID())return;m.setSetting(p.setting,!!p.value,'channel');});g.subscribe(i.DUMP_EVENT,function(n,o){o.chat_options=l;});e.exports=m;},null);
__d("OrderedFriendsList",["AvailableListConstants","PresenceStatus","SearchableEntry","ShortProfiles","WorkModeConfig","createArrayFromMixed","isValidUniqueID","InitialChatFriendsList"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=[],o=[],p={},q=[],r={},s=[],t={contains:function(u){return u in p;},getList:function(){if(k.is_work_user)return l(n);t.reRank();var u=l(n);u=u.filter(function(v){var w=j.getNowUnsafe(v);return !w||w.type=="friend";});return u;},getSearchableEntries:function(u,v){var w=t.getList();j.getMulti(w.slice(0,u),function(x){var y=[];for(var z in x)y.push(t.normalizeProfileEntry(x[z]));var aa=t.getGroups().map(t.normalizeThreadEntry);v(y.concat(aa).filter(function(ba){return !!ba;}).sort(function(ba,ca){return ba.getOrder()-ca.getOrder();}));});},normalizeProfileEntry:function(u){var v=u.searchTokens||[];return new i({uniqueID:u.id,keywordString:v.join(' '),order:t.getRank(u.id),photo:u.thumbSrc,title:u.name,type:u.type,uri:u.uri,auxiliaryData:{isMessengerUser:u.is_messenger_user}});},normalizeThreadEntry:function(u,v){var w=u.mercury_thread,x=u.participants_to_render,y=u.text,z=null;if(!y)y=w.name;var aa=x.map(function(ca){return ca.name;}).join(', ');if(!y){y=aa;}else z=aa;var ba=u.uid;if(!y||!m(ba))return null;return new i({uniqueID:ba,order:v,photo:w.image_src,title:y,subtitle:z,type:'thread',auxiliaryData:{participantsToRender:x,thread:w}});},getRank:function(u){return u in p?p[u]:n.length;},getActiveList:function(){if(q.length>0)return q;return t.getList();},getActiveRank:function(u){return u in r?r[u]:t.getRank(u);},reRank:function(){n=[];var u=0;s.forEach(function(v){var w=v.slice(0,-2),x=v.slice(-1);if(h.get(w)==x){n[u]=w;p[w]=u++;}});},rankActive:function(){var u=0;s.forEach(function(v){var w=v.slice(0,-2),x=v.slice(-1);if(x==g.ACTIVE){q[u]=w;r[w]=u++;}});},getGroups:function(){return o;}};(function(){var u=b('InitialChatFriendsList');n=u.list.length?u.list:[];o=u.groups||[];if(!k.is_work_user){s=n.slice();t.rankActive();t.reRank();}else n.forEach(function(v,w){p[v]=w;});})();e.exports=a.OrderedFriendsList||t;},null);
__d("ChatDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("ChatTabActions",["ChatDispatcher","keyMirror"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h({CLOSE_TAB:null,CLOSE_ALL_TABS:null,CLOSE_FRAGILE_TABS:null,LOWER_TAB:null,OPEN_FRAGILE_TAB:null,PERSIST_LOCAL_STATE:null,PROMOTE_TAB:null,RAISE_TAB:null}),j={Types:i,closeTab:function(k,l){g.dispatch({actionType:i.CLOSE_TAB,reason:l,threadID:k});},closeAllTabs:function(){g.dispatch({actionType:i.CLOSE_ALL_TABS});},closeFragileTabs:function(){g.dispatch({actionType:i.CLOSE_FRAGILE_TABS});},lowerTab:function(k){g.dispatch({actionType:i.LOWER_TAB,threadID:k});},openFragileTab:function(k){g.dispatch({actionType:i.OPEN_FRAGILE_TAB,threadID:k});},persistLocalState:function(){g.dispatch({actionType:i.PERSIST_LOCAL_STATE});},promoteTab:function(k){g.dispatch({actionType:i.PROMOTE_TAB,threadID:k});},raiseTab:function(k,l,m){g.dispatch({actionType:i.RAISE_TAB,signatureID:m,threadID:k,userAction:l});}};e.exports=j;},null);
__d("SplitImage.react",["React","Image.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g.createClass({displayName:"SplitImage",render:function(){var l=this.props.size;return (g.createElement("div",g.__spread({},this.props,{className:j(this.props.className,"_55lt"),style:Object.assign({},(this.props.style||{}),{width:l,height:l})}),this.renderImages()));},renderImages:function(){if(!this.props.srcs)return null;var l=this.props.srcs,m=Array.isArray(l);if(!m||l.length==1)return this.renderOne(m?l[0]:l);return l.length==2?this.renderTwo(l):this.renderThree(l);},renderOne:function(l){return (g.createElement(h,{src:l,width:this.props.size,height:this.props.size,alt:""}));},renderTwo:function(l){var m=this.props.size,n=Math.floor(m/2),o=-Math.floor(n/2),p=(("_55lu")+(this.props.border?' '+"_57xo":''));return (g.createElement("div",null,g.createElement("div",{className:"_55lu",style:{width:n}},g.createElement(h,{src:l[0],width:m,height:m,style:{marginLeft:o}})),g.createElement("div",{className:p,style:{width:n}},g.createElement(h,{src:l[1],width:m,height:m,style:{marginLeft:o}}))));},renderThree:function(l){var m=this.props.size,n=Math.floor(m/3*2),o=-Math.floor((m-n)/2),p=Math.floor(m/2),q=m-n,r=-Math.floor((p-q)/2),s=(("_55lu")+(this.props.border?' '+"_57pl":'')),t=(("_55lu")+(this.props.border?' '+"_57pm":''));return (g.createElement("div",null,g.createElement("div",{className:s,style:{width:n}},g.createElement(h,{src:l[0],width:m,height:m,style:{marginLeft:o}})),g.createElement("div",{className:t,style:{width:q,height:p}},g.createElement(h,{src:l[1],width:p,height:p,style:{marginLeft:r}})),g.createElement("div",{className:"_55lu",style:{width:q,height:p}},g.createElement(h,{src:l[2],width:p,height:p,style:{marginLeft:r}}))));}});e.exports=k;},null);
__d("loadImage",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';function g(h,i){var j=new Image();j.onload=function(){i(j.width,j.height,j);};j.src=h;}e.exports=g;},null);
__d("PhotoResizeMath",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={getScaledPhotoDimensions:function(h,i,j,k,l){var m=h/i,n=j/k;if(j&&k&&l==='stretch')return {width:j,height:k};if((!j&&k)||((l==='contain')!==(m>=n)))return {width:k*m,height:k};if(j)return {width:j,height:j/m};return {width:h,height:i};}};e.exports=g;},null);
__d("PixelzFocus",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={search:function(h,i){var j=0,k=h.length-1;while(j<=k){var l=j+Math.floor((k-j)/2),m=h[l];if(m>i){k=l-1;}else if(m<i){j=l+1;}else return l;}return Math.min(j,k);},forceSpecificPoint:function(h,i,j){var k=1e-09,l=g.search(h,i-j-k)+1,m=g.search(h,i+j);return h.slice(l,m+1);},findBiggestSets:function(h,i){var j=[],k=-1;for(var l=0;l<h.length;++l){var m=h[l],n=l,o=g.search(h,m+i),p=o-n;if(p>k)j=[];if(p>=k){k=p;j.push({low:n,high:o});}}return j;},getBestSet:function(h,i,j){var k=-1,l=null;for(var m=0;m<i.length;++m){var n=i[m],o=h[n.low],p=h[n.high],q=o+(p-o)/2,r=Math.min(o-(q-j),(q+j)-p);if(r>k){k=r;l=n;}}return l;},getFocusFromSet:function(h,i){var j=h[i.low],k=h[i.high];return j+(k-j)/2;},clampFocus:function(h,i){var j=i/2,k=1-(i/2);if(h<j)return j;if(h>k)return k;return h;},convertFromCenterToCSS:function(h,i){if(Math.abs(1-i)<1e-05)return 0;return (h-i/2)/(1-i);},convertFromCSSToCenter:function(h,i){return h*(1-i)+i/2;},getVisible:function(h,i){if(h<i)return h/i;return i/h;},getHidden:function(h,i){return 1-g.getVisible(h,i);},focusHorizontally:function(h,i){return h<i;},convertVectorFromCenterToCSS:function(h,i,j){var k=g.focusHorizontally(i,j),l;if(k){l=h.x/100;}else l=h.x/100;var m=g.convertFromCenterToCSS(l,g.getVisible(i,j));if(k){return {x:m,y:0};}else return {x:0,y:m};},getCropRect:function(h,i,j){var k=g.focusHorizontally(i,j),l=g.getVisible(i,j);if(k){var m=(1-l)*h.x;return {left:m,top:0,width:l,height:1};}else{var n=(1-l)*h.y;return {left:0,top:n,width:1,height:l};}}};e.exports=g;},null);
__d("Pixelz.react",["arrayContains","copyProperties","cx","loadImage","joinClasses","React","PhotoResizeMath","PixelzFocus"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=l,p=o.PropTypes,q=l.createClass({displayName:"Pixelz",propTypes:{width:p.number,height:p.number,resizeMode:p.oneOf(['contain','cover','stretch']),alt:p.string,letterbox:p.bool,borderRadius:p.number,insetBorderColor:p.string,animated:p.bool,upscale:p.bool,cropRect:function(r,s,t){var u=r[s],v='Invalid prop `'+s+'` supplied to `'+t+'`, expected a rectangle with values normalized '+'between 0 and 1.';if(u.left<0||u.top<0||u.width<0||u.height<0||u.left+u.width>1||u.top+u.height>1)return new Error(v);},focus:function(r,s,t){var u=r[s],v='Invalid prop `'+s+'` supplied to `'+t+'`, expected either a {x, y, type} vector where type '+'is `css` or `center` or an array of {x, y} vectors. All the vectors '+'have with values normalized between 0 and 1.';if(Array.isArray(u)){for(var w=0;w<u.length;++w)if(!(u[w].x>=0&&u[w].x<=1)||!(u[w].y>=0&&u[w].y<=1))return new Error(v);}else{if(!u.type)u.type='css';if(!(u.x>=0&&u.x<=1)||!(u.y>=0&&u.y<=1)||!g(['center','css'],u.type))return new Error(v);}}},getDefaultProps:function(){return {resizeMode:'cover',alt:'',letterbox:true,upscale:true,cropRect:{width:1,height:1,top:0,left:0},focus:{x:.5,y:.5,type:'css'}};},getInitialState:function(){return {srcDimensions:{}};},getSrcDimensions:function(){var r=this.props.src,s=this.state.srcDimensions[r];if(s)return s;j(r,function(t,u){var v={};v[r]={width:t,height:u};this.isMounted()&&this.setState({srcDimensions:v});}.bind(this));return null;},getCropSrcDimensions:function(){var r=this.getSrcDimensions();return {width:r.width*this.props.cropRect.width,height:r.height*this.props.cropRect.height};},getUpscaleCropDimensions:function(){var r=this.getCropSrcDimensions();return m.getScaledPhotoDimensions(r.width,r.height,this.props.width,this.props.height,this.props.resizeMode);},getCropDimensions:function(){var r=this.getUpscaleCropDimensions(),s=this.getCropSrcDimensions();if(!this.props.upscale)return {width:Math.min(r.width,s.width),height:Math.min(r.height,s.height)};return r;},getCropAspectRatio:function(){var r=this.getCropDimensions();return r.width/r.height;},getContainerDimensions:function(){if(this.props.letterbox&&this.props.width&&this.props.height)return {width:this.props.width,height:this.props.height};return this.getCropDimensions();},getContainerAspectRatio:function(){var r=this.getContainerDimensions();return r.width/r.height;},getContainerPosition:function(){return {left:0,top:0};},getFocus:function(){var r=this.props.focus;if(!Array.isArray(r)&&r.type==='css')return {x:r.x,y:r.y};var s=this.getContainerAspectRatio(),t=this.getCropAspectRatio(),u=n.getVisible(s,t),v=n.focusHorizontally(s,t),w;if(!Array.isArray(r)){w=n.convertFromCenterToCSS(v?r.x:r.y,u);}else{var x=r.map(function(aa){return v?aa.x:aa.y;});x.sort();var y=n.findBiggestSets(x,u),z=n.getBestSet(x,y,u);w=n.getFocusFromSet(x,z);}return {x:v?w:.5,y:v?.5:w};},getCropPosition:function(){var r=this.getCropDimensions(),s=this.getContainerDimensions(),t=this.getFocus();return {left:t.x*(s.width-r.width),top:t.y*(s.height-r.height)};},getScaleDimensions:function(){var r=this.getCropDimensions();return {width:r.width/this.props.cropRect.width,height:r.height/this.props.cropRect.height};},getScalePosition:function(){var r=this.getScaleDimensions();return {left:-r.width*this.props.cropRect.left,top:-r.height*this.props.cropRect.top};},getClipCropRectangle:function(){var r=this.getContainerDimensions(),s=this.getCropDimensions(),t=this.getContainerPosition(),u=this.getCropPosition(),v=Math.max(t.left,u.left),w=Math.max(t.top,u.top),x=Math.min(t.top+r.height,u.top+s.height),y=Math.min(t.left+r.width,u.left+s.width);return {left:v,top:w,width:y-v,height:x-w};},getClipCropPosition:function(){var r=this.getClipCropRectangle();return {left:r.left,top:r.top};},getClipCropDimensions:function(){var r=this.getClipCropRectangle();return {width:r.width,height:r.height};},getClipScalePosition:function(){var r=this.getScalePosition(),s=this.getClipCropPosition(),t=this.getCropPosition();return {left:r.left+(t.left-s.left),top:r.top+(t.top-s.top)};},getClipScaleDimensions:function(){return this.getScaleDimensions();},areDimensionsEqual:function(r,s){return r.width===s.width&&r.height===s.height;},shouldAddAllNodesAndStyles:function(){return this.props.animated;},hasCrop:function(){if(this.shouldAddAllNodesAndStyles())return true;var r=this.getContainerDimensions(),s=this.getClipCropDimensions(),t=this.getClipScaleDimensions();if(this.areDimensionsEqual(r,s)||this.areDimensionsEqual(s,t))return false;return true;},hasContainer:function(){if(this.shouldAddAllNodesAndStyles()||this.hasInsetBorder())return true;var r=this.getContainerDimensions(),s=this.getClipScaleDimensions();if(this.areDimensionsEqual(r,s))return false;return true;},hasInsetBorder:function(){return this.shouldAddAllNodesAndStyles()||this.props.insetBorderColor;},applyPositionStyle:function(r,s){if(this.shouldAddAllNodesAndStyles()||s.left)r.left=Math.round(s.left);if(this.shouldAddAllNodesAndStyles()||s.top)r.top=Math.round(s.top);},applyDimensionsStyle:function(r,s){r.width=Math.round(s.width);r.height=Math.round(s.height);},applyBorderRadiusStyle:function(r){if(this.shouldAddAllNodesAndStyles()||this.props.borderRadius)r.borderRadius=this.props.borderRadius||0;},getScaleStyle:function(){var r={},s=this.getClipCropDimensions(),t=this.getClipScaleDimensions();if(this.shouldAddAllNodesAndStyles()||!this.areDimensionsEqual(s,t)){this.applyPositionStyle(r,this.getClipScalePosition());}else this.applyPositionStyle(r,this.getClipCropPosition());this.applyDimensionsStyle(r,this.getClipScaleDimensions());this.applyBorderRadiusStyle(r);return r;},getCropStyle:function(){var r={};this.applyPositionStyle(r,this.getClipCropPosition());this.applyDimensionsStyle(r,this.getClipCropDimensions());this.applyBorderRadiusStyle(r);return r;},getInsetBorderStyle:function(){var r={borderColor:this.props.insetBorderColor||'transparent'};this.applyPositionStyle(r,this.getClipCropPosition());this.applyDimensionsStyle(r,this.getClipCropDimensions());this.applyBorderRadiusStyle(r);return r;},getContainerStyle:function(){var r={};this.applyDimensionsStyle(r,this.getContainerDimensions());this.applyBorderRadiusStyle(r);return r;},getScale:function(){var r=this.getScaleStyle(),s=r.width,t=r.height;r=h({},r);delete r.width;delete r.height;return (l.createElement("img",l.__spread({},this.props,{alt:this.props.alt,className:k(this.props.className,(("_56wb")+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":''))),src:this.props.src,style:Object.assign({},(this.props.style||{}),r),width:s,height:t})));},getCrop:function(){var r=this.getScale();if(!this.hasCrop())return r;return (l.createElement("div",{className:(("_56ma")+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),style:this.getCropStyle()},r));},getInsetBorder:function(){if(!this.hasInsetBorder())return null;return (l.createElement("div",{className:(("_56lv")+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),style:this.getInsetBorderStyle()}));},getContainer:function(){var r=this.getCrop();if(!this.hasContainer())return r;var s=this.getInsetBorder();return (l.createElement("div",{className:(("_56jj")+(this.shouldAddAllNodesAndStyles()?' '+"_56t5":'')),style:this.getContainerStyle()},r,s));},render:function(){var r=this.getSrcDimensions();if(!r)return l.createElement("span",null);return this.getContainer();}});e.exports=q;},null);
__d("Tooltip.react",["React","TooltipMixin"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g,j=i.PropTypes,k=g.createClass({displayName:"Tooltip",propTypes:{display:j.oneOf(['inline','block'])},getDefaultProps:function(){return {display:'inline'};},mixins:[h],render:function(){if(this.props.display==='block')return (g.createElement("div",g.__spread({},this.props),this.props.children));return g.createElement("span",g.__spread({},this.props),this.props.children);}});e.exports=k;},null);
__d("AbstractBadge.react",["React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes;function m(o){return parseInt(o,10)===o;}var n=g.createClass({displayName:"AbstractBadge",propTypes:{count:l.number.isRequired,maxcount:l.number},getDefaultProps:function(){return {maxcount:20};},render:function(){var o=this.props.count,p=this.props.maxcount;i(m(o));i(m(p));var q=(("_51lp")+(o>p?' '+"_51lr":'')+(o===0?' '+"hidden_elem":''));return (g.createElement("span",g.__spread({},this.props,{className:j(this.props.className,q)}),o>p?p+'+':o));}});e.exports=n;},null);
__d("XUIBadge.react",["React","AbstractBadge.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=g,l=k.PropTypes,m=g.createClass({displayName:"XUIBadge",propTypes:{type:l.oneOf(['regular','special'])},getDefaultProps:function(){return {type:'regular'};},render:function(){var n=this.props.type,o=(("_5ugh")+(n==='regular'?' '+"_5ugf":'')+(n==='special'?' '+"_5ugg":''));return (g.createElement(h,g.__spread({},this.props,{className:j(this.props.className,o),type:null})));}});e.exports=m;},null);
__d("PureStoreBasedStateMixin",["StoreBasedStateMixinHelper","invariant","setImmediate"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=function(){for(var k=[],l=0,m=arguments.length;l<m;l++)k.push(arguments[l]);return {getInitialState:function(){return this.constructor.calculateState();},componentWillMount:function(){h(this.constructor.calculateState);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this.constructor.calculateState());this._recalculateStateID=null;}.bind(this);this._mixin=new g(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=i(n);}.bind(this));},componentWillUnmount:function(){this._mixin.release();this._mixin=null;}};}.bind(this);e.exports=j;},null);
__d("formatDate",["DateStrings","DateFormatConfig","fbt","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(o,p,q){q=q||{};if(!p||!o)return '';if(typeof o==='string')o=parseInt(o,10);if(typeof o==='number')o=new Date(o*1000);j(o instanceof Date);j(!isNaN(o.getTime()));j(o.getTime()<1e+15);if(typeof p!=='string'){var r=m();for(var s in r){var t=r[s];if(t.start<=o.getTime()&&p[t.name]){p=p[t.name];break;}}}var u;if(q.skipPatternLocalization||(!q.formatInternal&&n())||p.length===1){u=p;}else{j(h.formats[p]);u=h.formats[p];}var v=q.utc?'getUTC':'get',w=o[v+'Date'](),x=o[v+'Day'](),y=o[v+'Month'](),z=o[v+'FullYear'](),aa=o[v+'Hours'](),ba=o[v+'Minutes'](),ca=o[v+'Seconds'](),da=o[v+'Milliseconds'](),ea='';for(var fa=0;fa<u.length;fa++){var ga=u.charAt(fa);switch(ga){case '\\':fa++;ea+=u.charAt(fa);break;case 'd':ea+=l(w,2);break;case 'j':ea+=w;break;case 'S':ea+=g.getOrdinalSuffix(w);break;case 'D':ea+=g.getWeekdayNameShort(x);break;case 'l':ea+=g.getWeekdayName(x);break;case 'F':case 'f':ea+=g.getMonthName(y+1);break;case 'M':ea+=g.getMonthNameShort(y+1);break;case 'm':ea+=l(y+1,2);break;case 'n':ea+=y+1;break;case 'Y':ea+=z;break;case 'y':ea+=(''+z).slice(2);break;case 'a':if(aa<12){ea+=i._("am");}else ea+=i._("pm");break;case 'A':if(aa<12){ea+=i._("AM");}else ea+=i._("PM");break;case 'g':ea+=(aa===0||aa===12)?12:aa%12;break;case 'G':ea+=aa;break;case 'h':if(aa===0||aa===12){ea+=12;}else ea+=l(aa%12,2);break;case 'H':ea+=l(aa,2);break;case 'i':ea+=l(ba,2);break;case 's':ea+=l(ca,2);break;case 'X':ea+=l(da,3);break;default:ea+=ga;}}return ea;}function l(o,p){return Array(p-(''+o).length+1).join('0')+o;}function m(){var o=new Date(),p=o.getTime(),q=o.getFullYear(),r=o.getDate()-((o.getDay()-h.weekStart+6)%7),s=new Date(q,o.getMonth()+1,0).getDate(),t=new Date(q,1,29).getMonth()===1?366:365,u=1000*60*60*24;return [{name:'today',start:o.setHours(0,0,0,0)},{name:'withinDay',start:p-u},{name:'thisWeek',start:new Date(o.getTime()).setDate(r)},{name:'withinWeek',start:p-u*7},{name:'thisMonth',start:o.setDate(1)},{name:'withinMonth',start:p-u*s},{name:'thisYear',start:o.setMonth(0)},{name:'withinYear',start:p-u*t},{name:'older',start:-Infinity}];}k.periodNames=['today','thisWeek','thisMonth','thisYear','withinDay','withinWeek','withinMonth','withinYear','older'];function n(){if(typeof window==='undefined'||!window||!window.location||!window.location.pathname)return false;var o=window.location.pathname,p='/intern';return o.substr(0,p.length)===p;}e.exports=k;},null);
__d("FluxStore",["EventEmitter","invariant"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i='change';function j(k){var l=this.constructor;this.__className=l.name;this.__changed=false;this.__dispatcher=k;this.__changeEvent=this.$FluxStore0();this.__emitter=new g();this.$FluxStore1=k.register(function(m){this.__invokeOnDispatch(m);}.bind(this));}j.prototype.addListener=function(k){return this.__emitter.addListener(this.__changeEvent,k);};j.prototype.getDispatcher=function(){return this.__dispatcher;};j.prototype.getDispatchToken=function(){return this.$FluxStore1;};j.prototype.hasChanged=function(){h(this.__dispatcher.isDispatching());return this.__changed;};j.prototype.__emitChange=function(){h(this.__dispatcher.isDispatching());this.__changed=true;};j.prototype.__invokeOnDispatch=function(k){this.__changed=false;this.__onDispatch(k);if(this.__changed)this.__emitter.emit(this.__changeEvent);};j.prototype.__onDispatch=function(k){h(false);};j.prototype.$FluxStore0=function(){return i;};e.exports=j;},null);
__d("keyMirrorRecursive",["invariant"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(k,l){return i(k,l);}function i(k,l){var m={},n;g(j(k));for(n in k){if(!k.hasOwnProperty(n))continue;var o=k[n],p=l?l+'.'+n:n;if(j(o)){o=i(o,p);}else o=p;m[n]=o;}return m;}function j(k){return k instanceof Object&&!Array.isArray(k);}e.exports=h;},null);
__d("mergeDeepInto",["invariant","mergeHelpers"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=h.ArrayStrategies,j=h.checkArrayStrategy,k=h.checkMergeArrayArgs,l=h.checkMergeLevel,m=h.checkMergeObjectArgs,n=h.isTerminal,o=h.normalizeMergeArg,p=function(t,u,v,w){m(t,u);l(w);var x=u?Object.keys(u):[];for(var y=0;y<x.length;y++){var z=x[y];r(t,u,z,v,w);}},q=function(t,u,v,w){k(t,u);l(w);var x=Math.max(t.length,u.length);for(var y=0;y<x;y++)r(t,u,y,v,w);},r=function(t,u,v,w,x){var y=u[v],z=u.hasOwnProperty(v),aa=z&&n(y),ba=z&&Array.isArray(y),ca=z&&!ba&&!ba,da=t[v],ea=t.hasOwnProperty(v),fa=ea&&n(da),ga=ea&&Array.isArray(da),ha=ea&&!ga&&!ga;if(fa){if(aa){t[v]=y;}else if(ba){t[v]=[];q(t[v],y,w,x+1);}else if(ca){t[v]={};p(t[v],y,w,x+1);}else if(!z)t[v]=da;}else if(ga){if(aa){t[v]=y;}else if(ba){g(i[w]);if(w===i.Clobber)da.length=0;q(da,y,w,x+1);}else if(ca){t[v]={};p(t[v],y,w,x+1);}else !z;}else if(ha){if(aa){t[v]=y;}else if(ba){t[v]=[];q(t[v],y,w,x+1);}else if(ca){p(da,y,w,x+1);}else !z;}else if(!ea)if(aa){t[v]=y;}else if(ba){t[v]=[];q(t[v],y,w,x+1);}else if(ca){t[v]={};p(t[v],y,w,x+1);}else !z;},s=function(t,u,v){var w=o(u);j(v);p(t,w,v,0);};e.exports=s;},null);
__d("MercuryLocalIDs",["PresenceUtil","randomInt"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={generateMessageID:function(k){var l=k||Date.now(),m=h(0,4294967295),n=g.getSessionID();return ("<"+l+":"+m+"-"+n+"@mail.projektitan.com>");},generateThreadID:function(k){return 'root:'+i.generateMessageID(k);},generateOfflineThreadingID:function(k){var l=k||Date.now(),m=h(0,4294967295),n=('0000000000000000000000'+m.toString(2)).slice(-22),o=l.toString(2)+n;return j(o);}};function j(k){var l='';while(k!='0'){var m=0,n='';for(var o=0;o<k.length;o++){m=2*m+parseInt(k[o],10);if(m>=10){n+='1';m-=10;}else n+='0';}l=m.toString()+l;k=n.slice(n.indexOf('1'));}return l;}e.exports=i;},null);
__d("MercuryMessageObject",["MercuryActionStatus","MercuryActionType","MercuryIDs","MercuryLocalIDs","MercuryMessageClientState","MercuryMessageSourceTags","MercurySingletonMixin","MercurySourceType","MercuryTimePassed","MercurySendMessageFields","fbt","formatDate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();function s(v){"use strict";this.$MercuryMessageObject0=v;}s.prototype.constructUserGeneratedMessageObject=function(v,w,x,y,z){"use strict";var aa=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,w,x);if(typeof v=='string')v=v.replace(/^\s+/,'').replace(/\s+$/,'');aa.body=v;aa.has_attachment=false;aa.html_body=false;aa.attachments=[];aa.specific_to_list=y||[];aa.creator_info=z;return aa;};s.prototype.constructStickerMessageObject=function(v,w,x){"use strict";var y=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,w,x);y.has_attachment=true;y.html_body=false;y.attachments=[];y.sticker_id=v;y.specific_to_list=[];return y;};s.prototype.constructAttachmentMessageObject=function(v,w){"use strict";var x=t(this.$MercuryMessageObject0,h.USER_GENERATED_MESSAGE,v,w);x.attachments=[];x.specific_to_list=[];return x;};s.prototype.constructLogMessageObject=function(v,w,x,y){"use strict";var z=t(this.$MercuryMessageObject0,h.LOG_MESSAGE,v,w);z.log_message_type=x;z.log_message_data=y;return z;};s.prototype.normalizeNewMessage=function(v){"use strict";if(v.status===undefined)v.status=g.UNSENT;v.timestamp_absolute=q._("Today");v.message_id=v.message_id||j.generateMessageID(v.timestamp);var w=i.getParticipantIDFromUserID(this.$MercuryMessageObject0);v.specific_to_list=v.specific_to_list||[];if(v.specific_to_list.length&&v.specific_to_list.indexOf(w)===-1)v.specific_to_list.push(w);if(!v.thread_id){if(v.specific_to_list.length==1){v.thread_id='user:'+this.$MercuryMessageObject0;}else if(v.specific_to_list.length==2){var x=v.specific_to_list[0]==w?v.specific_to_list[1]:v.specific_to_list[0];v.thread_id=i.getThreadIDFromParticipantID(x);}v.thread_id=v.thread_id||'root:'+v.message_id;}if(!v.specific_to_list.length){var y=i.tokenize(v.thread_id),z=y.type,aa=y.value;if(z=='user')v.specific_to_list=['fbid:'+aa,w];}if(!v[p.MANUAL_RETRY_CNT])v[p.MANUAL_RETRY_CNT]=0;};s.prototype.normalizeResendMessage=function(v){"use strict";v.status=g.RESENDING;v.timestamp=Date.now();v[p.MANUAL_RETRY_CNT]+=1;};s.prototype.normalizeAddAttachmentPlaceholder=function(v,w,x){"use strict";if(x.preview_attachments.length>0){v.has_attachment=true;v.preview_attachments=x.preview_attachments;}v.client_state=k.DO_NOT_SEND_TO_SERVER;v.status=g.RESENDING;v.upload_id=w;};function t(v,w,x,y){var z=u(x)?[l.CHAT]:[],aa=Date.now(),ba=r(new Date(aa),'g:ia'),ca={action_type:w,thread_id:y,author:i.getParticipantIDFromUserID(v),author_email:null,timestamp:aa,timestamp_absolute:(new Date(aa)).toLocaleDateString(),timestamp_relative:ba,timestamp_time_passed:o.TODAY,is_unread:false,is_forward:false,is_filtered_content:false,is_spoof_warning:false,source:x,source_tags:z};return ca;}function u(v){switch(v){case n.CHAT_WEB:case n.CHAT_JABBER:case n.CHAT_IPHONE:case n.CHAT_MEEBO:case n.CHAT_ORCA:case n.CHAT_TEST:case n.CHAT:case n.DESKTOP:return true;default:return false;}}Object.assign(s,m);e.exports=s;},null);
__d("MercuryMessageActions",["MercuryActionType","MercuryMessageObject","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';function l(m){this.$MercuryMessageActions0=m;this.$MercuryMessageActions1=h.getForFBID(this.$MercuryMessageActions0);this.$MercuryMessageActions2=j.getForFBID(this.$MercuryMessageActions0);}l.prototype.send=function(m,n,o){n=n||Function.prototype;this.$MercuryMessageActions1.normalizeNewMessage(m);this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3(Object.assign({},m),i.CLIENT_SEND_MESSAGE));this.$MercuryMessageActions2.sendNewMessage(m,o);n(m.thread_id);};l.prototype.resend=function(m,n){var o=Object.assign({},m);this.$MercuryMessageActions1.normalizeResendMessage(o);this.send(o,(void 0),n);};l.prototype.addAttachmentPlaceholder=function(m,n,o){this.$MercuryMessageActions1.normalizeAddAttachmentPlaceholder(m,n,o);this.$MercuryMessageActions1.normalizeNewMessage(m);this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3(Object.assign({},m),i.CLIENT_SEND_MESSAGE));};l.prototype.cancelAttachmentPlaceholder=function(m,n){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3({upload_id:m,upload_data:n,action_type:g.CANCEL_ATTACHMENT_PLACEHOLDER},i.CLIENT_SEND_MESSAGE));};l.prototype.confirmAttachmentPlaceholder=function(m,n){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions3({upload_id:m,upload_data:n,action_type:g.CONFIRM_ATTACHMENT_PLACEHOLDER},i.CLIENT_SEND_MESSAGE));};l.prototype.markSpam=function(m,n){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions4(m,n,g.MARK_MESSAGES_SPAM,i.CLIENT_MARK_MESSAGES_SPAM));};l.prototype["delete"]=function(m,n,o){this.$MercuryMessageActions2.handleUpdate(this.$MercuryMessageActions4(m,n,g.DELETE_MESSAGES,o||i.CLIENT_DELETE_MESSAGES));};l.prototype.$MercuryMessageActions3=function(m,n){return {actions:[m],from_client:true,payload_source:n};};l.prototype.$MercuryMessageActions5=function(m,n){return {actions:[m],from_client:false,payload_source:n};};l.prototype.$MercuryMessageActions4=function(m,n,o,p){return {actions:[{action_type:o,action_id:null,thread_id:m,message_ids:n}],from_client:true,payload_source:p};};Object.assign(l,k);e.exports=l;},null);
__d("MercuryThreadActions",["AsyncRequest","MercuryActionType","MercuryIDs","MercuryMessengerBlockingUtils","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin","MessagingTag","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';function p(q){this.$MercuryThreadActions0=q;this.__serverRequests=l.getForFBID(this.$MercuryThreadActions0);}p.prototype.markRead=function(q,r){this.batchMarkRead([q],r);};p.prototype.batchMarkRead=function(q,r){this.__serverRequests.handleUpdate(this.$MercuryThreadActions1(q,true,r));};p.prototype.markUnread=function(q,r){this.batchMarkUnread([q],r);};p.prototype.batchMarkUnread=function(q,r){this.__serverRequests.handleUpdate(this.$MercuryThreadActions1(q,false,r));};p.prototype.markSeen=function(q,r){this.__serverRequests.handleUpdate(this.__constructClientPayload([q],h.MARK_THREAD_SEEN,k.CLIENT_MARK_THREAD_SEEN,{persistent:r}));};p.prototype.archive=function(q,r){this.batchArchive([q],r);};p.prototype.batchArchive=function(q,r){q.forEach(function(s){this.__serverRequests.changeThreadArchivedStatus(s,true,r);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions2(q,true));};p.prototype.unarchive=function(q,r){this.batchUnarchive([q],r);};p.prototype.batchUnarchive=function(q,r){q.forEach(function(s){this.__serverRequests.changeThreadArchivedStatus(s,false,r);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions2(q,false));};p.prototype.markSpam=function(q,r){this.batchMarkSpam([q],r);};p.prototype.batchMarkSpam=function(q,r){q.forEach(function(s){this.__serverRequests.markThreadSpam(s,r);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions3(q,n.SPAM));};p.prototype.unmarkSpam=function(q,r){this.batchUnmarkSpam([q],r);};p.prototype.batchUnmarkSpam=function(q,r){q.forEach(function(s){this.__serverRequests.unmarkThreadSpam(s,r);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions3(q,n.INBOX));};p.prototype.changeFolder=function(q,r){this.batchChangeFolder([q],r);};p.prototype.batchChangeFolder=function(q,r){q.forEach(function(s){this.__serverRequests.changeThreadFolder(s,r);}.bind(this));this.__serverRequests.handleUpdate(this.$MercuryThreadActions3(q,r));};p.prototype["delete"]=function(q,r){this.batchDelete([q],r);};p.prototype.batchDelete=function(q,r){q.forEach(function(s){this.__serverRequests.deleteThread(s,r);}.bind(this));this.__serverRequests.handleUpdate(this.__constructClientPayload(q,h.DELETE_THREAD,k.CLIENT_DELETE_THREAD));};p.prototype.unmute=function(q){this.updateMuteSetting(q,0);};p.prototype.updateMuteSetting=function(q,r){this.__serverRequests.changeMutingOnThread(q,r);this.__serverRequests.handleUpdate(this.__constructClientPayload([q],h.CHANGE_MUTE_SETTINGS,k.CLIENT_CHANGE_MUTE_SETTINGS,{mute_settings:r}));};p.prototype.unblockMessages=function(q){var r=JSON.stringify({reportable_ent_token:i.getUserIDFromThreadID(q),initial_action_name:j.block_messages});new g(new o('/ajax/nfx/messenger_undo_block').addQueryData({story_location:'messenger',context:r})).send();};p.prototype.addParticipants=function(q,r){this.__serverRequests.handleUpdate(this.__constructClientPayload([q],h.ADD_PARTICIPANTS,k.CLIENT_ADD_PARTICIPANTS,{participants:r}));};p.prototype.unpinThread=function(q){this.__serverRequests.unpinThread(q);this.__serverRequests.handleUpdate(this.__constructClientPayload([q],h.UNPIN_THREAD,k.CLIENT_UNPIN_THREAD));};p.prototype.movePendingToInbox=function(q){this.__serverRequests.handleUpdate(this.__constructClientPayload([q],h.MOVE_PENDING_TO_INBOX,k.CLIENT_MOVE_PENDING_TO_INBOX));};p.prototype.$MercuryThreadActions1=function(q,r,s){return this.__constructClientPayload(q,h.CHANGE_READ_STATUS,k.CLIENT_CHANGE_READ_STATUS,{mark_as_read:r,source:s});};p.prototype.$MercuryThreadActions2=function(q,r){return this.__constructClientPayload(q,h.CHANGE_ARCHIVED_STATUS,k.CLIENT_CHANGE_ARCHIVED_STATUS,{archived:r});};p.prototype.$MercuryThreadActions3=function(q,r){return this.__constructClientPayload(q,h.CHANGE_FOLDER,k.CLIENT_CHANGE_FOLDER,{new_folder:r});};p.prototype.__constructClientPayload=function(q,r,s,t){return {actions:q.map(function(u){return Object.assign({action_type:r,action_id:null,thread_id:u},t);}),from_client:true,payload_source:s};};Object.assign(p,m);e.exports=p;},null);
__d("MercuryAttachmentSnippetType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=g({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,ORION:null,SHARE:null,ERROR:null,MIXED:null});e.exports=h;},null);
__d("ChatActivity",["Event","Arbiter","AvailableList","AvailableListConstants","JSLogger","MercuryConfig","PresenceState","UserActivity"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=l.activity_limit||60000,p=l.idle_limit||1800000,q=l.idle_poll_interval||300000,r=k.create('chat_activity'),s=Date.now(),t=s,u=true;function v(){var z=Date.now();return !!(u&&(z-s<o));}var w=Object.assign(new h(),{isActive:v});function x(){var z=s;s=Date.now();if(s-z>p){r.debug('idle_to_active',z);m.doSync();}w.inform('activity');}i.subscribe(j.ON_AVAILABILITY_CHANGED,function(){if(!i.isUserIdle())t=Date.now();});g.listen(window,'focus',function(){u=true;x();});g.listen(window,'blur',function(){u=false;});n.subscribe(function(){x();});function y(z){var aa=z&&z.at&&m.verifyNumber(z.at);if(typeof aa!=='number')aa=null;return aa||0;}setInterval(function(){var z=Date.now(),aa=y(m.get()),ba=Math.max(s,aa,t);if(z-ba>p){r.debug('idle',{cookie:aa,local:s,presence:t});w.inform('idle',z-ba);}},q);m.registerStateStorer(function(z){var aa=y(z);if(aa<s)z.at=s;return z;});h.subscribe(k.DUMP_EVENT,function(z,aa){aa.chat_activity={activity_limit:o,idle_limit:p,idle_poll_interval:q,last_active_time:s,last_global_active_time:t};});e.exports=w;},null);
__d("MercuryMessages",["BanzaiODS","EventEmitter","ImmutableObject","LogHistory","Map","MercuryActionStatus","MercuryActionType","MercuryAssert","MercuryDispatcher","MercuryLogMessageType","MercuryMessageClientState","MercuryPayloadSource","MercurySingletonMixin","MercuryMessageActions","MercuryMessageIDs","RangedCallbackManager","MercurySendMessageFields","MercuryServerRequests","MercuryThreadActions","MercuryThreadInformer","MercuryThreads","URI","invariant","isMessengerDotComURI","mergeDeep"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){b.__markCompiled&&b.__markCompiled();'use strict';var fa=new h(),ga=j.getInstance('mercury_messages');function ha(qa,ra){var sa=ra;if(qa._localIdsMap[ra])sa=qa._localIdsMap[ra];return qa._messages.get(sa);}function ia(qa){switch(qa){case r.UNKNOWN:case r.SERVER_INITIAL_DATA:case r.SERVER_FETCH_THREAD_INFO:case r.SERVER_THREAD_SYNC:return true;}return false;}function ja(qa,ra){if(!qa._threadsToMessages[ra])qa._threadsToMessages[ra]=new v(function(sa){return ha(qa,sa).timestamp;},function(sa,ta){return ta-sa;});return qa._threadsToMessages[ra];}function ka(qa,ra,sa){ra.forEach(function(ta){var ua=ja(qa,ta);ua.setReachedEndOfArray();qa._emitReorderedChange(ta,sa);});}function la(qa){this._fbid=qa;this._messageActions=t.getForFBID(this._fbid);this._serverRequests=x.getForFBID(this._fbid);this._threadInformer=z.getForFBID(this._fbid);this._threads=aa.getForFBID(this._fbid);this._threadActions=y.getForFBID(this._fbid);this._dispatcher=o.getForFBID(this._fbid);this._didChange=false;this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new k();this._localIdsMap={};this._dispatcher.subscribe('update-messages',function(ra,sa){var ta=(sa.actions||[]).filter(function(va){var wa=va.action_type,xa=((va.is_forward||va.thread_id)&&(wa==m.LOG_MESSAGE||wa==m.USER_GENERATED_MESSAGE||wa==m.SEND_MESSAGE||wa==m.DELETE_THREAD||wa==m.DELETE_MESSAGES||wa==m.MARK_MESSAGES_SPAM)),ya=((va.upload_id&&va.upload_data)&&(wa==m.CANCEL_ATTACHMENT_PLACEHOLDER||wa==m.CONFIRM_ATTACHMENT_PLACEHOLDER));return xa||ya;}),ua=ia(sa.payload_source);this.handleUpdates(ta,ua,sa.payload_source,sa.from_client);if(sa.end_of_history)ka(this,sa.end_of_history,sa.payload_source);if(this._didChange){this._didChange=false;fa.emit('change');}}.bind(this));ga.debug('constructed',{fbid:this._fbid});}Object.assign(la.prototype,{getMessagesFromIDs:function(qa){return (qa||[]).map(ha.bind(null,this)).filter(function(ra){return ra;});},hasLoadedNMessages:function(qa,ra){var sa=ja(this,qa);return sa.hasReachedEndOfArray()||sa.getCurrentArraySize()>=ra;},hasLoadedExactlyNMessages:function(qa,ra){var sa=ja(this,qa);return sa.getCurrentArraySize()==ra;},clearMercuryInternalState_DO_NOT_USE:function(){this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new k();this._localIdsMap={};},getThreadMessagesRange:function(qa,ra,sa,ta,ua,va){var wa=ja(this,qa),xa=function(hb){ta(ma(this,hb));}.bind(this),ya=wa.executeOrEnqueue(ra,sa,xa),za=wa.getUnavailableResources(ya),ab=this._failedHistoryFetchThreads[qa];if(za.length&&!ab){var bb=wa.getCurrentArraySize(),cb=this._localTitanMessagesCount[qa]||0,db=bb-cb,eb=za.length+cb,fb=this.getCurrentlyLoadedMessages(qa),gb=fb.length?fb[0].timestamp:0;ga.debug('fetch_missing_messages',{threadID:qa,offset:ra,limit:sa,timestamp:gb,missingIndices:za,messageCount:bb,localMessageCount:cb});this._serverRequests.fetchThreadMessages(qa,db,eb,gb,ua,va);}else this._failedHistoryFetchThreads[qa]=false;return ya;},getThreadMessagesRangeNow:function(qa,ra,sa){var ta=ja(this,qa),ua=[];for(var va=ra;va<ra+sa;va++){var wa=ta.getResourceAtIndex(va),xa=ha(this,wa);xa&&ua.push(xa);}return ua;},getThreadMessagesSinceTimestamp:function(qa,ra){var sa=ja(this,qa),ta=sa.getElementsUntil(ra);return ma(this,ta);},hasLoadedAllMessages:function(qa){return ja(this,qa).hasReachedEndOfArray();},getCurrentlyLoadedMessages:function(qa){var ra=ja(this,qa).getAllResources();return ma(this,ra);},unsubscribe:function(qa,ra){n.isThreadID(ra);var sa=ja(this,ra);sa.unsubscribe(qa);},_addNewMessage:function(qa,ra){pa(ra);this._messages.set(qa,new i(ra));},_updateMessage:function(qa,ra,sa){var ta=i.set(ra,sa);this._messages.set(qa,ta);return ta;},_shouldSortOutOfOrderMessages:function(qa,ra,sa){if(qa==r.CLIENT_CHANNEL_MESSAGE){var ta=this.getThreadMessagesSinceTimestamp(ra,sa);if(ta.length>0){g.bumpEntityKey('chat.web','channel.messages_reordered');return true;}}return false;},_preprocessIncomingAction:function(qa,ra){var sa=qa.action_type;if(ra==r.CLIENT_CHANNEL_MESSAGE&&sa==m.USER_GENERATED_MESSAGE&&qa.threading_id&&this._localIdsMap[qa.threading_id]===qa.threading_id){qa.client_message_id=qa.threading_id;qa.status=l.SUCCESS;qa.action_type=m.SEND_MESSAGE;sa=qa.action_type;}if(ra===r.CLIENT_CHANNEL_MESSAGE&&sa==m.USER_GENERATED_MESSAGE){var ta=this._threads.getThreadMetaNow(qa.thread_id);if(ta&&ta.folder)qa.folder=ta.folder;}return qa;},handleUpdates:function(qa,ra,sa,ta){var ua,va={},wa={};for(var xa=0;xa<qa.length;xa++){var ya=this._preprocessIncomingAction(qa[xa],sa),za=ya.action_type,ab=ha(this,ya.message_id);if(ya.is_forward||sa==r.SERVER_SEARCH){if(!this._messages.has(ya.message_id))this._addNewMessage(ya.message_id,ya);continue;}else if(ya.client_state===q.SEND_TO_SERVER){this._addNewMessage(ya.message_id,ya);continue;}else if(za==m.SEND_MESSAGE){var bb=ya.client_message_id;if(bb&&this._localIdsMap[bb]&&ya.status){var cb=ha(this,bb),db=cb.status;if(cb.status==l.SUCCESS)continue;if(ya.status==l.UNCONFIRMED){if(!wa[ya.thread_id])wa[ya.thread_id]=[];wa[ya.thread_id].push(bb);}else if(!va[ya.thread_id])va[ya.thread_id]=[];this._updateLocalMessage(ya);if(typeof db!==(void 0)||ya.status==l.FAILED_UNKNOWN_REASON||ya.status==l.UNABLE_TO_CONFIRM||ya.status==l.SUCCESS||ya.status==l.ERROR)this._emitUpdatedChange(ya.thread_id,ha(this,bb).message_id,sa);}continue;}else if(za==m.DELETE_THREAD){ja(this,ya.thread_id).removeAllResources();continue;}else if(za==m.DELETE_MESSAGES){this._deleteMessages(ya.thread_id,ya.message_ids,sa);continue;}else if(za===m.MARK_MESSAGES_SPAM){this._markMessagesSpam(ya,sa);continue;}else if((ya.threading_id&&this._localIdsMap[ya.threading_id])||(ab&&!ab.is_forward)){if(ab&&ya.ranges&&ya.ranges.length>0){var eb=ab.message_id;this._updateMessage(this._localIdsMap[eb]||eb,ab,{ranges:qa.ranges});this._emitUpdatedChange(ab.thread_id,ab.message_id,'link_shim');}continue;}else if(za===m.CONFIRM_ATTACHMENT_PLACEHOLDER){this._confirmAttachmentPlaceholder(ya.upload_id,ya.upload_data);continue;}else if(za===m.CANCEL_ATTACHMENT_PLACEHOLDER){this._cancelAttachmentPlaceholder(ya.upload_id,ya.upload_data);continue;}else{if(sa===r.CLIENT_SEND_MESSAGE){this._localIdsMap[ya.message_id]=ya.message_id;if(ya.thread_id=='root:'+ya.message_id)ja(this,ya.thread_id).setReachedEndOfArray();}if(za==m.LOG_MESSAGE&&ya.log_message_type==p.SERVER_ERROR)this._failedHistoryFetchThreads[ya.thread_id]=true;if(ya.client_state===q.DO_NOT_SEND_TO_SERVER&&ya.upload_id)this._uploadMessages[ya.upload_id]=ya;if(!va[ya.thread_id])va[ya.thread_id]=[];va[ya.thread_id].push(ya.message_id);this._addNewMessage(ya.message_id,ya);if(ya.threading_id&&ya.threading_id!=ya.message_id)u.addServerID(ya.threading_id,ya.message_id);if(ya[w.MANUAL_RETRY_CNT]>0){ua=ja(this,ya.thread_id);ua.resortResources([ya.message_id]);this._emitReorderedChange(ya.thread_id,r.CLIENT_SEND_MESSAGE);}ra=ra||this._shouldSortOutOfOrderMessages(sa,ya.thread_id,ya.timestamp);if(!ra)this._emitReceivedChange(ha(this,ya.message_id));continue;}}for(var fb in va){ua=ja(this,fb);var gb=ua.getAllResources(),hb=gb.filter(function(jb){var kb=this._messages.get(jb);return kb.action_type==m.LOG_MESSAGE&&kb.log_message_type==p.SERVER_ERROR;}.bind(this));ua.removeResources(hb);if(ta)na(this,fb,va[fb]);if(ra){ua.addResources(va[fb]);this._emitReorderedChange(fb,sa);}else ua.addResourcesWithoutSorting(va[fb].reverse(),0);this._threadInformer.updatedThread(fb);}var ib=Object.keys(wa);if(ib.length)this._serverRequests.requestMessageConfirmation(wa);this._didChange&&ga.debug('handle_updates',{localMessageCounts:ea(this._localTitanMessagesCount)});},isFirstMessage:function(qa){var ra=ja(this,qa.thread_id);if(ra.getCurrentArraySize()===0)return false;var sa=ra.getResourceAtIndex(ra.getCurrentArraySize()-1),ta=ha(this,sa).message_id,ua=ha(this,qa.message_id).message_id;return ra.hasReachedEndOfArray()&&ta==ua;},_markMessagesSpam:function(qa,ra){var sa=qa,ta=sa.thread_id,ua=sa.message_ids;if(!ua.length)return;this._deleteIndividualMessages(ta,ua,ra);this._serverRequests.markMessagesSpam(ta,ua);},_deleteMessages:function(qa,ra,sa){if(!ra.length)return;this._deleteIndividualMessages(qa,ra,sa);if(sa!==r.CLIENT_CHANNEL_MESSAGE)this._serverRequests.deleteMessages(qa,ra);},_deleteIndividualMessages:function(qa,ra,sa){var ta=ra.map(function(va){return ha(this,va).message_id;},this),ua=ja(this,qa);ua.removeResources(ta);this._emitReorderedChange(qa,sa);},_updateLocalMessage:function(qa){var ra=ha(this,qa.client_message_id),sa={};sa.status=qa.status;if(qa.status===l.SUCCESS||qa.error_data)sa.error_data=qa.error_data;var ta=qa.message_id,ua=qa.client_message_id;if(this._messages.has(ta)){this._updateMessage(ta,ra,sa);return false;}if(qa.timestamp)sa.timestamp=qa.timestamp;if(qa.log_message_data)sa.log_message_data=qa.log_message_data;if(qa.ranges&&qa.ranges.length){pa(qa);sa.ranges=qa.ranges;}if(qa.attachments&&qa.attachments.length){sa.raw_attachments=null;sa.attachments=qa.attachments;}this._localIdsMap[ua]=ta;u.addServerID(ua,ta);var va=this._updateMessage(ta,ra,sa);this._messages.set(ua,new i());if(oa(va))this._localTitanMessagesCount[va.thread_id]--;return true;},getNumberLocalMessages:function(qa){return this._localTitanMessagesCount[qa]||0;},_uploadMessages:{},_confirmAttachmentPlaceholder:function(qa,ra){var sa=this._popPendingAttachmentMessage(qa,ra);this._serverRequests.sendNewMessage(sa);},_cancelAttachmentPlaceholder:function(qa,ra){var sa=this._popPendingAttachmentMessage(qa,ra);this._deleteIndividualMessages(sa.thread_id,[sa.message_id]);if(this._localTitanMessagesCount[sa.thread_id])this._localTitanMessagesCount[sa.thread_id]--;},_popPendingAttachmentMessage:function(qa,ra){var sa=this._uploadMessages[qa];ca(sa);sa.image_ids=ra.image_ids;sa.file_ids=ra.file_ids;sa.audio_ids=ra.audio_ids;sa.gif_ids=ra.gif_ids;sa.client_state=q.SEND_TO_SERVER;delete this._uploadMessages[qa];return sa;},_emitUpdatedChange:function(qa,ra,sa){this._didChange=true;this._threadInformer.updatedMessage(qa,ra,sa);},_emitReceivedChange:function(qa){this._didChange=true;this._threadInformer.receivedMessage(qa);},_emitReorderedChange:function(qa,ra){this._didChange=true;this._threadInformer.reorderedMessages(qa,ra);}});Object.assign(la,s,{addListener:function(qa,ra){return fa.addListener(qa,ra);}});function ma(qa,ra){var sa=ra.map(ha.bind(null,qa));return sa.reverse();}function na(qa,ra,sa){var ta=sa.filter(function(ua){return oa(ha(qa,ua));});if(!qa._localTitanMessagesCount[ra])qa._localTitanMessagesCount[ra]=0;qa._localTitanMessagesCount[ra]+=ta.length;}function oa(qa){var ra=qa.action_type;if(ra==m.USER_GENERATED_MESSAGE)return true;switch(qa.log_message_type){case p.SUBSCRIBE:case p.UNSUBSCRIBE:case p.SERVER_ERROR:case p.LIVE_LISTEN:return false;default:return true;}}function pa(qa){if(!qa.ranges)return;qa.ranges.forEach(function(ra){if(!ra.entity||ra.entity.external||!ra.entity.url)return;var sa=new ba(ra.entity.url);if(da(ba.getRequestURI())&&!sa.getDomain()){sa.setProtocol('https').setDomain('www.facebook.com');ra.entity.url=sa.toString();}});}e.exports=la;},null);
__d("ImageSourceType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={PROFILE_PICTURE:'profile_picture',IMAGE:'image'};e.exports=g;},null);
__d("ImageSourceRequest",["CurrentUser","ImageSourceType","KeyedCallbackManager","PhotoResizeModeConst","MercuryServerDispatcher","arrayContains"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(){"use strict";this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}m.prototype.setFBID=function(q){"use strict";this._request.fbid=q;return this;};m.prototype.setType=function(q){"use strict";if(!l([h.PROFILE_PICTURE,h.IMAGE],q))throw new TypeError('ImageSourceRequest.setType: invalid type '+q);this._request.type=q;return this;};m.prototype.setDimensions=function(q,r){"use strict";this._request.width=q;this._request.height=r;return this;};m.prototype.setResizeMode=function(q){"use strict";if(!l([j.COVER,j.CONTAIN],q))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+q);this._request.resize_mode=q;return this;};m.prototype.setCallback=function(q){"use strict";this._callback=q;return this;};m.prototype.send=function(){"use strict";if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var q=o(),r=p(this._request);q.executeOrEnqueue(r,this._callback);if(q.getUnavailableResourcesFromRequest(r).length===1){k.trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var n=null;function o(){if(n)return n;var q=new i();n=q;k.registerEndpoints({'/ajax/image_source.php':{request_user_id:g.getID(),mode:k.BATCH_DEFERRED_MULTI,batch_function:function(r,s){var t;(t=r.requests).push.apply(t,s.requests);return r;},handler:function(r,s){var t=s.getData().requests;for(var u=0;u<t.length;++u)q.setResource(p(t[u]),r[u]);}}});return q;}function p(q){return [q.fbid,q.type,q.width,q.height,q.resize_mode].join('|');}e.exports=m;},null);
__d("MercuryParticipantFetcher",["LogHistory","MercuryIDs","MercuryPayloadSource","MercuryServerRequests","Set","ShortProfiles","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=g.getInstance('short_profiles');function o(q){this.$MercuryParticipantFetcher0=j.getForFBID(q);this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2=new k();this.$MercuryParticipantFetcher3=new k();}o.prototype.fetch=function(q){this.$MercuryParticipantFetcher4(q);this.$MercuryParticipantFetcher5();};o.prototype.fetchMulti=function(q){q.forEach(function(r){return this.$MercuryParticipantFetcher4(r);}.bind(this));this.$MercuryParticipantFetcher5();};o.prototype.$MercuryParticipantFetcher4=function(q){if(!this.$MercuryParticipantFetcher3.has(q))this.$MercuryParticipantFetcher2.add(q);};o.prototype.$MercuryParticipantFetcher5=function(){if(this.$MercuryParticipantFetcher1||this.$MercuryParticipantFetcher2.size===0)return;this.$MercuryParticipantFetcher1=true;m(function(){this.$MercuryParticipantFetcher1=false;this.$MercuryParticipantFetcher2.forEach(function(q){return this.$MercuryParticipantFetcher3.add(q);}.bind(this));this.$MercuryParticipantFetcher6(this.$MercuryParticipantFetcher2,function(q){q.forEach(function(r){return this.$MercuryParticipantFetcher3["delete"](r.id);}.bind(this));this.$MercuryParticipantFetcher7(q);}.bind(this));this.$MercuryParticipantFetcher2.clear();}.bind(this));};o.prototype.$MercuryParticipantFetcher6=function(q,r){var s=[];q.forEach(function(t){var u=h.tokenize(t),v=u.type,w=u.value;v==='fbid'&&s.push(w);});if(s.length>0){l.getMulti(s,function(t){var u=[];for(var v in t)u.push(p(t[v],v));r(u);if(u.length!==s.length)n.error('server_fetch_participant_count_error',{expectedIDs:s,receivedIDs:Object.keys(t)});});n.debug('client_fetch_participants',{userIDs:s});}};o.prototype.$MercuryParticipantFetcher7=function(q){this.$MercuryParticipantFetcher0.handleUpdate({participants:q,from_client:false,payload_source:i.SERVER_FETCH_PARTICIPANTS});};function p(q,r){var s=Object.assign({gender:q.gender,fbid:q.id||r,href:q.uri,id:h.getParticipantIDFromUserID(q.id||r),image_src:q.thumbSrc,name:q.name,short_name:q.firstName,employee:q.employee,is_employee_away:q.is_employee_away,type:q.type,vanity:q.vanity,is_friend:q.is_friend,is_messenger_user:q.is_messenger_user,social_snippets:q.social_snippets},{});if(q.officeStatus){s.officeStatus=q.officeStatus;s.officeStatusStartDate=q.officeStatusStartDate;s.officeStatusEndDate=q.officeStatusEndDate;s.officeStatusComment=q.officeStatusComment;s.officeStatusLocation=q.officeStatusLocation;}return s;}e.exports=o;},null);
__d("MercuryParticipants",["CurrentUser","EventEmitter","ImageSourceRequest","ImageSourceType","ImmutableObject","KeyedCallbackManager","Map","MercuryAssert","MercuryIDs","MercuryParticipantFetcher","MercuryParticipantTypes","MercuryParticipantsConstants","MercuryDispatcher","PhotoResizeModeConst","Set","fbt","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();'use strict';var x='change';function y(aa){this.$MercuryParticipants0=aa;this.$MercuryParticipants1=new h();this.$MercuryParticipants2=new l();this.$MercuryParticipants3=new p(this.$MercuryParticipants0);this.$MercuryParticipants4=new m();this.$MercuryParticipants5=s.getForFBID(this.$MercuryParticipants0);this.$MercuryParticipants5.subscribe('update-participants',function(ba,ca){if(ca.participants&&ca.participants.length>0){var da={};ca.participants.forEach(function(ea){da[ea.id]=ea;});this.$MercuryParticipants6(da);}}.bind(this));}y.prototype.addListener=function(aa,ba){return this.$MercuryParticipants1.addListener(aa,ba);};y.prototype.getIDFromVanityOrFBID=function(aa){if(!aa)return;if(this.$MercuryParticipants4.has(aa))return this.$MercuryParticipants4.get(aa);if(/^\d+$/.test(aa))return o.getParticipantIDFromUserID(aa);};y.prototype.getNow=function(aa){return this.$MercuryParticipants7(aa);};y.prototype.getOrFetch=function(aa){var ba=this.$MercuryParticipants7(aa);if(!ba)this.$MercuryParticipants3.fetch(aa);return ba;};y.prototype.get=function(aa,ba){n.isParticipantID(aa);return this.$MercuryParticipants8([aa],function(ca){ba(ca[aa]);});};y.prototype.getMulti=function(aa,ba){return this.$MercuryParticipants8(aa,ba);};y.prototype.getBigImageMulti=function(aa,ba){n.allParticipantIDs(aa);var ca=r.BIG_IMAGE_SIZE;return this.$MercuryParticipants8(aa,function(da){var ea={},fa=0,ga=new u(),ha=function(la,ma){fa++;ea[la]=ma;if(fa===aa.length){ba(ea);if(ga.size>0)this.$MercuryParticipants9(ga);}}.bind(this),ia=function(la,ma){this.$MercuryParticipants2.setResource(la,k.set(this.$MercuryParticipants2.getResource(la),{big_image_src:ma.uri}));ga.add(la);ha(la,ma.uri);}.bind(this);for(var ja in da){var ka=da[ja];if(!ka.big_image_src){new i().setFBID(o.getUserIDFromParticipantID(ja)).setType(j.PROFILE_PICTURE).setDimensions(ca,ca).setResizeMode(t.COVER).setCallback(ia.bind(null,ja)).send();}else ha(ka.id,ka.big_image_src);}}.bind(this));};y.prototype.getOrderedBigImageMulti=function(aa,ba){return this.getBigImageMulti(aa,function(ca){ba(aa.map(function(da){return ca[da];}));});};y.prototype.$MercuryParticipants8=function(aa,ba){n.allParticipantIDs(aa);var ca=this.$MercuryParticipants2.executeOrEnqueue(aa,ba),da=this.$MercuryParticipants2.getUnavailableResources(ca).filter(function(ea){var fa=o.tokenize(ea),ga=fa.type,ha=fa.value;if(ga==='email'){this.$MercuryParticipantsa(ea,ha);return false;}return true;}.bind(this));this.$MercuryParticipants3.fetchMulti(da);return this.$MercuryParticipantsb(ca);};y.prototype.$MercuryParticipants7=function(aa){var ba=this.$MercuryParticipants2.getResource(aa);if(!ba){var ca=o.tokenize(aa),da=ca.type,ea=ca.value;if(da==='email')ba=this.$MercuryParticipantsa(aa,ea);}return ba;};y.prototype.$MercuryParticipantsa=function(aa,ba){var ca=new k(z(aa,ba));this.$MercuryParticipants2.setResource(aa,ca);return ca;};y.prototype.$MercuryParticipants9=function(aa){this.$MercuryParticipants1.emit(x,aa);};y.prototype.$MercuryParticipants6=function(aa){aa=w(aa,function(ba,ca){if(ba.vanity)this.$MercuryParticipants4.set(ba.vanity,ca);return new k(this.$MercuryParticipantsc(ba));}.bind(this));this.$MercuryParticipants2.addResourcesAndExecute(aa);this.$MercuryParticipants9(new u(Object.keys(aa)));};y.prototype.$MercuryParticipantsc=function(aa){var ba=aa.type===q.USER||aa.type===q.FRIEND;if(!ba)return aa;if(!aa.name&&!aa.href&&!aa.vanity){var ca=v._("Facebook User");aa.name=ca;aa.short_name=ca;}return aa;};y.prototype.$MercuryParticipantsb=function(aa){return {remove:function(){this.$MercuryParticipants2.unsubscribe(aa);}.bind(this)};};function z(aa,ba){return {gender:r.UNKNOWN_GENDER,href:null,id:aa,image_src:r.EMAIL_IMAGE,big_image_src:r.EMAIL_IMAGE,name:ba,short_name:ba,employee:false};}e.exports=new y(g.getID());},null);
__d("MercuryViewer",["CurrentUser","MercuryAssert"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i='fbid:'+g.getID(),j={getID:function(){return i;},isViewer:function(k){h.isParticipantID(k);return k===i;}};e.exports=j;},null);
__d("MercuryNotificationRenderer",["MercuryAssert","MercuryParticipants","MercuryViewer","fbt","MercuryMessages","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=b('MercuryMessages').get(),l=b('MercuryThreads').get();function m(n,o){g.isThreadID(n);l.getThreadMeta(n,function(p){k.getThreadMessagesRange(n,0,1,function(q){var r=q.length&&q[q.length-1];if(r&&r.author!=i.getID()){h.get(r.author,function(s){if(p.name){o(j._("{senderName} messaged {groupName}",[j.param("senderName",s.short_name),j.param("groupName",p.name)]));}else o(j._("{name} messaged you",[j.param("name",s.short_name)]));});}else o(j._("New message!"));});});}e.exports={renderDocumentTitle:m};},null);
__d("MercuryTimestampTracker",["MercuryActionType","MercuryPayloadSource","MercurySingletonMixin","MercuryDispatcher","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m){this._fbid=m;this._dispatcher=j.getForFBID(this._fbid);this._lastTimestamp=0;this._dispatcher.subscribe('update-messages',function(n,o){if(!o.actions||!o.actions.length)return;if(o.payload_source==h.CLIENT_SEND_MESSAGE||o.payload_source==h.UNKNOWN)return;for(var p=0;p<o.actions.length;p++){var q=o.actions[p],r=q.action_type;if(r==g.USER_GENERATED_MESSAGE&&q.thread_id&&q.timestamp>this._lastTimestamp)this._lastTimestamp=q.timestamp;}}.bind(this));}Object.assign(l.prototype,{getLastUserMessageTimestamp:function(){return this._lastTimestamp;}});k(l,i);e.exports=l;},null);
__d("ChatTitleBarBlinker",["ChatActivity","ChatConfig","DocumentTitle","JSLogger","MercuryNotificationRenderer","PresenceState","MercuryThreadInformer","MercuryTimestampTracker"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=b('MercuryThreadInformer').get(),n=b('MercuryTimestampTracker').get(),o=j.create('chat_title'),p=null,q=0,r=false;function s(){if(p){p.stop();p=null;return true;}return false;}function t(y){var z=y||n.getLastUserMessageTimestamp();if(q<=z){q=z;if(s()||r)l.doSync();}}var u={blink:function(y,z){if(h.get('remove_notification_blink'))return;if(!p&&q<z)k.renderDocumentTitle(y,function(aa){if(!p)p=i.blink(aa);});},stopBlinking:function(){t();},blinkingElsewhere:function(){r=true;}};function v(y){var z=l.verifyNumber(y.sb2);if(!z||z<=q)return null;return z;}function w(y){var z=y&&v(y);if(z){q=z;o.debug('load',q);s();r=false;}}function x(y){var z=v(y);if(!z){o.debug('store',q);y.sb2=q;r=false;}return y;}l.registerStateStorer(x);l.registerStateLoader(w);m.subscribe('thread-read-changed',function(y,z){var aa=n.getLastUserMessageTimestamp(),ba=0;for(var ca in z)if(z[ca].mark_as_read&&z[ca].timestamp>=aa&&z[ca].timestamp>ba)ba=z[ca].timestamp;ba&&t(ba);});g.subscribe('activity',function(){t();});(function(){var y=l.getInitial();if(y)q=v(y)||0;})();e.exports=u;},null);
__d("MercuryBrowserAlerts",["ArbiterMixin","ChatActivity","ChatConfig","ChatOptions","ChatTitleBarBlinker","MercuryThreadInfo","MercuryViewer","MessagingTag","Sound","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=b('MercuryThreads').get();o.init(['audio/ogg','audio/mpeg']);function q(s){if(j.getSetting('sound'))o.play([i.get('sound.notif_ogg_url'),i.get('sound.notif_mp3_url')],s,false);}var r={messageReceived:function(s){if(m.isViewer(s.author)||!s.is_unread||(s.folder!=n.INBOX&&s.folder!=n.ARCHIVED))return;var t=s.thread_id,u=h.isActive();if(u){var v=false;r.inform('before-alert',{threadID:t,cancelAlert:function(){v=true;}});}p.getThreadMeta(t,function(w){var x=l.isMuted(w);if(x)return;var y=s.timestamp;if(u){!v&&q(y);}else{k.blink(t,y);q(y);}k.blinkingElsewhere();}.bind(this));}};e.exports=Object.assign(r,g);},null);
__d("FBRTCCallSummaryUploader",["Bootloader"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={init:function(){g.loadModules(["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],function(i,j,k){var l=k.getInstance();i.subscribe(i.SEND,function(){j.logSavedSummaries(l);});});}};e.exports=h;},null);
__d("FBRTCAvailability",["ChannelConstants","PresenceStatus"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={isCallable:function(j){var k=h.getCapabilities(j),l=g.CAPABILITY_VOIP_INTEROP|g.CAPABILITY_VIDEO;return !!(k&l);}};e.exports=i;},null);
__d("FBRTCStruct",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=function(i,j,k){var l,m;if(typeof i=='string'||i instanceof String){m=i;l=i;}else for(var n in i)if(i.hasOwnProperty(n))if(n==='index'){k=i[n];}else{m=n;l=i[n];}j[m]=k;j.strNames[k]=l;};function h(i){"use strict";this.strNames=[];for(var j=0;j<i.length;j++)g(i[j],this,j);}e.exports=h;},null);
__d("FBRTCConstants",["FBRTCStruct"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={OFFER:'offer',ANSWER:'answer',ICE_CANDIDATE:'ice_candidate',OK:'ok',PING:'ping',HANGUP:'hang_up',OTHER_DISMISS:'other_dismiss',MSG_ACK:'msg_ack',PRANSWER:'pranswer',ICERESTART_OFFER:'icerestart_offer',ICERESTART_ANSWER:'icerestart_answer',PCRESTART_OFFER:'pcrestart_offer',PCRESTART_ANSWER:'pcrestart_answer',SDP_UPDATE:'sdp_update',OFFER_ACK:'offer_ack',OFFER_NACK:'offer_nack',ANSWER_ACK:'answer_ack',SET_VIDEO:'set_video',VIDEO_REQUEST:'video_request',ACK:'ack'},i=new g([{IGNORE_CALL:'IgnoreCall'},{HANGUP_CALL:'HangupCall'},{IN_ANOTHER_CALL:'InAnotherCall'},{ACCEPT_AFTER_HANGUP:'CallEndAcceptAfterHangUp'},{NO_ANSWER_TIMEOUT:'NoAnswerTimeout'},{INCOMING_TIMEOUT:'IncomingTimeout'},{OTHER_INSTANCE_HANDLED:'OtherInstanceHandled'},{SIGNALING_MESSAGE_FAILED:'SignalingMessageFailed'},{CONNECTION_DROPPED:'ConnectionDropped'},{CLIENT_INTERRUPTED:'ClientInterrupted'},{WEBRTC_ERROR:'WebRTCError'},{CLIENT_ERROR:'ClientError'},{NO_PERMISSION:'NoPermission'},{OTHER_NOT_CAPABLE:'OtherNotCapable'},{NO_UI_ERROR:'NoUIShown'},{UNSUPPORTED_VERSION:'VersionUnsupported'},{CALLER_NOT_VISIBLE:'CallerNotVisible'},{CARRIER_BLOCKED:'CarrierBlocked'},{OTHER_CARRIER_BLOCKED:'OtherCarrierBlocked'}]),j={TOGGLE_SELF_VIEW:5,SUBMIT_STAR_RATING:6,SUBMIT_FEEDBACK:7,START_CALL:9,OPEN_SCREEN_IN_NEW:10},k={PayloadType:h,CallEndReason:i,UIEventType:j,endCallReasonFromString:function(l){return i.strNames.indexOf(l);},callEndReasonString:function(l){if(l<0||l>i.strNames.length)return 'Unknown';return i.strNames[l];},fullCallEndReasonString:function(l,m){return this.callEndReasonString(l)+'_'+(m?'remote':'local');}};e.exports=k;},null);
__d("FBRTCIceStatsParser",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=null;h.getInstance=function(){"use strict";if(!g)g=new h();return g;};function h(){"use strict";}h.prototype.extractIceInfo=function(i){"use strict";var j=[],k=i.split("\r\n");for(var l=0;l<k.length;l++){var m=k[l];if(this.$FBRTCIceStatsParser0(m))j.push({gen:this.$FBRTCIceStatsParser1(m),type:this.$FBRTCIceStatsParser2(m)});}return j;};h.prototype.$FBRTCIceStatsParser0=function(i){"use strict";return (i.indexOf('candidate:')>-1);};h.prototype.$FBRTCIceStatsParser1=function(i){"use strict";var j=0,k=i.match(/generation (\d+)/);if(k)j=parseInt(k[1],10);return j;};h.prototype.$FBRTCIceStatsParser2=function(i){"use strict";var j=i.match(/typ (host|relay|srflx|prflx)/);if(j){return j[1];}else return 'unknown';};e.exports=h;},null);
__d("FBRTCLogger",["Log","LogHistory","MarauderLogger","formatDate","pageID"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l='webrtc',m='sent_message',n='received_message',o='send_succeeded',p='send_failed',q='info',r='call_action',s='client_event',t='client_error',u='type',v='msg_id',w='ack_msg_id',x='call_id',y='from',z='to',aa='content',ba='tag',ca='peer_id',da='error_code',ea='trigger',fa='endcallstats',ga=null;ha.getInstance=function(){"use strict";if(!ga)ga=new ha();return ga;};function ha(){"use strict";this.$FBRTCLogger0=h.getInstance(l);}ha.prototype.logToConsole=function(ia){"use strict";var ja='Console';this.$FBRTCLogger1(null,null,ja,ia);this.$FBRTCLogger0.log(ja,ia);};ha.prototype.logReceivedMessage=function(ia,ja,ka){"use strict";var la={};la[y]=ia;la[x]=ja;la[u]=ka.type;la[v]=ka.msg_id;if(ka.sdp)la[aa]=ka.sdp;if(ka.ack_id)la[w]=ka.ack_id;this.$FBRTCLogger2(n,la);this.$FBRTCLogger1(ia,ja,'Received',ka.type+', '+ka.msg_id);};ha.prototype.logSentMessage=function(ia,ja,ka){"use strict";var la={};la[z]=ia;la[x]=ja;la[u]=ka.type;la[v]=ka.msg_id;if(ka.sdp)la[aa]=ka.sdp;if(ka.ack_id)la[w]=ka.ack_id;this.$FBRTCLogger2(m,la);this.$FBRTCLogger1(ia,ja,'Sent',ka.type+', '+ka.msg_id);};ha.prototype.logSentMessageSuccess=function(ia,ja,ka,la){"use strict";var ma={};ma[ca]=ia;ma[x]=ja;ma[u]=ka;ma[v]=la;this.$FBRTCLogger2(o,ma);};ha.prototype.logSentMessageFailure=function(ia,ja,ka,la,ma){"use strict";var na={};na[ca]=ia;na[x]=ja;na[u]=ka;na[v]=la;na[da]=ma;this.$FBRTCLogger2(p,na);this.$FBRTCLogger1(ia,ja,'Send Failed',ka+', '+ma);};ha.prototype.logCallAction=function(ia,ja,ka,la,ma){"use strict";var na={};na[ca]=ia;na[x]=ja;na[r]=ka;na[aa]=la;if(ma)na[ea]=ma;this.$FBRTCLogger2(r,na);this.$FBRTCLogger1(ia,ja,'CallAction',ka+', '+la);};ha.prototype.logEvent=function(ia,ja,event){"use strict";var ka={};ka[ca]=ia;ka[x]=ja;ka[aa]=event;this.$FBRTCLogger2(s,ka);this.$FBRTCLogger1(ia,ja,'Event',event);};ha.prototype.logInfo=function(ia,ja,ka){"use strict";var la={};la[ca]=ia;la[x]=ja;la[aa]=ka;this.$FBRTCLogger2(q,la);this.$FBRTCLogger1(ia,ja,'Info',ka);};ha.prototype.logError=function(ia,ja,ka){"use strict";var la={};la[ca]=ia;la[x]=ja;la[aa]=ka;this.$FBRTCLogger2(t,la);this.$FBRTCLogger1(ia,ja,'Error',ka);};ha.prototype.logErrorWithoutID=function(ia){"use strict";this.logError(null,null,ia);};ha.prototype.logEndCallSummary=function(ia){"use strict";if(!ia)return;var ja={};ja[ca]=ia.peerID;ja[x]=ia.callID;ja[ba]=fa;ja[aa]=ia.toString();var ka=ia.getExtraInfo();for(var la in ka)if(ka.hasOwnProperty(la))ja[la]=ka[la];this.$FBRTCLogger2(q,ja);this.$FBRTCLogger1(ia.peerID,ia.callID,'Call Summary',ja);};ha.prototype.$FBRTCLogger2=function(ia,ja){"use strict";ja.page_id=k;this.$FBRTCLogger0.log(ia,ja);i.log(ia,l,ja);};ha.prototype.$FBRTCLogger1=function(ia,ja,ka,la){"use strict";};ha.CallAction={START_CALL:'start_call',RECEIVED_CALL:'received_call',ANSWER_CALL:'answer_call',END_CALL:'end_call',DENIED_PERMISSION:'denied_permission',SET_MUTE:'set_mute',SET_VIDEO_ON:'set_video_on',SET_SELF_VIEW_ON:'set_self_view_on',SET_FULLSCREEN_ON:'set_fullscreen_on',START_SKYPE:'start_skype',TRY_NEW:'try_new',OPEN_POPUP:'open_popup',POPUP_OPENED:'popup_opened',AUTO_DISABLE_VIDEO:'auto_disable_video',FAILED_GETTING_URI:'failed_getting_uri',OLD_URI:'old_uri',USER_SETTINGS_CHANGED:'user_settings_changed',TOGGLE_SCREEN_SHARING:'toggle_screen_sharing',SCREEN_SHARING_ENABLED:'screen_sharing_status'};ha.Trigger={ADMIN_MESSAGE:'admin_message',CHAT_TAB_ICON:'chat_tab_icon',CHAT_TAB_ICON_TOUR:'chat_tab_icon_tour',SKYPE_DEPRECATION_DIALOG:'skype_deprecation_dialog',REDIAL_BUTTON:'redial_button',RETURN_CALL:'return_call',WEB_MESSENGER:'web_messenger',POPUP_CALL_START_BUTTON:'popup_start_call_button',TIMELINE_PROFILE:'timeline_profile',UNKNOWN:'unknown'};ha.Key={DEVICE_INFO:'device_info',RATING:'rating5',RATING_SHOWN:'rating_shown',SURVEY_CHOICE:'survey_choice',SURVEY_DETAILS:'survey_details',SURVEY_SHOWN:'survey_shown',INITIATED_BY_PAGE_ID:'initiated_by_page_id',PEER_IS_MOBILE:'peer_is_mobile'};e.exports=ha;},null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLogger","UserAgentData","copyProperties","performanceNow"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=5*60*1000,n={CALL_STARTED:'started',POPUP_OPENED:'opened',SENT_OFFER:'s_o',RECV_OFFER:'r_o',SENT_OFFER_ACK:'s_oack',RECV_OFFER_ACK:'r_oack',SENT_RETRIED_OFFER:'s_o2',RECV_RETRIED_OFFER:'r_o2',SENT_RETRIED_OFFER_ACK:'s_oack2',RECV_RETRIED_OFFER_ACK:'r_oack2',SENT_PRANSWER:'s_pr',RECV_PRANSWER:'r_pr',NETWORK_READY:'network_ready',SENT_ANSWER:'s_a',RECV_ANSWER:'r_a',SENT_ANSWER_ACK:'s_aack',RECV_ANSWER_ACK:'r_aack',SENT_RETRIED_ANSWER:'s_a2',RECV_RETRIED_ANSWER:'r_a2',SENT_RETRIED_ANSWER_ACK:'s_aack2',RECV_RETRIED_ANSWER_ACK:'r_aack2',SENT_OK:'s_ok',RECV_OK:'r_ok',CALL_CONNECTED:'connected',CALL_ENDED:'ended'};o.CURRENT_SUMMARY_VERSION=10;function o(p){"use strict";this.peerID=p.peerID;this.callID=p.callID;this.$FBRTCCallSummary0=p.isCaller;this.$FBRTCCallSummary1=(new Date()).valueOf();this.$FBRTCCallSummary2=null;this.$FBRTCCallSummary3={};this.$FBRTCCallSummary4=null;this.$FBRTCCallSummary5=null;this.$FBRTCCallSummary6=null;this.$FBRTCCallSummary7=null;this.$FBRTCCallSummary8=null;this.$FBRTCCallSummary9=null;this.$FBRTCCallSummarya={};this.$FBRTCCallSummaryb={};this.$FBRTCCallSummaryc={};this.$FBRTCCallSummaryd={};this.$FBRTCCallSummarye={};this.$FBRTCCallSummaryf={};this.$FBRTCCallSummaryg=l();this.$FBRTCCallSummaryh=0;this.$FBRTCCallSummaryi={};this.$FBRTCCallSummaryj=this.$FBRTCCallSummaryg;this.$FBRTCCallSummaryk=0;this.$FBRTCCallSummaryl={};this.addExtraInfo(i.Key.DEVICE_INFO,this.$FBRTCCallSummarym());this.$FBRTCCallSummaryn();this.$FBRTCCallSummaryo=h.getInstance();this.$FBRTCCallSummaryp=i.getInstance();}o.prototype.toJsonString=function(){"use strict";this.$FBRTCCallSummary8=(new Date()).valueOf();return JSON.stringify({version:o.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary0,startTime:this.$FBRTCCallSummary1,trigger:this.$FBRTCCallSummary2,signalingTime:this.$FBRTCCallSummary3,endCallReason:this.$FBRTCCallSummary4,endCallSubreason:this.$FBRTCCallSummary5,isRemoteEnded:this.$FBRTCCallSummary6,lastUpdatedTime:this.$FBRTCCallSummary7,lastSerializedTime:this.$FBRTCCallSummary8,unsetOnRetrieve:this.$FBRTCCallSummary9,openCount:this.$FBRTCCallSummaryk,extraInfo:this.$FBRTCCallSummaryl,pcStats:this.$FBRTCCallSummarya,captureStats:this.$FBRTCCallSummaryb,gen0IceSentCount:this.$FBRTCCallSummaryc,gen0IceReceivedCount:this.$FBRTCCallSummaryd,iceSentCount:this.$FBRTCCallSummarye,iceReceivedCount:this.$FBRTCCallSummaryf,newSignalingTime:this.$FBRTCCallSummaryi,accumulatedCallTime:this.$FBRTCCallSummaryq()});};o.fromJsonString=function(p){"use strict";var q;try{q=JSON.parse(p);}catch(r){return null;}if(q.version!==o.CURRENT_SUMMARY_VERSION)return null;if(!q.hasOwnProperty('peerID')||!q.hasOwnProperty('callID')||!q.hasOwnProperty('isCaller')||!q.hasOwnProperty('startTime')||!q.hasOwnProperty('trigger')||!q.hasOwnProperty('signalingTime')||!q.hasOwnProperty('endCallReason')||!q.hasOwnProperty('isRemoteEnded')||!q.hasOwnProperty('lastUpdatedTime')||!q.hasOwnProperty('lastSerializedTime'))return null;var s=new o({peerID:q.peerID,callID:q.callID,isCaller:q.isCaller});s.$FBRTCCallSummary1=q.startTime;s.$FBRTCCallSummary2=q.trigger;s.$FBRTCCallSummary3=q.signalingTime;s.$FBRTCCallSummary4=q.endCallReason;s.$FBRTCCallSummary5=q.endCallSubreason;s.$FBRTCCallSummary6=q.isRemoteEnded;s.$FBRTCCallSummary7=q.lastUpdatedTime;s.$FBRTCCallSummary8=q.lastSerializedTime;if(q.unsetOnRetrieve)s.$FBRTCCallSummary9=q.unsetOnRetrieve;if(q.openCount)s.$FBRTCCallSummaryk=q.openCount;if(q.extraInfo)s.$FBRTCCallSummaryl=q.extraInfo;if(q.pcStats)s.$FBRTCCallSummarya=q.pcStats;if(q.captureStats)s.$FBRTCCallSummaryb=q.captureStats;if(q.gen0IceSentCount)s.$FBRTCCallSummaryc=q.gen0IceSentCount;if(q.gen0IceReceivedCount)s.$FBRTCCallSummaryd=q.gen0IceReceivedCount;if(q.iceSentCount)s.$FBRTCCallSummarye=q.iceSentCount;if(q.iceReceivedCount)s.$FBRTCCallSummaryf=q.iceReceivedCount;if(q.newSignalingTime)s.$FBRTCCallSummaryi=q.newSignalingTime;if(q.accumulatedCallTime)s.$FBRTCCallSummaryh=q.accumulatedCallTime;return s;};o.restoreOrInitialize=function(p,q,r,s,t){"use strict";var u=p.retrieveCallSummary(q,r);if(!u){u=new o({peerID:q,callID:r,isCaller:s});if(t){u.onFullMessageReceived({msg:t});u.onOfferAckSent(t);}else u.onCallStarted(i.Trigger.UNKNOWN);i.getInstance().logError(q,r,'Missing call summary from storage');}else if(u.$FBRTCCallSummary9){u.$FBRTCCallSummary4=null;u.$FBRTCCallSummary5=null;u.$FBRTCCallSummary6=null;delete u.$FBRTCCallSummary3[n.CALL_ENDED];delete u.$FBRTCCallSummaryi[n.CALL_ENDED];u.$FBRTCCallSummary9=null;}return u;};o.logSavedSummaries=function(p){"use strict";var q=p.getLoggableSummaries(),r=q.length;if(r<=0)return;var s=i.getInstance(),t=[];for(var u=0;u<r;u++){var v=q[u];s.logEndCallSummary(v);t.push({peerID:v.peerID,callID:v.callID});}p.removeCallSummaries(t);s.logToConsole('Logged pending summaries: '+r);};o.prototype.save=function(p){"use strict";var q=l(),r=q-this.$FBRTCCallSummaryj;if(r>m){this.$FBRTCCallSummaryp.logInfo(this.peerID,this.callID,'Summary too old: '+r);return;}p.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummaryj=q;};o.prototype.getLastUpdatedTime=function(){"use strict";return this.$FBRTCCallSummary7;};o.prototype.setLastUpdatedTime=function(p){"use strict";this.$FBRTCCallSummary7=p;};o.prototype.getExtraInfo=function(){"use strict";return this.$FBRTCCallSummaryl;};o.prototype.addExtraInfo=function(p,q){"use strict";this.$FBRTCCallSummaryl[p]=q;this.$FBRTCCallSummaryn();};o.prototype.onCallStarted=function(p){"use strict";this.$FBRTCCallSummary2=p;this.$FBRTCCallSummaryr(n.CALL_STARTED);this.$FBRTCCallSummaryn();};o.prototype.onPopupOpened=function(){"use strict";this.$FBRTCCallSummaryr(n.POPUP_OPENED);this.$FBRTCCallSummaryk++;this.$FBRTCCallSummaryn();};o.prototype.setPcStats=function(p){"use strict";this.$FBRTCCallSummarya=p;this.$FBRTCCallSummaryn();};o.prototype.setVideoCaptureStats=function(p,q){"use strict";this.$FBRTCCallSummaryb={w:p,h:q};this.$FBRTCCallSummaryn();};o.prototype.onOfferAckSent=function(p){"use strict";this.onMessageSent({type:g.PayloadType.OFFER_ACK,flag:p.flag});};o.prototype.onMessageSent=function(p){"use strict";var q=p.flag===1;switch(p.type){case g.PayloadType.OFFER:this.$FBRTCCallSummarys(q,n.SENT_OFFER,n.SENT_RETRIED_OFFER);this.$FBRTCCallSummaryt(p,this.$FBRTCCallSummaryc,this.$FBRTCCallSummarye);break;case g.PayloadType.ANSWER:this.$FBRTCCallSummarys(q,n.SENT_ANSWER,n.SENT_RETRIED_ANSWER);this.$FBRTCCallSummaryt(p,this.$FBRTCCallSummaryc,this.$FBRTCCallSummarye);break;case g.PayloadType.OK:this.$FBRTCCallSummaryr(n.SENT_OK);break;case g.PayloadType.PRANSWER:this.$FBRTCCallSummaryr(n.SENT_PRANSWER);break;case g.PayloadType.OFFER_ACK:this.$FBRTCCallSummarys(q,n.SENT_OFFER_ACK,n.SENT_RETRIED_OFFER_ACK);break;case g.PayloadType.ANSWER_ACK:this.$FBRTCCallSummarys(q,n.SENT_ANSWER_ACK,n.SENT_RETRIED_ANSWER_ACK);break;case g.PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummaryt(p,this.$FBRTCCallSummaryc,this.$FBRTCCallSummarye);break;default:}this.$FBRTCCallSummaryn();};o.prototype.$FBRTCCallSummaryt=function(p,q,r){"use strict";var s=null,t=null,u=this.$FBRTCCallSummaryo.extractIceInfo(p.sdp);for(var v=0;v<u.length;v++){s=u[v].gen;t=u[v].type;if(s===0)this.$FBRTCCallSummaryu(q,t);this.$FBRTCCallSummaryu(r,t);}};o.prototype.$FBRTCCallSummaryu=function(p,q){"use strict";if(!p[q]){p[q]=1;}else p[q]=p[q]+1;};o.prototype.$FBRTCCallSummaryv=function(p){"use strict";if(p.isFromMobile())this.addExtraInfo(i.Key.PEER_IS_MOBILE,'1');};o.prototype.onFullMessageReceived=function(p){"use strict";var q=p.msg,r=q.flag===1;switch(q.type){case g.PayloadType.OFFER:this.$FBRTCCallSummaryv(p);this.$FBRTCCallSummarys(r,n.RECV_OFFER,n.RECV_RETRIED_OFFER);this.$FBRTCCallSummaryt(q,this.$FBRTCCallSummaryd,this.$FBRTCCallSummaryf);break;case g.PayloadType.ANSWER:this.$FBRTCCallSummaryv(p);this.$FBRTCCallSummarys(r,n.RECV_ANSWER,n.RECV_RETRIED_ANSWER);this.$FBRTCCallSummaryt(q,this.$FBRTCCallSummaryd,this.$FBRTCCallSummaryf);break;case g.PayloadType.OK:this.$FBRTCCallSummaryr(n.RECV_OK);break;case g.PayloadType.PRANSWER:this.$FBRTCCallSummaryr(n.RECV_PRANSWER);break;case g.PayloadType.OFFER_ACK:this.$FBRTCCallSummarys(r,n.RECV_OFFER_ACK,n.RECV_RETRIED_OFFER_ACK);break;case g.PayloadType.ANSWER_ACK:this.$FBRTCCallSummarys(r,n.RECV_ANSWER_ACK,n.RECV_RETRIED_ANSWER_ACK);break;case g.PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummaryt(q,this.$FBRTCCallSummaryd,this.$FBRTCCallSummaryf);break;default:}this.$FBRTCCallSummaryn();};o.prototype.onMsgAckReceived=function(p,q){"use strict";var r=p.msg.flag===1;if(q){this.$FBRTCCallSummarys(r,n.RECV_OFFER_ACK,n.RECV_RETRIED_OFFER_ACK);}else this.$FBRTCCallSummarys(r,n.RECV_ANSWER_ACK,n.RECV_RETRIED_ANSWER_ACK);};o.prototype.onCallConnected=function(){"use strict";this.$FBRTCCallSummaryr(n.NETWORK_READY);this.$FBRTCCallSummaryr(n.CALL_CONNECTED);this.$FBRTCCallSummaryn();};o.prototype.onCallEnded=function(p,q,r,s){"use strict";this.$FBRTCCallSummary9=r;this.$FBRTCCallSummary4=p;this.$FBRTCCallSummary5=s;this.$FBRTCCallSummary6=q;this.$FBRTCCallSummaryr(n.CALL_ENDED);this.$FBRTCCallSummaryn();};o.prototype.toString=function(){"use strict";var p={};p.core_metrics=this.$FBRTCCallSummaryw();p.time_series=null;return JSON.stringify(p);};o.prototype.$FBRTCCallSummaryw=function(){"use strict";var p={};p.ver=o.CURRENT_SUMMARY_VERSION;p.caller=this.$FBRTCCallSummary0;p.conn=this.$FBRTCCallSummaryx();p.peer_id=this.peerID;p.has_video=true;p.open_count=this.$FBRTCCallSummaryk;p.signaling=this.$FBRTCCallSummaryy();p.sender=this.$FBRTCCallSummaryz();p.receiver=this.$FBRTCCallSummaryA();p.end=this.$FBRTCCallSummaryB();p.video=this.$FBRTCCallSummaryC();return p;};o.prototype.$FBRTCCallSummaryx=function(){"use strict";var p={dtls:1};if(this.$FBRTCCallSummarya.sender&&this.$FBRTCCallSummarya.sender.rtt)p.rtt=this.$FBRTCCallSummarya.sender.rtt;return p;};o.prototype.$FBRTCCallSummaryy=function(){"use strict";var p={};if(this.$FBRTCCallSummary2)p.trigger=this.$FBRTCCallSummary2;p.start_time=this.$FBRTCCallSummary1;p.time_from_start=this.$FBRTCCallSummary3;var q=this.$FBRTCCallSummary3[n.CALL_CONNECTED],r=this.$FBRTCCallSummary3[n.CALL_ENDED];if(q){if(!r)if(this.$FBRTCCallSummary8){r=this.$FBRTCCallSummary8-this.$FBRTCCallSummary1;}else r=this.$FBRTCCallSummaryD();var s=r-q;if(s>0)p.duration=s;}p.new_time_from_start=this.$FBRTCCallSummaryi;q=this.$FBRTCCallSummaryi[n.CALL_CONNECTED];r=this.$FBRTCCallSummaryi[n.CALL_ENDED];if(q){if(!r)if(this.$FBRTCCallSummaryh>0){r=this.$FBRTCCallSummaryh;}else r=this.$FBRTCCallSummaryq();s=r-q;if(s>0)p.new_duration=s;}return p;};o.prototype.$FBRTCCallSummaryz=function(){"use strict";var p={};if(this.$FBRTCCallSummaryc)p.ice_g0=this.$FBRTCCallSummaryc;if(this.$FBRTCCallSummarye)p.ice=this.$FBRTCCallSummarye;if(this.$FBRTCCallSummarya.sender)k(p,this.$FBRTCCallSummarya.sender);return p;};o.prototype.$FBRTCCallSummaryA=function(){"use strict";var p={};if(this.$FBRTCCallSummaryd)p.ice_g0=this.$FBRTCCallSummaryd;if(this.$FBRTCCallSummaryf)p.ice=this.$FBRTCCallSummaryf;return p;};o.prototype.$FBRTCCallSummaryB=function(){"use strict";var p={};if(this.$FBRTCCallSummary4!==null){p.end_call_reason_string=g.callEndReasonString(this.$FBRTCCallSummary4);if(this.$FBRTCCallSummary5!==null)p.end_call_subreason_string=this.$FBRTCCallSummary5;p.remote_ended=this.$FBRTCCallSummary6;}if(this.$FBRTCCallSummarya.end)k(p,this.$FBRTCCallSummarya.end);return p;};o.prototype.$FBRTCCallSummaryC=function(){"use strict";var p={capture:{}};if(this.$FBRTCCallSummarya.video&&this.$FBRTCCallSummarya.video.sender)k(p,this.$FBRTCCallSummarya.video.sender);if(this.$FBRTCCallSummaryb)k(p.capture,this.$FBRTCCallSummaryb);return {sender:p};};o.prototype.$FBRTCCallSummaryD=function(){"use strict";return (new Date()).valueOf()-this.$FBRTCCallSummary1;};o.prototype.$FBRTCCallSummaryq=function(){"use strict";var p=l()-this.$FBRTCCallSummaryg;return Math.floor(this.$FBRTCCallSummaryh+p);};o.prototype.$FBRTCCallSummaryr=function(p){"use strict";if(this.$FBRTCCallSummary3[p])return;this.$FBRTCCallSummary3[p]=this.$FBRTCCallSummaryD();this.$FBRTCCallSummaryi[p]=this.$FBRTCCallSummaryq();};o.prototype.$FBRTCCallSummarys=function(p,q,r){"use strict";if(p){this.$FBRTCCallSummaryr(r);}else this.$FBRTCCallSummaryr(q);};o.prototype.$FBRTCCallSummaryn=function(){"use strict";this.$FBRTCCallSummary7=(new Date()).valueOf();};o.prototype.$FBRTCCallSummarym=function(){"use strict";return {device:j.deviceName,os:j.platformName,os_version:j.platformFullVersion,browser:j.browserName,browser_version:j.browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth};};e.exports=o;},null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBRTCCallSummary","FBRTCLogger","areEqual"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k='localstorage',l='RTC_CALL_SUMMARY_',m='summary',n=2000,o=3,p=3*60*1000,q=null;r.getInstance=function(){"use strict";if(!q)q=new r();return q;};function r(){"use strict";this.$FBRTCCallSummaryStore0=new g(k,l);this.$FBRTCCallSummaryStore1=i.getInstance();}r.prototype.storeCallSummary=function(s,t,u){"use strict";var v=this;this.$FBRTCCallSummaryStore2(function(w){if(!w[s])w[s]={};var x=w[s][t];if(x){var y=v.$FBRTCCallSummaryStore3(x);if(y&&y.getLastUpdatedTime()>u.getLastUpdatedTime()){v.$FBRTCCallSummaryStore1.logToConsole('Outdated summaries');return null;}}w[s][t]=v.$FBRTCCallSummaryStore4(u);return w;},v.$FBRTCCallSummaryStore1.logError.bind(v.$FBRTCCallSummaryStore1,s,t));};r.prototype.retrieveCallSummary=function(s,t){"use strict";var u=this.$FBRTCCallSummaryStore5(),v=null;if(u[s])v=u[s][t];if(v){return this.$FBRTCCallSummaryStore3(v);}else return null;};r.prototype.removeCallSummary=function(s,t){"use strict";this.removeCallSummaries([{peerID:s,callID:t}]);};r.prototype.removeCallSummaries=function(s){"use strict";var t=this;this.$FBRTCCallSummaryStore2(function(u){var v=s.length;for(var w=0;w<v;w++){var x=s[w].peerID,y=s[w].callID;if(u[x]&&u[x][y]){delete u[x][y];if(t.$FBRTCCallSummaryStore6(u[x]))delete u[x];}}return u;},t.$FBRTCCallSummaryStore1.logError.bind(t.$FBRTCCallSummaryStore1,null,null));};r.prototype.getLoggableSummaries=function(){"use strict";var s=this.$FBRTCCallSummaryStore5(),t=[];for(var u in s)if(s.hasOwnProperty(u))for(var v in s[u])if(s[u].hasOwnProperty(v)){var w=this.$FBRTCCallSummaryStore3(s[u][v],p);if(w)t.push(w);}return t;};r.prototype.$FBRTCCallSummaryStore6=function(s){"use strict";for(var t in s)if(s.hasOwnProperty(t))return false;return true;};r.prototype.$FBRTCCallSummaryStore4=function(s){"use strict";var t={__t:Date.now(),__d:s.toJsonString()};return t;};r.prototype.$FBRTCCallSummaryStore3=function(s,t){"use strict";if(s)if(!t||(Date.now()-s.__t>=t))return h.fromJsonString(s.__d);return null;};r.prototype.$FBRTCCallSummaryStore5=function(){"use strict";var s=this.$FBRTCCallSummaryStore0.get(m)||{};return s;};r.prototype.$FBRTCCallSummaryStore2=function(s,t,u,v){"use strict";if(u===(void 0)||u===null)u=o;var w=this.$FBRTCCallSummaryStore5(),x=this.$FBRTCCallSummaryStore5(),y=s(w);if(y===null)return;var z=this.$FBRTCCallSummaryStore5();if(j(x,z)){this.$FBRTCCallSummaryStore0.set(m,y);this.$FBRTCCallSummaryStore1.logToConsole('Updated summaries');}else if(u>0){t('Retry lock');if(v){var aa=this;setTimeout(function(){aa.$FBRTCCallSummaryStore2(s,t,u-1,true);},n);}else this.$FBRTCCallSummaryStore2(s,t,u-1,true);}else t('Failed to lock');};e.exports=r;},null);
__d("FBRTCUtils",["emptyFunction","randomInt","AsyncRequest"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=6000,k={attachMediaStream:function(l,m){if(window.webkitRTCPeerConnection){l.src=window.webkitURL.createObjectURL(m);}else{l.mozSrcObject=m;l.play();}},reattachMediaStream:function(l,m){if(window.webkitRTCPeerConnection){l.src=m.src;}else{l.mozSrcObject=m.mozSrcObject;l.play();}},generateRandomInt:function(){return h(0,4294967294)+1;},aboutEqual:function(l,m){return (l-m)<.01&&(m-l)<.01;},sendServerRequest:function(l,m,n,o,p,q){m=m||g;n=n||g;o=o||false;p=p||j;q=q||{};var r=new i().setURI(l).setData(q).setAllowCrossPageTransition(true).setHandler(m).setErrorHandler(n).setTimeoutHandler(p,function(){n();});if(o)r.setOption('asynchronous',false);r.send();}};e.exports=k;},null);
__d("XVideoCallInitController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/videocall\/init\/",{peer_id:{type:"Int",required:true},call_id:{type:"Int",required:true},is_caller:{type:"Bool",defaultValue:false},audio_only:{type:"Bool",defaultValue:false}});},null);
__d("XVideoCallController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/videocall\/incall\/",{peer_id:{type:"Int",required:true},call_id:{type:"Int"},is_caller:{type:"Bool",defaultValue:false},audio_only:{type:"Bool",defaultValue:false}});},null);
__d("FBRTCUrlManager",["FBRTCLogger","FBRTCUtils","XVideoCallInitController","XVideoCallController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=3,l=function(p,q,r,s){g.getInstance().logCallAction(p,q,g.CallAction.OLD_URI);return j.getURIBuilder().setInt('peer_id',p).setInt('call_id',q).setBool('is_caller',r).setBool('audio_only',s).getURI();},m=function(p,q,r,s,t,u,v){if(v===(void 0)||v===null)v=k;var w=i.getURIBuilder().setInt('peer_id',p).setInt('call_id',q).setBool('is_caller',r).setBool('audio_only',s).getURI();h.sendServerRequest(w,function(x){t(x.payload.uri);},function(x){if(v>0){m(p,q,r,s,t,u,v-1);}else t(l(p,q,r,s));});},n=function(p){window.history.replaceState({},'',p);},o={init:function(p){this._peerID=p;},onCallStarted:function(){n(l(this._peerID));},getCallUri:m};e.exports=o;},null);
__d("FBRTCCallUI",["BanzaiLogger","Cookie","UserAgent","FBRTCCallSummary","FBRTCCallSummaryStore","FBRTCConstants","FBRTCLogger","FBRTCUrlManager","pageID"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=null,q={openAsCaller:function(r,s,t,u){if(!p&&window.rtcCallChildWindow){p=window.rtcCallChildWindow;window.rtcCallChildWindow=null;}if(this._shouldFocusCallWindow(r)){p.focus();return;}if(this._shouldCloseCallWindow())p.close();g.log('VideoCallLoggerConfig',{event:'open_as_caller'});m.getInstance().logCallAction(r,s,m.CallAction.START_CALL,null,t);var v=new j({peerID:r,callID:s,isCaller:true});v.onCallStarted(t);this._open(r,s,true,v,false,u);},openAsCallee:function(r,s,t,u,v){g.log('VideoCallLoggerConfig',{event:'open_as_callee'});this._open(r,s,false,t,u,v);},_shouldFocusCallWindow:function(r){return p&&!p.closed&&p.rtcCallInProgessWith===r;},_shouldCloseCallWindow:function(){return p&&!p.closed&&!p.rtcCallInProgessWith;},_open:function(r,s,t,u,v,w){h.clear('vcpwn');h.clear('vctid');var x=this._windowPosition(),y=['menubar=no','location=no','scrollbars=no','status=no','personalbar=no',x.height,x.width,x.top,x.left].join(',');if(this._isSparkBrowser())y='';u.addExtraInfo(m.Key.INITIATED_BY_PAGE_ID,o);u.onCallEnded(l.CallEndReason.CLIENT_ERROR,false,true,'PopupPending');u.save(k.getInstance());g.log('VideoCallLoggerConfig',{event:'open_popup'});if(!v){p=window.open('','Video Call',y);this._setUri(p,r,s,t,w);}else{m.getInstance().logCallAction(r,s,m.CallAction.OPEN_POPUP);p=window.open(v,'Video Call',y);}if(window.focus)p.focus();},_setUri:function(r,s,t,u,v){n.getCallUri(s,t,u,v,function(w){m.getInstance().logCallAction(s,t,m.CallAction.OPEN_POPUP);r.location=w;},function(){m.getInstance().logCallAction(s,t,m.CallAction.FAILED_GETTING_URI);});},_windowPosition:function(){var r=960,s=540,t,u,v,w;if(screen&&screen.width>1280){r=1280;s=720;}if(window.innerWidth!==(void 0)){u=window.innerWidth;t=window.innerHeight;}else{u=screen.width;t=screen.height;}if(window.screenLeft!==(void 0)){v=window.screenLeft;w=window.screenTop;}else{v=window.screenX;w=window.screenY;}var x=Math.floor(((u/2)-(r/2))+v),y=Math.floor(((t/2)-(s/2))+w);return {height:'height='+s.toString(),width:'width='+r.toString(),top:'top='+y.toString(),left:'left='+x.toString()};},_isSparkBrowser:function(){return i.isBrowser('Chrome < 34')&&i.isBrowser('Chrome > 33');}};e.exports=q;},null);
__d("FBRTCCore",["Bootloader","FBRTCAvailability","FBRTCCallUI","VideoCallSupport","invariant","randomInt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=false,n={startOutgoingCall:function(o,p,q){k(!isNaN(parseInt(o,10)));if(m)return;m=true;setTimeout(function(){m=false;},1000);if(j.isWebrtcSupported()){var r=this._generateCallID();i.openAsCaller(o,r,p,q);}else g.loadModules(["FBRTCUnsupportedBrowserMessage"],function(s){s.showForOutgoingCall();});},isAvailableForWebrtcCalling:function(o){return h.isCallable(o);},shouldEnableVideoCalling:function(){return j.isOSSupported();},_generateCallID:function(){return l(0,4294967295);}};e.exports=n;},null);
__d("FBRTCMessageListener",["Arbiter","ChannelConstants","invariant","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=[],l=null,m={init:function(){g.subscribe(h.getArbiterType('webrtc'),function(n,o){this._onMessage(o.obj);}.bind(this));},setMessageHandler:function(n,o){i(!l);l=o?n.bind(o):n;while(k.length)l(k.shift());},_onMessage:function(n){this.emit('messageReceived',n);if(l){l(n);}else k.push(n);}};j(m,{messageReceived:true});e.exports=m;},null);
__d("VideoCallCore",["Bootloader","FBRTCCallSummaryUploader","FBRTCCore","FBRTCLogger","FBRTCMessageListener","VideoCallSupport"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=null,n={showOutgoingCallDialog:function(q,r,s){i.startOutgoingCall(q,s||j.Trigger.CHAT_TAB_ICON,false);}};function o(){if(!m)g.loadModules(["FBRTCIncomingCallController","FBRTCIncomingCallDialog","FBRTCMissedVideoCallHandler","FBRTCUnsupportedBrowserMessage"],function(q,r,s,t){m=new q(r,t,(new s(n)));k.setMessageHandler(m.onMessageReceived,m);});}function p(q){return i.isAvailableForWebrtcCalling(q);}if(l.isReceiveWebrtcSupported()){h.init();k.init();k.once('messageReceived',function(q){o();});}e.exports=n;},null);
__d("ChatTabModel",["Arbiter","ArbiterMixin","ChatBehavior","ChatDispatcher","ChatConfig","ChatCookieInterface","ChatTabActions","InitialServerTime","LogHistory","JSLogger","MercuryAssert","MercuryLocalIDs","PresenceState","PresenceUtil","MercuryThreadIDMap","MercuryThreads","MercuryTimestampTracker"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=b('MercuryThreadIDMap').get(),v=b('MercuryThreads').get(),w=b('MercuryTimestampTracker').get(),x=n.serverTime,y=k.get('tab_max_load_age')||3600000,z=20,aa=o.getInstance('chat_tab_model'),ba={tabs:[],promotedID:null,lastChangeTime:0,lastChangeReason:null,isInitialized:false,localRaised:null};function ca(xa){var ya=l.load(xa,ba);ya&&ga();return ya;}function da(xa,ya,za){var ab=ca(s.get());if(ya===(void 0)||ya>ba.lastChangeTime){if(xa()){ab=true;ba.lastChangeReason=za||null;fa(ya);}}else aa.error('rejected',{change_time:ya,state_time:ba.lastChangeTime});ab&&ea();}function ea(){if(ba.isInitialized)va.inform('chat/tabs-changed',va.get());}function fa(xa){if(xa===(void 0))xa=Math.max(w.getLastUserMessageTimestamp()||1,ba.lastChangeTime+1);ba.lastChangeTime=xa;s.doSync();}function ga(xa){var ya=ba.tabs.length-z;if(ya>0)ba.tabs=ba.tabs.filter(function(za){return za.raised||za.id==xa||ya--<=0;});if(ya>0)ba.tabs=ba.tabs.filter(function(za){return za.id==ba.promotedID||za.id==xa||ya--<=0;});}function ha(xa){for(var ya=0;ya<ba.tabs.length;ya++)if(ba.tabs[ya].id==xa)return ya;return -1;}function ia(xa,ya){var za=v.getThreadMetaNow(xa);if(!za)return false;if(za.is_canonical_user){return la(xa,ya);}else{var ab=ka(xa);if(ab)u.getFBIDFromClientID(xa,function(bb){if(oa(xa,bb)){fa();ea();}});return ab;}}function ja(xa){q.isThreadID(xa);if(ka(xa))ea();}function ka(xa){if(ha(xa)===-1){ba.tabs.push({id:xa,fragile:true});aa.log('open_fragile_tab',{tabs:JSON.stringify(ba.tabs),opened:xa,window_id:t.getSessionID()});return true;}return false;}function la(xa,ya){var za=ha(xa);if(za!=-1)if(ba.tabs[za].fragile){ba.tabs.splice(za,1);}else{ya&&(ba.tabs[za].signatureID=ya);return true;}for(var ab=0;ab<=ba.tabs.length;ab++)if(ab==ba.tabs.length||ba.tabs[ab].fragile){ba.tabs.splice(ab,0,{id:xa,signatureID:ya});ga(xa);aa.log('open_tab',{tabs:JSON.stringify(ba.tabs),opened:xa,window_id:t.getSessionID()});return true;}}function ma(xa,ya,za){q.isThreadID(xa);var ab=false;if(ba.localRaised&&ya){ba.localRaised[xa]=true;ab=true;}da(function(){if(ia(xa,za))ab=true;var bb=ha(xa);if(bb!=-1&&!ba.tabs[bb].raised){ba.tabs[bb].raised=true;ab=true;aa.log('raise_tab',{tabs:JSON.stringify(ba.tabs),raised:xa,window_id:t.getSessionID()});}return ab;});}function na(xa){var ya=ha(xa);if(ya!=-1&&(!ba.tabs[ya].raised||ba.promotedID!==xa)){ba.tabs[ya].raised=true;ba.promotedID=xa;return true;}return false;}function oa(xa,ya){var za=ha(xa);if(za!=-1&&ba.tabs[za].fragile){var ab=ba.tabs[za];ab.fragile=false;ab.server_id=ya;var bb=[];ba.tabs.forEach(function(cb){if(cb.id!=xa){if(ab&&cb.fragile){bb.push(ab);ab=null;}bb.push(cb);}});if(ab)bb.push(ab);ba.tabs=bb;aa.log('make_permanent',{tabs:JSON.stringify(ba.tabs),tab_id:xa,window_id:t.getSessionID()});return true;}return false;}function pa(xa,ya){q.isThreadID(xa);var za=false;if(ba.localRaised){delete ba.localRaised[xa];za=true;}da(function(){if(qa(xa))za=true;return za;},(void 0),ya);}function qa(xa){var ya=ha(xa);if(xa==ba.promotedID)ba.promotedID=null;if(ya!=-1){ba.tabs.splice(ya,1);aa.log('close_tab',{tabs:JSON.stringify(ba.tabs),closed:xa,window_id:t.getSessionID()});return true;}return false;}function ra(){if(ba.tabs.length){aa.log('close_all_tabs',{closed_tabs:JSON.stringify(ba.tabs),window_id:t.getSessionID()});ba.tabs=[];ba.promotedID=null;if(ba.localRaised)ba.localRaised={};fa();ea();}}function sa(){var xa=[];for(var ya=0;ya<ba.tabs.length;ya++)if(ba.tabs[ya].fragile&&!v.isNewEmptyLocalThread(ba.tabs[ya].id)){xa.push(ba.tabs[ya]);ba.tabs.splice(ya);ea();break;}aa.log('close_fragile_tabs',{tabs:JSON.stringify(ba.tabs),fragile_closed:xa,window_id:t.getSessionID()});}function ta(xa){q.isThreadID(xa);var ya=false;if(ba.localRaised){delete ba.localRaised[xa];ya=true;}da(function(){var za=ha(xa);if(za!=-1&&ba.tabs[za].raised){delete ba.tabs[za].raised;aa.log('lower_tab',{tabs:JSON.stringify(ba.tabs),lowered:xa,window_id:t.getSessionID()});ya=true;}return ya;});}function ua(){if(ba.localRaised){da(function(){var xa=false;ba.tabs.forEach(function(ya){if(ya.raised!=ba.localRaised[ya.id]){xa=true;if(ba.localRaised[ya.id]){ya.raised=true;}else delete ya.raised;}});return xa;});aa.log('persist_local_raise',{tabs:JSON.stringify(ba.tabs),window_id:t.getSessionID()});}}s.registerStateStorer(function(xa){return l.store(xa,ba);});s.registerStateLoader(function(xa){if(ca(xa))ea();});function va(){}Object.assign(va,h,{isTabPromoted:function(xa){if(xa)return xa==ba.promotedID;return false;},indexOf:function(xa){return ha(xa);},getTab:function(xa){q.isThreadID(xa);var ya=this.indexOf(xa);if(ya>-1){var za=ba.tabs[ya];return Object.assign({},za);}return null;},getEmptyTab:function(){var xa;for(var ya=0;ya<ba.tabs.length;ya++){xa=ba.tabs[ya].id;if(v.isNewEmptyLocalThread(xa))return xa;}xa=r.generateThreadID();v.createNewLocalThread(xa,[]);return xa;},get:function(){var xa=ba.tabs.map(function(ya){var za=Object.assign({},ya);delete za.fragile;if(ba.localRaised)za.raised=ba.localRaised[za.id];return za;});return {tabs:xa,promoted:ba.promotedID};},openTab:function(xa){q.isThreadID(xa);da(ia.bind(null,xa));},promoteThreadInPlaceOfThread:function(xa,ya,za,ab){q.isThreadID(xa);q.isThreadID(ya);da(function(){var bb=ha(xa),cb=ha(ya);if(ab){ba.promotedID=xa;}else if(ba.promotedID===ya)return true;var db=ba.tabs[bb];if(za){q.isThreadID(za);var eb=ha(za),fb=ba.tabs[cb];ba.tabs[cb]=db;ba.tabs.splice(bb,1);ba.tabs.splice(eb,0,fb);}else{ba.tabs[bb]=ba.tabs[cb];ba.tabs[cb]=db;}return true;});}});g.subscribe(p.DUMP_EVENT,function(xa,ya){ya.chat_tabs={promoted:ba.promotedID,tabs:ba.tabs.map(function(za){return Object.assign({},za);}),time:ba.lastChangeTime,max_load_age:y};});function wa(){var xa=i.ignoresRemoteTabRaise();if(xa&&!ba.localRaised){aa.log('start_ignore_remote_raise');ba.localRaised={};ea();}else if(!xa&&ba.localRaised){aa.log('stop_ignore_remote_raise');ba.localRaised=null;ea();}}j.register(function(xa){switch(xa.actionType){case m.Types.CLOSE_TAB:pa(xa.threadID,xa.reason);break;case m.Types.CLOSE_ALL_TABS:ra();break;case m.Types.CLOSE_FRAGILE_TABS:sa();break;case m.Types.LOWER_TAB:ta(xa.threadID);break;case m.Types.OPEN_FRAGILE_TAB:ja(xa.threadID);break;case m.Types.PERSIST_LOCAL_STATE:ua();break;case m.Types.PROMOTE_TAB:q.isThreadID(xa.threadID);da(na.bind(null,xa.threadID));break;case m.Types.RAISE_TAB:ma(xa.threadID,xa.userAction,xa.signatureID);break;}});i.subscribe(i.ON_CHANGED,wa);wa();ca(s.getInitial(),true);if(ba.lastChangeTime===0)ba.lastChangeTime=x-600000;ba.isInitialized=true;e.exports=va;},null);
__d("MessengerDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("MNCommerceActionTypes",["keyMirrorRecursive"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null}});e.exports=h;},null);
__d("MercuryShareAttachmentReactShape",["React"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g,i=h.PropTypes,j=i.shape({share_id:i.string,description:i.string,media:i.shape({image:i.string,image_size:i.shape({height:i.number,width:i.number}),duration:i.number,playable:i.bool,source:i.string}),source:i.string,style_list:i.arrayOf(i.string),subattachments:i.array,target:i.object,title:i.string,properties:i.object,uri:i.string}).isRequired;e.exports=j;},null);
__d("MessengerMomentsAppSnippet.react",["Image.react","MercuryShareAttachmentReactShape","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"MessengerMomentsAppSnippet",propTypes:{attachment:h,isSenderViewer:n.bool,senderName:n.string},render:function(){var p=this.props.attachment;if(!p||!p.target)return null;var q,r=p.target.photo_count;if(this.props.isViewerSender){if(r==1){q=(k._("You synced 1 photo."));}else q=(k._("You synced {photo_count} photos.",[k.param("photo_count",r)]));}else if(r==1){q=(k._("{sender name} synced 1 photo.",[k.param("sender name",this.props.senderName)]));}else q=(k._("{sender name} synced {photo_count} photos.",[k.param("sender name",this.props.senderName),k.param("photo_count",r)]));return (i.createElement("span",{className:"uiIconText _3l6h"},i.createElement(g,{src:l('/images/messaging/docs/generic.png')}),q));}});e.exports=o;},null);
__d("MNCommerceDialogStateStore",["FluxStore","MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';for(var j in g)if(g.hasOwnProperty(j))l[j]=g[j];var k=g===null?null:g.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=g;function l(){g.call(this,h);this.$MNCommerceDialogStateStore0=null;this.$MNCommerceDialogStateStore1=null;}l.prototype.__onDispatch=function(m){var n=m.type;switch(n){case i.DIALOG.SHOW:this.$MNCommerceDialogStateStore0=m.dialogContainer;this.$MNCommerceDialogStateStore1=m.state;this.__emitChange();break;case i.DIALOG.HIDE:this.$MNCommerceDialogStateStore0=null;this.$MNCommerceDialogStateStore1=null;this.__emitChange();break;}};l.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore0;};l.prototype.getState=function(){return this.$MNCommerceDialogStateStore1;};e.exports=new l();},null);
__d("MercuryAttachmentSnippetRenderer",["MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryAudioType","MercuryConstants","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l={getAttachmentSnippetType:function(m){if(this._hasOnlyPhotos(m))return g.PHOTO;if(this._hasOnlyAnimatedImages(m))return g.GIF;if(this._hasOnlyVideo(m))return g.VIDEO;if(this._hasAudioClip(m))return g.AUDIO_CLIP;if(this._hasSticker(m))return g.STICKER;if(this._hasOrion(m))return g.ORION;if(this._hasShare(m))return g.SHARE;if(this._hasError(m))return g.ERROR;return g.MIXED;},renderAttachmentSnippetText:function(m,n,o,p){switch(m){case g.PHOTO:return this._renderPhotoAttachmentSnippetText(n,o,this._getPhotoAttachments(p));case g.GIF:return this._renderAnimatedImagesAttachmentSnippetText(n,o,this._getAnimatedImageAttachments(p));case g.VIDEO:return n?k._("You sent a video."):k._("{sender name} sent a video.",[k.param("sender name",o)]);case g.AUDIO_CLIP:return n?k._("You sent a voice message."):k._("{name} sent a voice message.",[k.param("name",o)]);case g.STICKER:return n?k._("You sent a sticker."):k._("{name} sent a sticker.",[k.param("name",o)]);case g.ORION:if(p&&p[0]&&p[0].metadata)return this.renderOrionSnippetText(n,o,p[0].metadata);break;case g.SHARE:return n?k._("You shared a link."):k._("{sender name} shared a link.",[k.param("sender name",o)]);case g.ERROR:return n?k._("You sent an attachment."):k._("{sender name} sent an attachment.",[k.param("sender name",o)]);default:return '';}},_hasOnlyPhotos:function(m){return this._getPhotoAttachments(m).length===m.length;},_hasOnlyAnimatedImages:function(m){return this._getAnimatedImageAttachments(m).length===m.length;},_hasOnlyVideo:function(m){return (m.length===1&&m[0].attach_type===h.VIDEO);},_hasAudioClip:function(m){var n=m[0].metadata&&m[0].metadata.type;return (m.length===1&&(n===i.AudioClip||n===i.VoiceMessageWithTranscript));},_hasSticker:function(m){return (m.length===1&&m[0].attach_type===h.STICKER);},_hasOrion:function(m){return this._hasSingleAttachmentOfShareDataType(m,j.MercurySupportedShareType.FB_ORION);},_hasSingleAttachmentOfShareDataType:function(m,n){return (m.length===1&&m[0].share_data_type===n);},_hasShare:function(m){return (m.length===1&&m[0].attach_type===h.SHARE);},_hasError:function(m){return (m.length===1&&m[0].attach_type===h.ERROR);},_getPhotoAttachments:function(m){if(!m)return [];return m.filter(function(n){return n.attach_type===h.PHOTO;});},_getAnimatedImageAttachments:function(m){if(!m)return [];return m.filter(function(n){return n.attach_type===h.ANIMATED_IMAGE;});},_renderPhotoAttachmentSnippetText:function(m,n,o){if(o.length===1){if(m){return (k._("You sent a photo."));}else return (k._("{name} sent a photo.",[k.param("name",n)]));}else if(m){return (k._({"*":"You sent {num_photos} photos."},[k.param("num_photos",o.length,[0])]));}else return (k._({"*":"{name} sent {num_photos} photos."},[k.param("name",n),k.param("num_photos",o.length,[0])]));},_renderAnimatedImagesAttachmentSnippetText:function(m,n,o){if(o.length===1){if(m){return (k._("You sent a GIF."));}else return (k._("{name} sent a GIF.",[k.param("name",n)]));}else if(m){return (k._("You sent {num_animated_images} GIFs.",[k.param("num_animated_images",o.length)]));}else return (k._("{name} sent {num_animated_images} GIFs.",[k.param("name",n),k.param("num_animated_images",o.length)]));},renderOrionSnippetText:function(m,n,o,p){if(m){return (k._("You sent {currency}{amount}.",[k.param("currency",o),k.param("amount",p)]));}else return (k._("{name} sent you {currency}{amount}.",[k.param("name",n),k.param("currency",o),k.param("amount",p)]));}};e.exports=l;},null);
__d("P2PMercuryAttachmentSnippet.react",["CurrentUser","Image.react","MercuryAttachmentSnippetRenderer","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"P2PMercuryAttachment",propTypes:{sender:n.object,receiver:n.object,amount:n.string,currency:n.string},getDefaultProps:function(){return {sender:{},receiver:{}};},render:function(){var p=i.renderOrionSnippetText(g.getID()===this.props.sender.id,this.props.sender.name,this.props.currency,this.props.amount);return (j.createElement("span",{className:"uiIconText _3l6h _3_io"},j.createElement(h,{height:12,src:l('/images/p2p/attachment-snippet-icon.png'),width:12}),p));}});e.exports=o;},null);
__d("MercuryShareAttachmentRenderLocations",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CHAT:'chat',CHAT_PREVIEW:'chat_preview',MESSENGER:'messenger',WEB_INBOX:'web_inbox',getValues:function(){return [g.CHAT,g.CHAT_PREVIEW,g.MESSENGER,g.WEB_INBOX];},isPreview:function(h){return h===g.CHAT_PREVIEW;}};e.exports=g;},null);
__d("MNCommerceAttachmentUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={shouldRenderMap:function(h,i){return (!!h&&h.latitude&&h.longitude&&!!i);},getDestinationAddressString:function(h){if(!h)return null;var i=h.street_1;if(!!h.city)i=i+' '+h.city+',';if(!!h.state)i=i+' '+h.state;return i;}};e.exports=g;},null);
__d("MercuryFallbackShareAttachmentSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryFallbackShareAttachmentSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=(j._("You shared a link."));}else o=(j._("{sender name} shared a link.",[j.param("sender name",this.props.senderName)]));return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/messaging/docs/generic.png')}),o));}});e.exports=n;},null);
__d("P2PMercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","P2PMercuryAttachmentSnippet.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i.createClass({displayName:"P2PMercuryShareAttachmentSnippet",propTypes:{attachment:g},render:function(){var k=this.props.attachment?this.props.attachment.target:{};return (i.createElement(h,i.__spread({},k)));}});e.exports=j;},null);
__d("MercuryPhotoShareSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryPhotoShareSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?j._("You sent a photo."):j._("{sender name} sent a photo.",[j.param("sender name",this.props.senderName)]);return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/icons/photo.gif')}),o));}});e.exports=n;},null);
__d("MercuryVideoShareSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryVideoShareSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?j._("You sent a video."):j._("{sender name} sent a video.",[j.param("sender name",this.props.senderName)]);return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/icons/video.gif')}),o));}});e.exports=n;},null);
__d("MercuryMessageLocationShareAttachmentSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryMessageLocationShareAttachmentSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=(j._("You sent a location."));}else o=(j._("{sender name} sent a location.",[j.param("sender name",this.props.senderName)]));return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/messaging/location/location.png')}),o));}});e.exports=n;},null);
__d("MercuryAnimatedShareSnippet.react",["Image.react","React","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=h,m=l.PropTypes,n=h.createClass({displayName:"MercuryAnimatedShareSnippet",propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?j._("You sent a GIF."):j._("{sender name} sent a GIF.",[j.param("sender name",this.props.senderName)]);return (h.createElement("span",{className:"uiIconText _3l6h"},h.createElement(g,{src:k('/images/icons/photo.gif')}),o));}});e.exports=n;},null);
__d("MercuryShareStyleMap",["Map","MercuryConfig","MercuryShareAttachmentRenderLocations","MNCommerceAttachmentUtils","StoryAttachmentStyle","cx","emptyFunction","getModuleLoader","MercuryFallbackShareAttachmentSnippet.react","P2PMercuryShareAttachmentSnippet.react","MessengerMomentsAppSnippet.react","MercuryPhotoShareSnippet.react","MercuryVideoShareSnippet.react","MercuryMessageLocationShareAttachmentSnippet.react","MercuryAnimatedShareSnippet.react"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=new g();o.set(k.FALLBACK,{componentName:'MercuryFallbackShareAttachment.react',componentLoader:n(['MercuryFallbackShareAttachment.react']),getSnippetComponent:function(){return b('MercuryFallbackShareAttachmentSnippet.react');},cx:new g([[i.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:function(q,r){return q.share.media.image&&r;}});o.set(k.ORION,{componentName:'P2PMercuryShareAttachment.react',componentLoader:n(['P2PMercuryShareAttachment.react']),getSnippetComponent:function(){return b('P2PMercuryShareAttachmentSnippet.react');},cx:new g([[i.MESSENGER,"_5i_d _3djc"]])});if(h.WWWMessengerCommerceGK){o.set(k.RETAIL_RECEIPT,{componentName:'MNCommerceReceiptMercuryShareAttachment.react',componentLoader:n(['MNCommerceReceiptMercuryShareAttachment.react']),cx:new g([[i.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:function(q){return q.share&&q.share.target&&Object.keys(q.share.target.items).length===1;}});o.set(k.RETAIL_CANCELLATION,{componentName:'MNCommerceCancelationMercuryShareAttachment.react',componentLoader:n(['MNCommerceCancelationMercuryShareAttachment.react']),cx:new g([[i.MESSENGER,"_5i_d _205d"]])});o.set(k.RETAIL_SHIPMENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:n(['MNCommerceShippingMercuryShareAttachment.react']),cx:new g([[i.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:function(q){var r=q.share&&q.share.target&&q.share.target;return r&&j.shouldRenderMap(r.destination,r.estimated_delivery_display_time);}});o.set(k.RETAIL_SHIPMENT_TRACKING_EVENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:n(['MNCommerceShippingMercuryShareAttachment.react']),cx:new g([[i.MESSENGER,"_5i_d _205d"]])});}if(h.MomentsMessengerWWWGK)o.set(k.MOMENTS_APP_INVITATION,{componentName:'MessengerMomentsAppShareAttachment.react',componentLoader:n(['MessengerMomentsAppShareAttachment.react']),getSnippetComponent:function(){return b('MessengerMomentsAppSnippet.react');},cx:new g([[i.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:m.thatReturnsTrue});o.set(k.PHOTO,{componentName:'MercuryPhotoShareAttachment.react',componentLoader:n(['MercuryPhotoShareAttachment.react']),getSnippetComponent:function(){return b('MercuryPhotoShareSnippet.react');},cx:null,requiresNoBubbleTail:m.thatReturnsTrue,unwrapInStory:m.thatReturnsTrue});o.set(k.IMAGE_SHARE,{componentName:'MercuryImageShareAttachment.react',componentLoader:n(['MercuryImageShareAttachment.react']),getSnippetComponent:function(){return b('MercuryPhotoShareSnippet.react');},cx:null,requiresNoBubbleTail:m.thatReturnsTrue,unwrapInStory:m.thatReturnsTrue});o.set(k.VIDEO,{componentName:'MercuryVideoShareAttachment.react',componentLoader:n(['MercuryVideoShareAttachment.react']),getSnippetComponent:function(){return b('MercuryVideoShareSnippet.react');},cx:null,requiresNoBubbleTail:m.thatReturnsTrue,unwrapInStory:m.thatReturnsTrue});o.set(k.MESSAGE_LOCATION,{componentName:'MercuryMessageLocationShareAttachment.react',componentLoader:n(['MercuryMessageLocationShareAttachment.react']),getSnippetComponent:function(){return b('MercuryMessageLocationShareAttachmentSnippet.react');},cx:new g([[i.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:function(q,r){return q.share.media.image&&r;}});o.set(k.ANIMATED_IMAGE_SHARE,{componentName:'MercuryAnimatedShareAttachment.react',componentLoader:n(['MercuryAnimatedShareAttachment.react']),getSnippetComponent:function(){return b('MercuryAnimatedShareSnippet.react');},cx:null,requiresNoBubbleTail:m.thatReturnsTrue,unwrapInStory:m.thatReturnsFalse});var p={getStyleFactory:function(q){if(!q||!q.style_list)return null;if(q.style_list[0]===k.ATTACHED_STORY){var r=q.subattachments,s=(r&&r.length)?r[0].style_list:[],t=this._getStyleMapEntry(s);if(t&&t.unwrapInStory&&t.unwrapInStory())return {attachment:r[0],factory:t};}var u=this._getStyleMapEntry(q.style_list);if(!u)return null;return {attachment:q,factory:u};},_getStyleMapEntry:function(q){for(var r=0;r<q.length;r++){var s=o.get(q[r]);if(s)return s;}return null;}};e.exports=p;},null);
__d("MercuryShareAttachmentSnippet.react",["MercuryShareAttachmentReactShape","MercuryShareStyleMap","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=i,k=j.PropTypes,l=i.createClass({displayName:"MercuryShareAttachmentSnippet",propTypes:{attachment:g,isSenderViewer:k.bool,senderName:k.string},render:function(){var m=h.getStyleFactory(this.props.attachment);if(m.factory&&!!m.factory.getSnippetComponent){var n=m.factory.getSnippetComponent();return (i.createElement(n,i.__spread({},this.props,{attachment:m.attachment})));}return null;}});e.exports=l;},null);
__d("MercuryAttachmentSnippet.react",["EmoticonsList","Image.react","MercuryAttachment","MercuryAttachmentSnippetRenderer","MercuryAttachmentSnippetType","MercuryAttachmentType","MercuryIDs","P2PMercuryAttachmentSnippet.react","MercuryShareAttachmentSnippet.react","MercuryParticipants","React","StickerConstants","TextWithEmoticons.react","cx","ix","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=q,x=w.PropTypes,y=q.createClass({displayName:"MercuryAttachmentSnippet",propTypes:{thread:x.object.isRequired,viewer:x.string.isRequired},componentWillMount:function(){this._ensureParticipant(this.props.thread.snippet_sender);this._setVariables(this.props);},componentWillReceiveProps:function(ba){this._ensureParticipant(ba.thread.snippet_sender);this._setVariables(ba);},componentWillUnmount:function(){this._cancelParticipantFetch();},render:function(){var ba=this._getSenderName(),ca=j.getAttachmentSnippetType(this._attachments);switch(ca){case k.PHOTO:return this._renderPhotoSnippet(ba);case k.GIF:return this._renderAnimatedImageSnippet(ba);case k.VIDEO:return this._renderVideoSnippet(ba);case k.AUDIO_CLIP:return this._renderAudioClipSnippet(ba);case k.STICKER:return this._renderStickerSnippet(ba);case k.ORION:return this._renderOrionSnippet(ba);case k.SHARE:return this._renderShareSnippet(ba);case k.ERROR:return this._renderError(ba);default:return this._renderMixedSnippet(ba);}},_renderPhotoSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.PHOTO,this._isViewerSender,ba,this._attachments));},_renderAnimatedImageSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.GIF,this._isViewerSender,ba,this._attachments));},_renderVideoSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.VIDEO,this._isViewerSender,ba));},_renderAudioClipSnippet:function(ba){return this._renderSnippet(j.renderAttachmentSnippetText(k.AUDIO_CLIP,this._isViewerSender,ba));},_renderStickerSnippet:function(ba){if(z(this._attachments[0].metadata.stickerID)){return (q.createElement(s,{renderEmoticons:true,text:g.symbols.like}));}else return (q.createElement("span",null,j.renderAttachmentSnippetText(k.STICKER,this._isViewerSender,ba)));},_renderOrionSnippet:function(ba){return (q.createElement("span",null,q.createElement(n,q.__spread({},this._attachments[0].metadata))));},_renderShareSnippet:function(ba){if(!!this._attachments[0].share)return (q.createElement(o,{attachment:this._attachments[0].share,senderName:ba,isViewerSender:this._isViewerSender}));return this._renderSnippet(j.renderAttachmentSnippetText(k.SHARE,this._isViewerSender,ba));},_renderMixedSnippet:function(ba){return (q.createElement("span",null,this._attachments.filter(function(ca){return ca.attach_type===l.FILE||ca.attach_type===l.PHOTO||ca.attach_type===l.VIDEO;}).map(function(ca,da){return this._renderSnippet(ca.name,ca.icon_type,da);}.bind(this))));},_renderSnippet:function(ba,ca,da){var ea=i.getAttachIconClass(ca||this._attachments[0].icon_type),fa=v(ea,"uiIconText _3l6h");return (q.createElement("span",{className:fa,key:da},q.createElement(h,{src:u('/images/messaging/docs/generic.png')}),ba));},_renderError:function(ba){var ca=j.renderAttachmentSnippetText(k.ERROR,this._isViewerSender,ba);return this._renderSnippet(ca);},_setVariables:function(ba){this._viewer=ba.viewer;this._sender=ba.thread.snippet_sender;this._attachments=ba.thread.snippet_attachments;this._isViewerSender=aa(this._sender,this._viewer);},_getSenderName:function(){if(!this._sender||this._isViewerSender)return null;var ba=p.getNow(this._sender);if(!ba)return null;return ba.short_name;},_ensureParticipant:function(ba){if(!ba)return;this._cancelParticipantFetch();if(!p.getNow(ba))this._sub=p.get(ba,function(ca){return this.forceUpdate();}.bind(this));},_cancelParticipantFetch:function(){this._sub&&this._sub.remove();}});function z(ba){return (ba==r.LIKE_STICKER_ID||ba==r.HOT_LIKE_SMALL_STICKER_ID||ba==r.HOT_LIKE_MEDIUM_STICKER_ID||ba==r.HOT_LIKE_LARGE_STICKER_ID);}function aa(ba,ca){return !!(ba&&m.getParticipantIDFromUserID(ca)==ba);}e.exports=y;},null);
__d("MercuryParticipantsImage.react",["MercuryParticipants","React","SplitImage.react","areEqual"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MercuryParticipantsImage",_bigImageToken:(null),propTypes:{participants:l.array.isRequired,size:l.number},getInitialState:function(){return {participantImages:[]};},componentDidMount:function(){this._getParticipantImages(this.props);},componentWillReceiveProps:function(n){this._getParticipantImages(n);},componentWillUnmount:function(){this._bigImageToken&&this._bigImageToken.remove();},shouldComponentUpdate:function(n,o){return (n.size!==this.props.size||!o||!j(o.participantImages,this.state.participantImages));},render:function(){if(this.state.participantImages.length>0)return (h.createElement(i,{border:true,className:this.props.className,srcs:this.state.participantImages,size:this.props.size}));return null;},_getParticipantImages:function(n){this._bigImageToken&&this._bigImageToken.remove();(this)._bigImageToken=g.getOrderedBigImageMulti(n.participants,function(o){this.isMounted()&&this.setState({participantImages:o});}.bind(this));}});e.exports=m;},null);
__d("MercuryThreadImage.react",["ImmutableObject","MercuryIDs","MercuryParticipantsImage.react","MercuryParticipantsConstants","Pixelz.react","React","areEqual"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p=l.createClass({displayName:"MercuryThreadImage",propTypes:{thread:o.instanceOf(g).isRequired,viewer:o.string.isRequired,size:o.number,useBackground:o.bool},shouldComponentUpdate:function(q,r){return (q.thread.image_src!==this.props.thread.image_src||!m(q.thread.participants,this.props.thread.participants)||q.size!==this.props.size||q.viewer!==this.props.viewer||q.useBackground!==this.props.useBackground);},render:function(){var q=this.props.size||j.BIG_IMAGE_SIZE,r=this.props.thread.image_src;if(r){if(this.props.useBackground)return (l.createElement("div",{style:{height:q,backgroundImage:("url("+r+")"),backgroundPosition:'50% 50%',backgroundRepeat:'no-repeat',backgroundSize:'cover',width:q}}));return (l.createElement(k,{height:q,resizeMode:'cover',src:r,width:q}));}var s=h.getParticipantIDFromUserID(this.props.viewer),t=this.props.thread.participants.filter(function(v){return v!==s;}),u=[];if(!t.length){u=[s];}else if(t.length==1){u=t;}else u=t.slice(0,3);return (l.createElement(i,{participants:u,size:q}));}});e.exports=p;},null);
__d("MercuryParticipantListRenderer",["fbt"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';function h(){this.$MercuryParticipantListRenderer0=false;this.$MercuryParticipantListRenderer1=false;this.$MercuryParticipantListRenderer2=false;this.$MercuryParticipantListRenderer3=function(r){return this.$MercuryParticipantListRenderer1?r.short_name:r.name;}.bind(this);}h.prototype.renderParticipantList=function(r){var s=r.map(this.$MercuryParticipantListRenderer3);switch(s.length){case 0:return i(this.$MercuryParticipantListRenderer0);case 1:return j(s);case 2:return this.$MercuryParticipantListRenderer2?l(s):k(s);case 3:return this.$MercuryParticipantListRenderer2?n(s):m(s);default:return this.$MercuryParticipantListRenderer2?p(s):o(s);}};h.prototype.setIsNewThread=function(r){this.$MercuryParticipantListRenderer0=r;return this;};h.prototype.setNameRenderer=function(r){this.$MercuryParticipantListRenderer3=r;return this;};h.prototype.setUseShortName=function(r){this.$MercuryParticipantListRenderer1=r;return this;};h.prototype.setUseAndSeparator=function(r){this.$MercuryParticipantListRenderer2=r;return this;};function i(r){if(r){return (g._("New Message"));}else return (g._("No Participants"));}function j(r){return r[0];}function k(r){return (g._("{participant1}, {participant2}",[g.param("participant1",r[0]),g.param("participant2",r[1])]));}function l(r){return (g._("{participant1} and {participant2}",[g.param("participant1",r[0]),g.param("participant2",r[1])]));}function m(r){return (g._("{participant1}, {participant2}, {participant3}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2])]));}function n(r){return (g._("{participant1}, {participant2} and {participant3}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2])]));}function o(r){return (g._("{participant1}, {participant2}, {participant3}, {others_link}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("participant3",r[2]),g.param("others_link",q(r.length-3))]));}function p(r){return (g._("{participant1}, {participant2} and {others_link}",[g.param("participant1",r[0]),g.param("participant2",r[1]),g.param("others_link",q(r.length-2))]));}function q(r){if(r>1){return (g._({"*":"{others_count} others"},[g.param("others_count",r,[0])]));}else return (g._("1 other"));}e.exports=h;},null);
__d("MercuryThreadTitle.react",["MercuryIDs","MercuryParticipantListRenderer","MercuryParticipants","React","TextWithEmoticons.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"MercuryThreadTitle",propTypes:{isNewThread:n.bool,thread:n.object.isRequired,viewer:n.string.isRequired,showUnreadCount:n.bool,useShortName:n.bool,useAndSeparator:n.bool},getDefaultProps:function(){return {isNewThread:false,showUnreadCount:false,useShortName:false,useAndSeparator:false};},getInitialState:function(){return {participantNames:''};},componentDidMount:function(){this._renderParticipantsList(this.props);},componentWillReceiveProps:function(p){this._renderParticipantsList(p);},render:function(){return (j.createElement("span",{className:this.props.className},this.props.thread.name?this._renderThreadTitle():this.state.participantNames,this.props.children));},getTitle:function(){return this.state.participantNames;},_renderThreadTitle:function(){var p=this.props.thread,q=j.createElement(k,{renderEmoticons:true,renderEmoji:true,text:p.name});if(!p.unread_count||!this.props.showUnreadCount)return q;return this._renderTitleWithUnreadCount(q,p.unread_count);},_renderParticipantsList:function(p){if(p.thread.name)return;var q=g.getParticipantIDFromUserID(p.viewer),r=p.thread.participants;if(r.length>1)r=r.filter(function(s){return s!=q;});i.getMulti(r,function(s){if(!this.isMounted())return;var t=r.map(function(w){return s[w];}),u=new h().setUseShortName(this.props.useShortName).setUseAndSeparator(this.props.useAndSeparator).setIsNewThread(this.props.isNewThread).renderParticipantList(t),v=(p.showUnreadCount&&p.thread.unread_count)?this._renderTitleWithUnreadCount(u,p.thread.unread_count):u;this.setState({participantNames:v});}.bind(this));},_renderTitleWithUnreadCount:function(p,q){return (l._("{conversation-title} ({unread-count})",[l.param("conversation-title",p),l.param("unread-count",q)]));}});e.exports=o;},null);
__d("WebMessengerThreadPermalinks",["MercuryIDs","MessagingTag","URI","WebMessengerPermalinkConstants","WWWBase","requireWeak"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m={getThreadURI:function(q,r,s){if(g.isCanonical(q)){n(q,r,s);}else o(q,r,s);}};function n(q,r,s){var t=new i(k.uri),u=g.tokenize(q).value;t.setPath(p(s)+'/'+u);r&&r(t.toString());}function o(q,r,s){l(['MercuryThreadIDMap'],function(t){var u=t.get();u.getFBIDFromClientID(q,function(v){var w=new i(k.uri);w.setPath(j.getURIPathForThreadID(v,p(s)));r&&r(w.toString());});});}function p(q){var r=j.BASE_PATH;if(q&&q!=h.INBOX)r+='/'+q;return r;}e.exports=m;},null);
__d("MercuryMessageInfo",["MercuryActionStatus","MercuryViewer"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={isOutbound:function(j){return j.author===h.getID();},isInbound:function(j){return !i.isOutbound(j);},isSending:function(j){return (j.status===g.UNSENT||j.status===g.UNCONFIRMED||j.status===g.UNABLE_TO_CONFIRM||j.status===g.RESENDING);},hasError:function(j){return (j.status===g.FAILED_UNKNOWN_REASON||j.status===g.UNABLE_TO_CONFIRM||j.status===g.ERROR);}};e.exports=i;},null);
__d("MercuryErrorInfo",["MercuryErrorType","MercuryMessageInfo","fbt"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={getMessage:function(k){var l='';if(j.isConnectionError(k)){l=i._("This message didn't send.");if(j.isTransient(k))l=i._("{message} Check your internet connection and click to try again.",[i.param("message",l)]);}else{if(k&&k.description){l=k.description;}else l=i._("This message failed to send.");if(j.isTransient(k))l=i._("{message} Click to send again.",[i.param("message",l)]);}return l;},isConnectionError:function(k){if(k&&k.type==g.TRANSPORT)return k.code===1001||k.code===1004||k.code===1006;return false;},isTransient:function(k){return k&&k.is_transient;},isPermanent:function(k){return k?!this.isTransient(k):false;},hasErrorStatus:function(k){return h.hasError(k);}};e.exports=j;},null);
__d("MercuryChannelHandler",["Arbiter","ChannelConstants","MercuryActionType","MercuryGlobalActionType","MercuryMessages","MercuryPayloadSource","MercuryServerRequests","MercurySingletonMixin","MercuryThreadInformer","MercuryViewer","MessagingEvent","MessagingReliabilityLogger","MessagingTag","PresenceUtil","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=v(n);for(var x in w)if(w.hasOwnProperty(x))z[x]=w[x];var y=w===null?null:w.prototype;z.prototype=Object.create(y);z.prototype.constructor=z;z.__superConstructor__=w;function z(aa){"use strict";this.$MercuryChannelHandler0=aa;this.__serverRequests=m.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler1=o.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler2=k.getForFBID(this.$MercuryChannelHandler0);this.$MercuryChannelHandler3=[];}z.prototype.getInstanceFBID=function(){"use strict";return this.$MercuryChannelHandler0;};z.prototype.$MercuryChannelHandler4=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||!ba.obj.message){r.addEntry('channel_receive','invalid_data');return;}var ca=ba.obj.message,da=ca.other_user_fbid?ca.other_user_fbid:ca.thread_fbid,ea={author:ca.mercury_author_id,author_email:ca.mercury_author_email,body:ca.body,subject:ca.subject,has_attachment:ca.has_attachment,attachments:ca.attachments,html_body:ca.html_body,thread_id:ca.tid,thread_fbid:ca.thread_fbid,other_user_fbid:ca.other_user_fbid,message_id:ca.mid,is_spoof_warning:ca.is_spoof_warning,ranges:ca.ranges,source:ca.mercury_source,source_tags:ca.mercury_source_tags,threading_id:ca.threading_id,timestamp:ca.timestamp,timestamp_absolute:ca.timestamp_absolute,timestamp_relative:ca.timestamp_relative,timestamp_time_passed:ca.timestamp_time_passed,action_type:i.USER_GENERATED_MESSAGE,is_unread:ca.is_unread,is_forward:false,forward_count:ca.forward_count||ca.forward,forward_message_ids:ca.forward_msg_ids,folder:ba.obj.folder};if("sync_id" in ca){ea.sync_id=ca.sync_id;}else ea.action_id=ca.action_id;var fa=[u({},ea)];fa=fa.concat(ca.forward_actions||[]);var ga=l.CLIENT_CHANNEL_MESSAGE;this.__serverRequests.handleUpdateWaitForThread({actions:fa,payload_source:ga},da);if(!ca.is_unread&&p.isViewer(ca.mercury_author_id)){var ha={};ha[da]=ba.obj.folder;this.$MercuryChannelHandler6(this.__getMessagingPayloadType(),{obj:{event:q.READ,thread_fbids:ca.thread_fbid?[ca.thread_fbid]:[],other_user_fbids:ca.other_user_fbid?[ca.other_user_fbid]:[],folder_info:ha,timestamp:ca.timestamp}});}r.addEntry('channel_receive','success',[da,ea.message_id,t.getSessionID()]);};z.prototype.$MercuryChannelHandler6=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=[],da=ba.obj.event==q.READ;(ba.obj.thread_fbids||[]).forEach(function(ea){ca.push({action_type:i.CHANGE_READ_STATUS,action_id:null,thread_fbid:ea,mark_as_read:da,timestamp:ba.obj.timestamp||0,folder:ba.obj.folder_info[ea]});});(ba.obj.other_user_fbids||[]).forEach(function(ea){ca.push({action_type:i.CHANGE_READ_STATUS,action_id:null,other_user_fbid:ea,mark_as_read:da,timestamp:ba.obj.timestamp||0,folder:ba.obj.folder_info[ea]});});this.__serverRequests.handleUpdate({actions:ca,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler7=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||!(ba.obj.thread_fbids||ba.obj.other_user_fbids))return;var ca=[];(ba.obj.thread_fbids||[]).forEach(function(da){ca.push({action_type:i.DELETE_THREAD,action_id:null,thread_fbid:da});});(ba.obj.other_user_fbids||[]).forEach(function(da){ca.push({action_type:i.DELETE_THREAD,action_id:null,other_user_fbid:da});});this.__serverRequests.handleUpdate({actions:ca,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler8=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids)||!ba.obj.mids)return;var ca=ba.obj.thread_fbids.length?ba.obj.thread_fbids[0]:null,da=ba.obj.other_user_fbids.length?ba.obj.other_user_fbids[0]:null,ea={action_type:i.DELETE_MESSAGES,action_id:null,thread_fbid:ca,other_user_fbid:da,message_ids:ba.obj.mids};this.__serverRequests.handleUpdate({actions:[ea],threads:[ba.obj.updated_thread],payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandler9=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||!ba.obj.folder)return;var ca={action_type:j.MARK_ALL_READ,action_id:ba.obj.action_id,folder:ba.obj.folder};this.__serverRequests.handleUpdate({global_actions:[ca]});};z.prototype.$MercuryChannelHandlera=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=l.CLIENT_CHANNEL_MESSAGE;(ba.obj.thread_fbids||[]).forEach(function(da){var ea={action_type:i.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:da,other_user_fbid:null,archived:ba.obj.state};this.__serverRequests.handleUpdateWaitForThread({actions:[u({},ea)],payload_source:ca},da);},this);(ba.obj.other_user_fbids||[]).forEach(function(da){var ea={action_type:i.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_user_fbid:da,archived:ba.obj.state};this.__serverRequests.handleUpdateWaitForThread({actions:[u({},ea)],payload_source:ca},da);},this);};z.prototype.$MercuryChannelHandlerb=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||(!ba.obj.thread_fbids&&!ba.obj.other_user_fbids))return;var ca=l.CLIENT_CHANNEL_MESSAGE,da;(ba.obj.thread_fbids||[]).forEach(function(ea){if(ba.obj.event==q.TAG){da=ba.obj.tag;}else da=ba.obj.marked_as_spam?s.SPAM:s.INBOX;var fa={action_type:i.CHANGE_FOLDER,action_id:null,thread_fbid:ea,other_user_fbid:null,new_folder:da};this.__serverRequests.handleUpdateWaitForThread({actions:[u({},fa)],payload_source:ca},ea);},this);(ba.obj.other_user_fbids||[]).forEach(function(ea){if(ba.obj.event==q.TAG){da=ba.obj.tag;}else da=ba.obj.marked_as_spam?s.SPAM:s.INBOX;var fa={action_type:i.CHANGE_FOLDER,action_id:null,other_user_fbid:ea,thread_fbid:null,new_folder:da};this.__serverRequests.handleUpdateWaitForThread({actions:[u({},fa)],payload_source:ca},ea);},this);};z.prototype.$MercuryChannelHandlerc=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj.tag)return;switch(ba.obj.tag){case s.ACTION_ARCHIVED:this.$MercuryChannelHandlera(aa,ba);break;case s.INBOX:case s.OTHER:this.$MercuryChannelHandlerb(aa,ba);break;}};z.prototype.__markAsSeen=function(aa,ba){"use strict";if(!this.$MercuryChannelHandlerd(aa)||!ba.obj||!ba.obj.seen_timestamp)return;this.__serverRequests.handleUpdate({message_counts:[{seen_timestamp:ba.obj.seen_timestamp,folder:s.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:s.INBOX}],payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.__updateModelsFromMercuryPayload=function(aa,ba){"use strict";if(!this.$MercuryChannelHandlere(aa)||!ba.obj)return;this.$MercuryChannelHandler1.synchronizeInforms(function(){var ca=ba.obj,da=[];(ca.actions||[]).forEach(function(ea){var fa=i.USER_GENERATED_MESSAGE;if(ea.action_type==i.LOG_MESSAGE){var ga=l.CLIENT_CHANNEL_MESSAGE,ha;ha=ea.other_user_fbid||ea.thread_fbid;this.__serverRequests.handleUpdateWaitForThread({actions:[u({},ea)],payload_source:ga},ha);}else if(ea.action_type!=fa)da.push(ea);},this);ca.actions=da;ca.payload_source=l.CLIENT_CHANNEL_MESSAGE;this.__serverRequests.handleUpdate(ca);}.bind(this));};z.prototype.$MercuryChannelHandlerf=function(aa,ba){"use strict";this.__serverRequests.handleRoger(ba.obj);};z.prototype.$MercuryChannelHandlerg=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||ba.obj.is_message_blocked===(void 0)||!ba.obj.thread_fbid)return;var ca=i.UPDATE_BLOCK_STATUS,da=[{action_type:ca,action_id:null,thread_fbid:ba.obj.thread_fbid,is_message_blocked:ba.obj.is_message_blocked}];this.__serverRequests.handleUpdate({actions:da,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.$MercuryChannelHandlerh=function(aa,ba){"use strict";if(!this.$MercuryChannelHandler5(aa)||!ba.obj||ba.obj.mute_settings===(void 0)||(!ba.obj.thread_fbid&&!ba.obj.other_user_fbid))return;var ca=i.CHANGE_MUTE_SETTINGS,da=[{action_type:ca,action_id:null,thread_fbid:ba.obj.thread_fbid,other_user_fbid:ba.obj.other_user_fbid,mute_settings:ba.obj.mute_settings}];this.__serverRequests.handleUpdate({actions:da,payload_source:l.CLIENT_CHANNEL_MESSAGE});};z.prototype.__handleMessagingPayload=function(aa,ba){"use strict";switch(ba.obj.event){case q.DELIVER:this.$MercuryChannelHandler4(aa,ba);break;case q.READ:case q.UNREAD:this.$MercuryChannelHandler6(aa,ba);break;case q.READ_ALL:this.$MercuryChannelHandler9(aa,ba);break;case q.DELETE:this.$MercuryChannelHandler7(aa,ba);break;case q.DELETE_MESSAGES:this.$MercuryChannelHandler8(aa,ba);break;case q.TAG:this.$MercuryChannelHandlerc(aa,ba);break;case q.REPORT_SPAM:this.$MercuryChannelHandlerb(aa,ba);break;case q.READ_RECEIPT:this.$MercuryChannelHandlerf(aa,ba);break;case q.CHANGE_MUTE_SETTINGS:this.$MercuryChannelHandlerh(aa,ba);break;case q.UPDATE_BLOCK_STATUS:this.$MercuryChannelHandlerg(aa,ba);break;}};z.prototype.getRouting=function(){"use strict";return {mercury:this.__updateModelsFromMercuryPayload,messaging:this.__handleMessagingPayload,inbox:this.__markAsSeen};};z.prototype.__getMessagingPayloadType=function(){"use strict";return h.getArbiterType('messaging');};z.prototype.__getMercuryPayloadType=function(){"use strict";return h.getArbiterType('mercury');};z.prototype.__getInboxPayloadType=function(){"use strict";return h.getArbiterType('inbox');};z.prototype.$MercuryChannelHandler5=function(aa){"use strict";return (aa==this.__getMessagingPayloadType());};z.prototype.$MercuryChannelHandlere=function(aa){"use strict";return (aa==this.__getMercuryPayloadType());};z.prototype.$MercuryChannelHandlerd=function(aa){"use strict";return (aa==this.__getInboxPayloadType());};z.prototype.turnOn=function(){"use strict";if(!this.$MercuryChannelHandler3.length){var aa=this.getRouting();for(var ba in aa)this.$MercuryChannelHandler3.push(g.subscribe(h.getArbiterType(ba),aa[ba].bind(this)));}return this;};z.prototype.turnOff=function(){"use strict";if(this.$MercuryChannelHandler3.length){this.$MercuryChannelHandler3.forEach(g.unsubscribe);this.$MercuryChannelHandler3=[];}return this;};u(z,n);e.exports=z;},null);
__d("MercuryRoger",["Arbiter","ArbiterMixin","immutable","JSLogger","MercuryActionStatus","MercuryDispatcher","MercurySingletonMixin","MercuryThreads","mixin","mapObject"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=k.SUCCESS,r=o(h);for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(x){"use strict";this.$MercuryRoger0={};this.$MercuryRoger1=[];this.$MercuryRoger2=x;this.$MercuryRoger3=l.getForFBID(this.$MercuryRoger2);this.$MercuryRoger4=n.getForFBID(this.$MercuryRoger2);this.$MercuryRoger3.subscribe('update-roger',function(y,z){for(var aa in z){var ba=this.$MercuryRoger0[aa]||i.OrderedMap();ba=ba.withMutations(function(ca){for(var da in z[aa]){var ea=this.$MercuryRoger4.getThreadMetaNow(aa);if(ea&&ea.participants)if(ea.participants.indexOf(da)==-1){this.$MercuryRoger1.push(w(this.$MercuryRoger0));continue;}var fa=ca.get(da),ga=z[aa][da];if(!fa||ga>fa)ca.set(da,ga);}}.bind(this));this.$MercuryRoger0[aa]=ba.sort();}z&&this.inform('change',z);}.bind(this));g.subscribe(j.DUMP_EVENT,function(y,z){z.bad_read_receipts={receipts:this.$MercuryRoger1};}.bind(this));}u.prototype.getSeenBy=function(x,y){"use strict";if(!x)return [];var z=[],aa=this.$MercuryRoger0[x.thread_id];if(!aa)return z;aa.forEach(function(ba,ca){if(v(x,ba,ca,y))z.push(ca);});return z;};u.prototype.wasSeenByAll=function(x){"use strict";if(!x)return false;var y=this.$MercuryRoger0[x.thread_id];if(!y)return false;return y.every(function(z,aa){return v(x,z,aa);});};u.prototype.getSeenTimestamps=function(x){"use strict";var y=this.$MercuryRoger0[x];if(!y){y=i.OrderedMap();this.$MercuryRoger0[x]=y;}return y;};u.prototype.getSeenTimestamp=function(x,y){"use strict";var z=this.$MercuryRoger0[x];return z?z.get(y):null;};Object.assign(u,m);function v(x,y,z,aa){return !!(y>x.timestamp&&(x.status===(void 0)||x.status===q)&&(!aa||z!=x.author));}function w(x){return p(x,function(y){return y.toJS();});}e.exports=u;},null);
__d("MercuryDelayedRoger",["ArbiterMixin","LiveTimer","MercuryActionStatus","MercuryConfig","setTimeoutAcrossTransitions","MercuryMessages","MercuryRoger","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=b('MercuryMessages').get(),m=b('MercuryRoger').get(),n=b('MercuryThreadInformer').get(),o=b('MercuryThreads').get(),p={},q={},r=j['roger.seen_delay'],s={getSeenBy:function(y,z){if(q[y])return [];return m.getSeenBy(t(y),z);},wasSeenByAll:function(y){if(q[y])return false;return m.wasSeenByAll(t(y));}};Object.assign(s,g);function t(y){if(!p[y]){var z=o.getThreadMetaNow(y);if(z)p[y]={thread_id:y,author:z.participants[0],timestamp:z.timestamp};}return p[y];}function u(y){var z=false;l.getThreadMessagesRange(y,0,1,function(aa){var ba=aa[0];if(!ba)return;var ca=ba.timestamp;if(ba.action_id||ba.status==i.SUCCESS)ca-=h.getServerTimeOffset();var da=s.getSeenBy(y);if(q[y]){clearTimeout(q[y]);delete q[y];}var ea=ca+r,fa=ea-Date.now();if(fa>0)q[y]=k(function(){delete q[y];v(y);},fa);p[y]=ba;var ga=s.getSeenBy(y);if(da.length||ga.length)z=true;});return z;}function v(y){var z={};z[y]=true;w(z);}function w(y){s.inform('state-changed',y);s.inform('change');}function x(event,y){var z={};for(var aa in y)if(u(aa))z[aa]=true;for(var ba in z){w(z);break;}}m.subscribe('change',function(y,z){for(var aa in z)!q[aa]&&v(aa);});n.subscribe('messages-received',x);n.subscribe('messages-reordered',x);n.subscribe('messages-updated',x);e.exports=s;},null);
__d("MercuryDeliveryState",["MercuryConfig","MercuryIDs","MercuryServerRequests","MercurySingletonMixin","MercuryThreadInformer","PresencePrivacy","UserActivity","debounceAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=g.delivery_timeout||120000;function p(q){this.$MercuryDeliveryState0=q;this.$MercuryDeliveryState1=i.getForFBID(this.$MercuryDeliveryState0);this.$MercuryDeliveryState2=k.getForFBID(this.$MercuryDeliveryState0);this.$MercuryDeliveryState3=[];this.$MercuryDeliveryState2.subscribe('messages-received',this.$MercuryDeliveryState4.bind(this));m.subscribe(n(this.$MercuryDeliveryState5,300,this));}p.prototype.$MercuryDeliveryState4=function(q,r){for(var s in r){var t=r[s];t.forEach(function(u){if(this.$MercuryDeliveryState7(u))this.$MercuryDeliveryState3.push(u);}.bind(this));}if(m.isActive(o))this.$MercuryDeliveryState5();};p.prototype.$MercuryDeliveryState5=function(){if(this.$MercuryDeliveryState3.length===0)return;var q=this.$MercuryDeliveryState3.filter(this.$MercuryDeliveryState7,this).map(function(r){return r.message_id;});if(q)this.$MercuryDeliveryState1.sendDeliveryReceipts(q);this.$MercuryDeliveryState3=[];};p.prototype.$MercuryDeliveryState7=function(q){var r=q.author?h.getUserIDFromParticipantID(q.author):null;if(r===this.$MercuryDeliveryState0)return false;if(!q.is_unread)return false;if(!l.allows(r))return false;return true;};Object.assign(p,j);e.exports=p;},null);
__d("MercuryFilters",["MessagingTag","arrayContains"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=[g.UNREAD],j={ALL:'all',UNREAD:g.UNREAD,getSupportedFilters:function(){return i.concat();},isSupportedFilter:function(k){return h(i,k);}};e.exports=j;},null);
__d("MercuryOrderedThreadlist",["LogHistory","MercuryActionType","MercuryDispatcher","MercuryConfig","MercuryFilters","MercuryFolders","MercuryGlobalActionType","MercuryPayloadSource","MercurySingletonMixin","MercuryThreadIDMap","MessagingTag","PageMessageEnumTag","RangedCallbackManager","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","arrayContains","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){b.__markCompiled&&b.__markCompiled();'use strict';var y=g.getInstance('ordered_threadlist_model'),z=k.getSupportedFilters().concat([k.ALL,q.GROUPS]),aa=l.getSupportedFolders();function ba(la,ma,na,oa){var pa=[],qa=false,ra=false,sa=(ma||[]).filter(function(za){var ab=za.filter||k.ALL;return (za.folder==na||(!za.folder&&na==q.INBOX))&&ab==oa;}),ta=la._threadlistOrderMap[na][oa].getAllResources(),ua;sa.forEach(function(za){pa=pa.concat(za.thread_ids);if(za.error){if(za.end>ta.length)ra=za.error;}else{var ab=za.end-za.start;if(za.thread_ids.length<ab)qa=true;}if(!ua||za.end>ua)ua=za.end;});fa(la,pa,na,oa);if(qa){la._threadlistOrderMap[na][oa].setReachedEndOfArray();}else if(ra){la._threadlistOrderMap[na][oa].setError(ra);}else{var va=la._threadlistOrderMap[na][oa].getCurrentArraySize();if(ua&&va<ua){var wa={},xa=ta.concat(pa),ya=xa.filter(function(za){var ab=wa[za];wa[za]=true;return ab;});if(ya.length){y.warn('duplicate_threads',{folder:na,expected_final_size:ua,actual_final_size:va,duplicate_thread_ids:ya});la._serverRequests.fetchThreadlistInfo(ua,ya.length,na,oa==k.ALL?null:oa);}}}}function ca(la,ma){aa.forEach(function(na){z.forEach(function(oa){ba(la,ma,na,oa);});});}function da(la,ma){var na={};aa.forEach(function(oa){na[oa]={};z.forEach(function(pa){na[oa][pa]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}};});});ma.forEach(function(oa){if(oa.is_forward)return;var pa=oa.thread_id,qa=ga(la,pa),ra=ha(la,pa);function sa(){ra.forEach(function(ua){if(!w(z,ua))return;na[qa][ua].to_add.push(pa);if(!la._threadlistOrderMap[qa][ua].hasReachedEndOfArray()&&!la._threadlistOrderMap[qa][ua].hasResource(pa))na[qa][ua].to_remove_if_last_after_add[pa]=true;});}function ta(ua){if(w(z,ua))if(w(ra,ua)){na[qa][ua].to_add.push(pa);}else na[qa][ua].to_remove.push(pa);}if(!qa){if(oa.action_type===h.CHANGE_FOLDER||oa.action_type===h.CHANGE_ARCHIVED_STATUS)aa.forEach(function(ua){if(ua!==qa)z.forEach(function(va){la._threadlistOrderMap[ua][va].removeResources([pa]);});});return;}switch(oa.action_type){case h.DELETE_THREAD:ra.forEach(function(ua){if(!w(z,ua))return;na[qa][ua].to_remove.push(pa);});break;case h.CHANGE_ARCHIVED_STATUS:case h.CHANGE_FOLDER:sa();break;case h.CHANGE_READ_STATUS:ta(q.UNREAD);break;case h.USER_GENERATED_MESSAGE:case h.LOG_MESSAGE:ra.forEach(function(ua){if(!w(z,ua))return;if(ia(la,pa,qa,ua))na[qa][ua].to_add.push(pa);});break;case h.CHANGE_FLAG:ta(r.FLAG);break;}});aa.forEach(function(oa){z.forEach(function(pa){var qa=la._threadlistOrderMap[oa][pa];fa(la,na[oa][pa].to_add,oa,pa);for(var ra=qa.getCurrentArraySize()-1;ra>=0;ra--){var sa=qa.getResourceAtIndex(ra);if(!na[oa][pa].to_remove_if_last_after_add[sa])break;na[oa][pa].to_remove.push(sa);}qa.removeResources(na[oa][pa].to_remove);});});}function ea(la,ma){var na={};aa.forEach(function(oa){na[oa]={};z.forEach(function(pa){na[oa][pa]=[];});});ma.forEach(function(oa){var pa=ga(la,oa.thread_id),qa=ha(la,oa.thread_id);if(pa)qa.forEach(function(ra){if(ia(la,oa.thread_id,pa,ra))na[pa][ra].push(oa.thread_id);});});aa.forEach(function(oa){z.forEach(function(pa){if(na[oa][pa].length>0)fa(la,na[oa][pa],oa,pa);});});}function fa(la,ma,na,oa){oa=oa||k.ALL;la._threadlistOrderMap[na][oa].addResources(ma);aa.forEach(function(pa){if(pa!=na)la._threadlistOrderMap[pa][oa].removeResources(ma);});}function ga(la,ma){var na=la._threads.getThreadMetaNow(ma),oa=null;if(!na){oa='No thread metadata';}else if(!na.folder)oa='No thread folder';if(oa){var pa={error:oa,tid:ma};y.warn('no_thread_folder',pa);return null;}var qa=na.folder;if(na.is_archived)qa=q.ACTION_ARCHIVED;if(la._threadlistOrderMap[qa]){return qa;}else return null;}function ha(la,ma){var na=la._threads.getThreadMetaNow(ma),oa=[k.ALL];if(!na){var pa={error:'no_thread_metadata',tid:ma};y.warn('no_thread_metadata',pa);return [];}if(na.unread_count)oa.push(q.UNREAD);if(!na.is_canonical)oa.push(q.GROUPS);var qa=na.page_thread_info;if(qa&&qa.flagged)oa.push(r.FLAG);return oa;}function ia(la,ma,na,oa){var pa=la._threads.getThreadMetaNow(ma);return pa&&pa.timestamp&&ga(la,ma)==na&&w(ha(la,ma),oa);}function ja(la){this._fbid=la;this._serverRequests=t.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threadInformer=u.getForFBID(this._fbid);this._threads=v.getForFBID(this._fbid);this._dispatcher=i.getForFBID(this._fbid);this._threadlistOrderMap={};aa.forEach(function(ma){this._threadlistOrderMap[ma]={};z.forEach(function(na){this._threadlistOrderMap[ma][na]=new s(function(oa){return this._threads.getThreadMetaNow(oa).timestamp;}.bind(this),function(oa,pa){return pa-oa;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}.bind(this));}.bind(this));this._dispatcher.subscribe('update-threadlist',function(ma,na){if(!ka(na))return;if(j.MessengerJewelUnread!=='none')if(na.global_actions)na.global_actions.forEach(function(qa){if(qa.action_type==m.MARK_ALL_READ)this.getThreadlistOrderMap(qa.folder,k.UNREAD).removeAllResources();}.bind(this));var oa=na.ordered_threadlists;if(oa&&oa.length){ca(this,oa);}else{var pa=(na.actions||[]).filter(function(qa){return qa.thread_id;});ea(this,na.threads||[]);da(this,pa);}this._threadInformer.updatedThreadlist();}.bind(this));}Object.assign(ja.prototype,{getThreadlistOrderMap:function(la,ma){if(!this._threadlistOrderMap[la][ma]){z=z.concat([ma]);aa.forEach(function(na){this._threadlistOrderMap[na][ma]=new s(function(oa){return this._threads.getThreadMetaNow(oa).timestamp;}.bind(this),function(oa,pa){return pa-oa;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}.bind(this));}return this._threadlistOrderMap[la][ma];},getThreadlist:function(la,ma,na,oa,pa,qa){return this.getFilteredThreadlist(la,ma,na,k.ALL,oa,pa,qa);},getFilteredThreadlist:function(la,ma,na,oa,pa,qa,ra){var sa=this.getThreadlistOrderMap(na,oa),ta=sa.executeOrEnqueue(la,ma,pa,qa),ua=sa.getUnavailableResources(ta),va=sa.getError(la,ma,qa);if(ua.length||va){if(sa.getCurrentArraySize()<la){var wa={start:la,limit:ma,filter:oa,resources_size:sa.getCurrentArraySize()};y.warn('range_with_gap',wa);}sa.setError(false);this._serverRequests.fetchThreadlistInfo(sa.getCurrentArraySize(),ua.length,na,oa==k.ALL?null:oa,ra);}return ta;},getThreadlistUntilTimestamp:function(la,ma,na){na=na||k.ALL;return this.getThreadlistOrderMap(ma,na).getElementsUntil(la);},getAvailableThreadlistNow:function(la,ma){ma=ma||k.ALL;return this.getThreadlistOrderMap(la,ma).getAllResources();},getThreadCount:function(la,ma){ma=ma||k.ALL;return this.getThreadlistOrderMap(la,ma).getCurrentArraySize();},hasLoadedThreadlist:function(la,ma){ma=ma||k.ALL;return this.getThreadlistOrderMap(la,ma).hasReachedEndOfArray();},unsubscribe:function(la,ma,na){na=na||k.ALL;this.getThreadlistOrderMap(ma,na).unsubscribe(la);}});x(ja,o);function ka(la){switch(la.payload_source){case n.CLIENT_CHANGE_ARCHIVED_STATUS:case n.CLIENT_CHANGE_READ_STATUS:case n.CLIENT_CHANGE_FOLDER:case n.CLIENT_CHANNEL_MESSAGE:case n.CLIENT_DELETE_MESSAGES:case n.CLIENT_DELETE_THREAD:case n.CLIENT_SEND_MESSAGE:case n.SERVER_SEND_MESSAGE:case n.SERVER_CONFIRM_MESSAGES:case n.SERVER_FETCH_THREADLIST_INFO:case n.SERVER_THREAD_SYNC:return true;case n.SERVER_INITIAL_DATA:return la.ordered_threadlists;default:return false;}}e.exports=ja;},null);
__d("MercuryStateCheck",["Arbiter","ChannelConstants","LogHistory","MercuryAPIArgsSource","MercuryFolders","MercuryOrderedThreadlist","MercuryServerRequests","MercurySingletonMixin","MessagingTag","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=i.getInstance('mercury_state_check');function r(s){"use strict";this.$MercuryStateCheck0=s;this.$MercuryStateCheck1=m.getForFBID(this.$MercuryStateCheck0);this.$MercuryStateCheck2=l.getForFBID(this.$MercuryStateCheck0);g.subscribe(h.ON_INVALID_HISTORY,this.$MercuryStateCheck3.bind(this,h.ON_INVALID_HISTORY));d(['ChannelConnection'],function(t){t.subscribe(t.CONNECTED,function(u,v){if(!v.init)this.$MercuryStateCheck4(t.CONNECTED);}.bind(this));}.bind(this));}r.prototype.$MercuryStateCheck3=function(s){"use strict";var t;if(p.getRequestURI().getPath().search(/messages/)!==-1){t=k.getSupportedFolders();}else t=[o.INBOX];q.debug('check',{folders:t,source:s});this.$MercuryStateCheck1.fetchMissedMessages(t,j.MERCURYSYNC);};r.prototype.$MercuryStateCheck4=function(s){"use strict";var t=this.$MercuryStateCheck2.getAvailableThreadlistNow(o.INBOX)||[];t=t.slice(0,20);q.debug('full_check',{threads:t,source:s});this.$MercuryStateCheck1.fetchThreadData(t,j.MERCURYSYNC);this.$MercuryStateCheck3(s);};Object.assign(r,n);e.exports=r;},null);
__d("MercuryUnseenState",["MercuryFolders","KeyedCallbackManager","LogHistory","MercuryActionType","MercuryDispatcher","MercurySingletonMixin","MercuryThreadInfo","MercuryThreadlistConstants","MercuryThreadIDMap","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","copyProperties","createObjectFrom","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=n.MAX_UNSEEN_COUNT,x='unseen_thread_hash',y='unseen_thread_list',z=i.getInstance('mercury_unseen_state');function aa(pa){this._fbid=pa;this._serverRequests=q.getForFBID(this._fbid);this._threadIDMap=o.getForFBID(this._fbid);this._threads=s.getForFBID(this._fbid);this._threadInformer=r.getForFBID(this._fbid);this._dispatcher=k.getForFBID(this._fbid);this._initialUnseenCount=null;this._lastSeenTimestamp=0;this._maxCount=false;this._pendingServerUpdates=false;this._unseenResources=new h();this._dispatcher.subscribe('update-unseen',function(qa,ra){ga(this,ra);}.bind(this));this._dispatcher.subscribe('update-thread-ids',function(qa,ra){ma(this,ra);}.bind(this));}Object.assign(aa.prototype,{getUnseenCount:function(){if(this.exceedsMaxCount()){z.error('unguarded_unseen_count_fetch',{});return 0;}return fa(this)||0;},exceedsMaxCount:function(){return this._maxCount||(fa(this)>w);},markAsSeen:function(){var pa=fa(this);if(pa===null){this._pendingServerUpdates=true;}else if(pa>0||this._maxCount){this._serverRequests.markSeen();var qa=this._serverRequests.getLastActionTimestamp();ha(this,qa,[]);}}});t(aa,l);function ba(pa,qa,ra){var sa={};sa[qa]=0;ja(pa,sa,ra);}function ca(pa,qa){pa._unseenResources.setResource(x,qa);pa._unseenResources.setResource(y,Object.keys(qa));}function da(pa,qa){var ra=pa._unseenResources.executeOrEnqueue(x,qa),sa=pa._unseenResources.getUnavailableResources(ra);if(sa.length)pa._serverRequests.fetchUnseenThreadIDs();}function ea(pa){return pa._unseenResources.getResource(x);}function fa(pa){var qa=pa._unseenResources.getResource(y);if(qa){return qa.length;}else return pa._initialUnseenCount;}function ga(pa,qa){var ra=oa(qa);if(qa.unseen_thread_fbids){qa.unseen_thread_fbids.forEach(function(cb){if(cb.folder!=p.INBOX)return;var db=cb.thread_fbids||[];db=db.concat(cb.other_user_fbids||[]);var eb=la(pa,db),fb=pa._lastSeenTimestamp;if(ra&&ra.seen_timestamp)fb=ra.seen_timestamp;ha(pa,fb,eb);if(ra&&ra.unseen_count>w)pa._maxCount=true;});}else if(ra&&ra.seen_timestamp){pa._lastSeenTimestamp=ra.seen_timestamp;if(ra.unseen_count>w){pa._maxCount=true;ca(pa,{});}else{pa._initialUnseenCount=ra.unseen_count;if(pa._initialUnseenCount===0)ca(pa,{});}}else{if(pa._maxCount)return;var sa=qa.actions;if(!sa||!(sa.length))return;var ta={},ua={};for(var va=0;va<sa.length;va++){var wa=sa[va];if(wa.is_forward)continue;var xa=wa.action_type,ya=wa.other_user_fbid?wa.other_user_fbid:wa.thread_fbid,za=wa.thread_id?wa.thread_id:ya;if(xa==j.MARK_THREAD_SEEN){ba(pa,za,wa.persistent);continue;}if(!na(pa,wa))continue;if(xa==j.USER_GENERATED_MESSAGE||xa==j.LOG_MESSAGE){var ab=ta[za]?wa.timestamp>ta[za]:false,bb=ab||!ta[za];if(wa.is_unread&&bb)pa._threads.getThreadMeta(za,function(cb){var db=false;if(cb&&cb.last_read_timestamp)if(cb.last_read_timestamp>=wa.timestamp)db=true;if(!m.isMuted(cb)&&!db)ta[za]=wa.timestamp;});}else if(xa==j.CHANGE_READ_STATUS&&wa.mark_as_read)ua[za]=wa.timestamp;}ia(pa,ta);ja(pa,ua);}if(pa._pendingServerUpdates){pa._pendingServerUpdates=false;pa.markAsSeen();}}function ha(pa,qa,ra){var sa=ea(pa);if(sa===(void 0)||qa>pa._lastSeenTimestamp||pa._maxCount){pa._lastSeenTimestamp=qa;ra=ra||[];if(ra.length<=w)pa._maxCount=false;var ta={},ua=ea(pa)||{};for(var va in ua)if(ua[va]!==true){var wa=ua[va];if(ka(pa,wa))ta[va]=wa;}var xa=t(u(ra,true),ta);ca(pa,xa);pa._threadInformer.updatedUnseenState();}}function ia(pa,qa){if(pa._maxCount)return;var ra={},sa=false;for(var ta in qa){var ua=qa[ta];if(ka(pa,ua)){ra[ta]=ua;sa=true;}}if(!sa)return;da(pa,function(va){for(var wa in ra){var xa=ra[wa];if(!va[wa]&&ka(pa,xa))va[wa]=ra[wa];}ca(pa,va);pa._threadInformer.updatedUnseenState();});}function ja(pa,qa,ra){var sa=false;if(!v(qa))sa=true;if(sa)da(pa,function(ta){var ua=false;for(var va in qa){var wa=qa[va],xa=wa>ta[va];if(ta[va]&&(!wa||xa)){delete ta[va];ua=true;}}if(ua){ca(pa,ta);pa._threadInformer.updatedUnseenState();if(ra&&fa(pa)===0)pa._serverRequests.markSeen();}});}function ka(pa,qa){return qa>pa._lastSeenTimestamp;}function la(pa,qa){return qa.map(pa._threadIDMap.convertThreadIDIfAvailable,pa._threadIDMap);}function ma(pa,qa){var ra=ea(pa);if(!ra)return;for(var sa in qa){var ta=qa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(pa,ra);}function na(pa,qa){var ra=qa.thread_id?pa._threads.getThreadMetaNow(qa.thread_id):null,sa=ra?g.getFromMeta(ra):qa.folder;return sa===p.INBOX||sa===(void 0);}function oa(pa){var qa=(pa.message_counts||[]);for(var ra=0;ra<qa.length;ra++)if(qa[ra].folder==p.INBOX)return qa[ra];return null;}e.exports=aa;},null);
__d("MercuryThreadMetadataRawRenderer",["Event","CSS","DOM","MercuryActionStatus","MercuryErrorInfo","MercuryStatusTemplates","Tooltip","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={renderParticipantListWithNoThreadName:function(q,r,s,t,u,v){var w={callback:true,check_length:true,show_unread_count:true};v=v||{};var x={};for(var y in v)if(w[y]){x[y]=v[y];delete v[y];}var z=s.map(function(ea){return t[ea];}),aa=this.renderRawParticipantList(q,z,s.length,v);aa=this.renderRawTitleWithUnreadCount(aa,x.show_unread_count?r.unread_count:0);var ba=v.abbr_mode,ca={};for(var da in v)ca[da]=v[da];ca.abbr_mode=true;u.forEach(function(ea){var fa=u.length>1?this._cloneIfDOMElement(aa):aa;i.setContent(ea,fa);if(x.check_length&&!ba&&ea.scrollWidth>ea.clientWidth){var ga=this.renderRawParticipantList(q,z,s.length,ca),ha=this.renderRawTitleWithUnreadCount(ga,x.show_unread_count?r.unread_count:0);i.setContent(ea,ha);}}.bind(this));x.callback&&x.callback(aa);},renderRawParticipantList:function(q,r,s,t){var u={abbr_mode:true,last_separator_uses_and:true,names_renderer:true};t=t||{};var v=null;if(t.names_renderer){v=t.names_renderer(r);}else v=r.map(function(x){return x.name;});var w=null;if(v.length===0){if(!q){w=o._("New Message");}else w=o._("No Participants");}else if(v.length==1){w=v[0];}else if(v.length==2){if(t.last_separator_uses_and){w=o._("{participant1} and {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else w=o._("{participant1}, {participant2}",[o.param("participant1",v[0]),o.param("participant2",v[1])]);}else if(t.last_separator_uses_and){if(t.abbr_mode){w=o._("{participant1} and {others_link}",[o.param("participant1",v[0]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-1}))]);}else if(v.length==3){w=o._("{participant1}, {participant2} and {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2} and {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-2}))]);}else if(v.length==3){w=o._("{participant1}, {participant2}, {participant3}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2])]);}else w=o._("{participant1}, {participant2}, {participant3}, {others_link}",[o.param("participant1",v[0]),o.param("participant2",v[1]),o.param("participant3",v[2]),o.param("others_link",this.renderRawParticipantCount({render_subset:true,count:s-3}))]);if(Array.isArray(w))w=i.create('span',{},w);return w;},renderRawTitleWithUnreadCount:function(q,r){var s=q;if(r&&r>1)s=i.create('span',{},o._("{conversation_title} ({unread_count})",[o.param("conversation_title",q),o.param("unread_count",r)]));return s;},renderRawParticipantCount:function(q){var r=q.render_subset,s;if(!r){s=q.count>1?o._({"*":"{num} people"},[o.param("num",q.count,[0])]):o._("1 person");}else s=q.count>1?o._({"*":"{others_count} others"},[o.param("others_count",q.count,[0])]):o._("1 other");return s;},renderShortNames:function(q){if(q.length==1)return [q[0].name];return q.map(function(r){return r.short_name;});},renderStatusIndicator:function(q,r,s){var t;if(q==j.RESENDING){t=this.renderResendIndicator();}else if(q!==(void 0)&&q!=j.UNSENT&&q!=j.UNCONFIRMED&&q!=j.SUCCESS)t=this.renderErrorIndicator(r,s);return t;},renderResendIndicator:function(){return l[':fb:mercury:resend-indicator'].render();},renderErrorIndicator:function(q,r){if(!q)return null;var s=l[':fb:mercury:error-indicator'].render(),t=q.is_transient,u=k.getMessage(q);if(t)if(k.isConnectionError(q)){u=o._("{message} Check your internet connection and click to try again.",[o.param("message",u)]);}else u=o._("{message} Click to send again.",[o.param("message",u)]);m.set(s,u,'above','center');if(r&&t){g.listen(s,'click',r);s.setAttribute('tabindex','0');h.addClass(s,"_55q-");}return s;},_cloneIfDOMElement:function(q){if(q&&q.cloneNode){return q.cloneNode();}else return q;}};e.exports=p;},null);
__d("MercurySeenByAll",["CSS","DataStore","MercuryDelayedRoger","DOM","MercuryIDs","MercuryViewer","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=b('MercuryThreads').get(),n={},o={updateOnSeenChange:function(q,r,s){n[q.tagName]=true;h.set(q,'thread-id',r.thread_id);g.addClass(q,'seenByListener');p(q,r,s);}};function p(q,r,s){var t=null;if(s){t=k.getParticipantIDFromUserID(s);}else t=l.getID();var u=r.participants.filter(function(w){return w!==t;}),v=r.participants.length>0&&r.participants[0]===t;g.conditionClass(q,'repliedLast',v);g.conditionClass(q,'seenByAll',v&&i.getSeenBy(r.thread_id).length===u.length);}i.subscribe('state-changed',function(q,r){for(var s in n){var t=j.scry(document.body,s+'.seenByListener');for(var u=0;u<t.length;u++){var v=t[u],w=h.get(v,'thread-id');if(r[w])m.getThreadMeta(w,function(x){p(v,x);});}}});e.exports=o;},null);
__d("MercuryThreadMetadataRenderer",["CSS","DOM","Emoji","HTML","JSLogger","MercuryAttachmentType","MercuryIDs","MercuryMessageSourceTags","MercurySingletonMixin","MercuryThreadImage.react","MercuryThreadIDMap","MercuryThreadMetadataRawRenderer","MercuryThreadTitle.react","MercuryParticipants","React","MercurySeenByAll","MercuryServerRequests","Style","MercuryThreads","Tooltip","URI","WebMessengerThreadPermalinks","arrayContains","createArrayFromMixed","copyProperties","cx","formatDate","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){b.__markCompiled&&b.__markCompiled();var ia=k.create('wm_timestamp');function ja(oa){this._fbid=oa;this._serverRequests=w.getForFBID(oa);this._threads=y.getForFBID(oa);this._threadIDMap=q.getForFBID(oa);}ea(ja,o);Object.assign(ja.prototype,{renderTimestamp:function(oa,pa,qa,ra){if(ra){if(!pa){ia.warn('no_title');pa=(new Date(ra)).toLocaleDateString();}oa.setAttribute('title',pa);oa.setAttribute('data-utime',ra/1000);if(!qa){ia.warn('no_display');qa=ga(new Date(ra),'g:ia');}h.setContent(oa,qa);g.show(oa);}},renderMessageSourceTags:function(oa,pa,qa,ra){var sa='',ta='',ua='';if(ca(qa,n.MESSENGER)){sa=ha._("Sent from Messenger");ta=new aa('/mobile/messenger');ua="_9g";}else if(ca(qa,n.MOBILE)){sa=ha._("Sent from Mobile");ta=new aa('/mobile/');ua="_9j";}else if(ca(qa,n.CHAT)){sa=ha._("Sent from chat");ua="_9h";}else if(ca(qa,n.EMAIL)){if(ra){sa=ha._("Sent from {email}",[ha.param("email",ra)]);}else sa=ha._("Sent from email");ua="_9i";}if(ua){z.set(oa,sa);g.addClass(pa,ua);if(ta){oa.setAttribute('href',ta);}else oa.removeAttribute('href');}else g.hide(oa);},renderSpoofWarning:function(oa,pa,qa){if(pa){g.addClass(oa,"_sa");z.set(oa,ha._("Unable to confirm {name_or_email} as the sender.",[ha.param("name_or_email",qa.name)]));}},renderChatSpoofWarning:function(oa,pa,qa){if(pa)h.appendContent(oa,ha._("Unable to confirm {name_or_email} as the sender.",[ha.param("name_or_email",qa.name)]));},renderCoreThreadlist:function(oa,pa,qa,ra,sa){ra=ra||{};this.renderThreadImage(oa,pa.getNode('image'));var ta=pa.getNode('accessibleName'),ua=[pa.getNode('name')];if(ta)ua.push(ta);na(this,oa,ua,ra);if(oa.folder&&sa)ma(pa.getNode('folderBadge'),oa.folder);var va=pa.getNode('timestamp');this.renderTimestamp(va,oa.timestamp_absolute,oa.timestamp_relative,oa.timestamp);this.renderSnippet(oa,pa.getNode('snippet'));la(pa,oa);qa(pa,oa);},renderAndSeparatedParticipantList:function(oa,pa,qa){qa=qa||{};qa.last_separator_uses_and=true;this._threads.getThreadMeta(oa,function(ra){na(this,ra,pa,qa);}.bind(this));},renderSnippet:function(oa,pa){var qa=false,ra=h.create('span');g.addClass(ra,'MercuryRepliedIndicator');h.appendContent(pa,ra);v.updateOnSeenChange(ra,oa,this._fbid);var sa=oa.snippet;if(sa){if(oa.snippet_has_attachment)h.appendContent(pa,h.create('span',{className:'MercuryAttachmentIndicator'}));if(oa.is_forwarded_snippet)h.appendContent(pa,h.create('strong',{className:"_55q_"},ha._("Forwarded Message:")));if(sa.substr(0,4)=='?OTR'){sa=ha._("[encrypted message]");}else sa=sa.replace(/\r\n|[\r\n]/g," ");sa=j(i.htmlEmojiAndEmote(sa));}else{if(oa.is_forwarded_snippet)h.appendContent(pa,h.create('strong',{className:"_55q_"},ha._("Forwarded Message")));if(oa.snippet_has_attachment&&oa.snippet_attachments&&oa.snippet_attachments.length){qa=true;sa=h.create('span');d(['MercuryAttachmentSnippet.react'],function(va){u.render(u.createElement(va,{thread:oa,viewer:this._fbid}),sa);}.bind(this));}}var ta=oa.participants.length;if(oa.is_subscribed)ta--;var ua=oa.snippet_sender;if(!qa&&ua&&m.getParticipantIDFromUserID(this._fbid)!=ua&&ta>1){t.get(ua,function(va){if(va.short_name){h.appendContent(pa,ha._("{name}: {conversation_snippet}",[ha.param("name",va.short_name),ha.param("conversation_snippet",sa)]));}else h.appendContent(pa,sa);});}else h.appendContent(pa,sa);},renderWebMessengerLink:function(oa,pa,qa,ra){ba.getThreadURI(oa,function(sa){pa.setAttribute('href',sa);qa&&qa();},ra);},renderThreadImage:function(oa,pa){u.render(u.createElement(p,{thread:oa,viewer:this._fbid}),pa);},renderParticipantList:function(oa,pa,qa,ra){return r.renderRawParticipantList(this._threadIDMap.getFBIDFromClientIDNow(oa),pa,qa,ra);},renderThreadNameAndParticipantList:function(oa,pa,qa,ra){var sa=r.renderRawParticipantList(this._threadIDMap.getFBIDFromClientIDNow(oa),pa,qa,ra),ta=this._threads.getThreadMetaNow(oa);if(!ta.name)return sa;return ha._("{conversation_name} [with {participant_list}]",[ha.param("conversation_name",ta.name),ha.param("participant_list",sa)]);},renderParticipantCount:function(oa,pa){return r.renderRawParticipantCount(pa);}});function ka(oa){if(!oa.snippet_attachments)return [];return oa.snippet_attachments.filter(function(pa){return pa.attach_type===l.PHOTO;});}function la(oa,pa){var qa=ka(pa);if(qa.length===0)return;var ra=qa[0].thumbnail_url;if(!ra)return;var sa=(qa.length==1)?'snippet-thumbnail-single':'snippet-thumbnail-multiple',ta=oa.getNode(sa);if(!ta)return;var ua=h.find(ta,'i');x.set(ua,'background-image','url('+ra+')');g.show(ta);}function ma(oa,pa){da(oa).forEach(function(qa){h.setContent(qa,pa);});}function na(oa,pa,qa,ra){qa=da(qa);var sa=oa._fbid;if(pa.name){qa.forEach(function(ua){u.render(u.createElement(s,{thread:pa,viewer:sa,showUnreadCount:!!ra.show_unread_count}),ua);});return;}var ta=pa.participants;if(pa.participants.length>1)ta=pa.participants.filter(function(ua){return ua!=m.getParticipantIDFromUserID(sa);});t.getMulti(ta,function(ua){r.renderParticipantListWithNoThreadName(oa._threadIDMap.getFBIDFromClientIDNow(pa.thread_id),pa,ta,ua,qa,ra);});}e.exports=ja;},null);
__d("P2PActionConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={CREDIT_CARDS_UPDATED:'credit_cards_updated',CHANNEL_EVENTS_ALLOWED:'channel_events_allowed',CHANNEL_EVENTS_IGNORED:'channel_events_ignored',CREDIT_CARD_ADDED:'credit_card_added',CREDIT_CARD_ADDED_ERROR:'credit_card_added_error',CREDIT_CARD_DELETED:'credit_card_deleted',CREDIT_CARD_DELETED_ERROR:'credit_card_deleted_error',CREDIT_CARD_UPDATED:'credit_card_updated',CREDIT_CARD_UPDATED_ERROR:'credit_card_updated_error',PRESET_CREDIT_CARD_UPDATED:'preset_credit_card_updated',PRESET_CREDIT_CARD_UPDATED_ERROR:'preset_credit_card_updated_error',CREDIT_CARD_VERIFIED:'credit_card_verified',CREDIT_CARD_VERIFIED_ERROR:'credit_card_verified_error',TRANSFERS_UPDATED:'transfers_updated',TRANSFERS_UPDATED_ERROR:'transfers_updated_error',NUX_TRANSFERS_UPDATED:'nux_transfers_updated',TRANSFER_ADDED:'transfer_added',TRANSFER_ADDED_ERROR:'transfer_added_error',TRANSFER_UPDATED:'transfer_updated',TRANSFER_UPDATED_ERROR:'transfer_updated_error',TRANSFER_ACCEPTED:'transfer_accepted',TRANSFER_DECLINED:'transfer_declined',CHAT_SEND_VIEW_OPENED:'chat_send_view_opened',CHAT_SEND_VIEW_CLOSED:'chat_send_view_closed',BIN_NUMBER_VALIDATED:'bin_number_validated',BIN_NUMBER_VALIDATED_ERROR:'bin_number_validated_error',USER_ELIGIBILITY_UDPATED:'user_eligibility_updated',DIALOG_SHOWN:'dialog_shown',DIALOG_CLOSED:'dialog_closed',BANNER_STATES_UPDATED:'banner_states_updated',BANNER_DISMISSED:'banner_dismissed',BANNER_VIEWED:'banner_viewed',BANNER_COMPLETED:'banner_completed',MONEYPENNY_TRANSFER_CREATED:'moneypenny_transfer_created',MONEYPENNY_TRANSFER_CREATED_ERROR:'moneypenny_transfer_created_error'};e.exports=g;},null);
__d("P2PDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);