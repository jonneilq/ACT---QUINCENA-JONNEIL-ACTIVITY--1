/*!CK:2201725429!*//*1435062895,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["OOL1m"]); }

__d("ReactComposerMinutiaeAttachmentStore",["ReactComposerAttachmentActionType","ReactComposerAttachmentType","ReactComposerMinutiaeAttachmentActionType","ReactComposerStoreBase","XReactComposerMinutiaeAttachmentController","AsyncRequest"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in j)if(j.hasOwnProperty(m))o[m]=j[m];var n=j===null?null:j.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=j;function o(){"use strict";j.call(this,(function(){return {isFetching:false,markup:null,pendingRequest:null};}),(function(p){switch(p.type){case i.FETCH_ATTACHMENT:this.$ReactComposerMinutiaeAttachmentStore0(p);break;case i.SET_MARKUP:this.$ReactComposerMinutiaeAttachmentStore1(p);break;case g.SELECT_ATTACHMENT:this.$ReactComposerMinutiaeAttachmentStore2(p);break;}}.bind(this)));}o.prototype.getMarkup=function(p){"use strict";return this.getComposerData(p).markup;};o.prototype.isFetching=function(p){"use strict";return this.getComposerData(p).isFetching;};o.prototype.$ReactComposerMinutiaeAttachmentStore0=function(p){"use strict";var q=this.validateAction(p,['composerID','actionID','objectID','targetID','isTimeline']),r=q[0],s=q[1],t=q[2],u=q[3],v=q[4],w=this.getComposerData(r);w.isFetching=true;var x=k.getURIBuilder().setString('composer_id',r).setString('action_id',s).setString('object_id',t).setString('target_id',u).setBool('is_timeline',v).getURI();w.pendingRequest=(new l(x)).setFinallyHandler(function(){w.isFetching=false;w.pendingRequest=null;this.emitChange(r);}.bind(this));w.pendingRequest.send();this.emitChange(r);};o.prototype.$ReactComposerMinutiaeAttachmentStore1=function(p){"use strict";var q=this.validateAction(p,['composerID','markup']),r=q[0],s=q[1],t=this.getComposerData(r);t.markup=s;this.emitChange(r);};o.prototype.$ReactComposerMinutiaeAttachmentStore2=function(p){"use strict";var q=this.validateAction(p,['composerID','id']),r=q[0],s=q[1];if(s===h.STATUS)return;var t=this.getComposerData(r);t.markup=null;t.isFetching=false;t.pendingRequest&&t.pendingRequest.abandon();this.emitChange(r);};e.exports=new o();},null);