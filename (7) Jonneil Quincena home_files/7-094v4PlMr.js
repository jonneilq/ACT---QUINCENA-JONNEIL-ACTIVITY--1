/*!CK:857704913!*//*1434846254,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["15DuS"]); }

__d("ReactComposerDragDropPromptContainer.react",["ReactComposerAttachmentType","ReactComposerDragDropPromptLazy.react","ReactComposerPhotoUploader","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerScrapedAttachmentStore","ReactComposerScrapedAttachmentPhotoDropWarningDialog.react","ReactComposerStatusUtils","ReactComposerVideoUploadStore","ReactComponentWithPureRenderMixin","React","ReactLayeredComponentMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=p,s=r.PropTypes,t=p.createClass({displayName:"ReactComposerDragDropPromptContainer",_uploader:(undefined),mixins:[o,q,j(n)],propTypes:{root:s.object.isRequired,config:s.shape({attachmentsConfig:s.object.isRequired}).isRequired},statics:{calculateState:function(u,v,w){return {enabled:!n.getVideo(u)};}},getAttachmentInitialState:function(u,v){return {photoDropWarningShown:false,pendingFiles:null};},componentWillMount:function(){var u=this.props.config.attachmentsConfig[g.MEDIA];this._uploader=new i(this.context.composerID,u.photoLimit,this.context.actorID);},renderLayers:function(){return {photoDropWarningDialog:p.createElement(l,{shown:this.state.photoDropWarningShown,onCancel:this._onPhotoDropWarningCancel,onConfirm:this._onPhotoDropWarningConfirm})};},render:function(){if(!this.state.enabled)return null;return (p.createElement(h,{root:this.props.root,onFilesDrop:this._onFilesDrop,onURLDrop:this._onURLDrop}));},_onFilesDrop:function(u){if(k.hasAttachment(this.context.composerID)&&this.state.pendingFiles==null){this.setState({photoDropWarningShown:true,pendingFiles:u});return;}m.uploadDroppedFiles(this.context.composerID,u,this._uploader);},_onPhotoDropWarningCancel:function(){this.setState({photoDropWarningShown:false,pendingFiles:null});},_onPhotoDropWarningConfirm:function(){var u=this.state.pendingFiles;this.setState({photoDropWarningShown:false,pendingFiles:null});this._onFilesDrop(u);},_onURLDrop:function(u){m.scrapeLink(this.context.composerID,this.context.targetID,u);}});e.exports=t;},null);