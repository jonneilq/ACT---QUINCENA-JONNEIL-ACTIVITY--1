/*!CK:4264102419!*//*1434981671,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["9Ehbf"]); }

__d("StarsRatableBase",["Event","Arbiter","CSS","DOM","Parent","Run"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(n,o,p,q){this.root=n;this.freezeOnClick=o;this.stars=j.scry(n,'a');this.listeners=[g.listen(this.root,'click',this._onClick.bind(this)),g.listen(this.root,'mousemove',this._onMouseMove.bind(this)),g.listen(this.root,'mouseout',this._onMouseOut.bind(this))];this.holdMouseMove=false;this.setRating(p);this.layerHides=0;if(q)h.subscribe('layer_hidden',function(){this.layerHides++;if(this.layerHides>=2)this.setRating(0);}.bind(this));l.onLeave(this.destroyListeners.bind(this));}m.init=function(n,o,p,q){return new m(n,o,p,q);};Object.assign(m.prototype,{_onClick:function(event){this.layerHides=0;var n=this._getStarIndexFromEvent(event);if(!n)return;this.setRating(n);if(this.freezeOnClick){this.freeze();}else this.holdMouseMove=true;event.prevent();},_onMouseMove:function(event){if(this.holdMouseMove)return;var n=this._getStarIndexFromEvent(event);if(!n)return;this.setStars(n,true);},_onMouseOut:function(event){this.holdMouseMove=false;this.updateStars();},_getStarIndexFromEvent:function(event){var n=k.byTag(event.getTarget(),'a');if(n)return this.stars.indexOf(n)+1;return 0;},setRating:function(n){this._rating=n;this.updateStars();},updateStars:function(){this.setStars(this._rating);},setStars:function(n,o){var p=o?'hoverStar':'fullStar',q=o?'fullStar':'hoverStar';for(var r=0;r<this.stars.length;++r){i.removeClass(this.stars[r],q);var s=(r>=n);i.conditionClass(this.stars[r],p,!s);i.conditionClass(this.stars[r],'emptyStar',s);}},freeze:function(){i.addClass(this.root,'uiStarsRated');this.destroyListeners();},destroyListeners:function(){this.listeners.forEach(function(n){n&&n.remove();});this.listeners=[];}});a.StarsRatableBase=e.exports=m;},null);
__d("ReviewsController",["Arbiter","Dialog","Event","React","Image.react","Run","DOM","csx","fbt","ix","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r={},s={},t={},u={},v={},w={registerRevealProfanity:function(x,y,z){i.listen(y,'click',function(){x.style.display='none';z.style.display='inline';});},registerButton:function(x,y){r[y]=r[y]||[];r[y].push(x);},registerViewerReview:function(x,y){s[y]=s[y]||[];s[y].push(x);},registerComposer:function(x,y){t[y]=t[y]||[];t[y].push(x);},registerToggle:function(x,y,z,aa){u[x]=u[x]||[];u[x].push([y,z,aa]);},addUserReview:function(x,y,z,aa,ba,ca,da){this._updateState(true,x,y,z,aa,ba,ca,da);},deleteUserReview:function(x,y,z,aa,ba){this._updateState(false,x,null,null,null,y,z,aa);if(ba){var ca=document.getElementById(ba),da=ca.parentNode.parentNode;da.parentNode.removeChild(da);}},_updateState:function(x,y,z,aa,ba,ca,da,ea){var fa,ga=s[y]||[];for(fa=0;fa<ga.length;fa++)m.remove(ga[fa]);var ha=u[y]||[];for(fa=0;fa<ha.length;fa++){var ia=ha[fa],ja=ia[x?1:2];m.setContent(ia[0],ja);}var ka=t[y]||[];for(fa=0;fa<ka.length;fa++){var la=ka[fa];if(x){la.hide();}else{la.clear();la.show();}}var ma=r[y]||[];for(fa=0;fa<ma.length;fa++){var na=ma[fa],oa=m.find(na,'.uiButtonText'),pa=m.find(na,'i'),qa,ra;if(x){qa=p('/images/icons/buttons/check.png');ra=o._("Reviewed");}else{qa=p('/images/icons/buttons/feature.png');ra=o._("Review");}var sa=m.create('span'),ta={"padding-right":"5px"};j.render(j.createElement("div",null,ra),oa);j.render(j.createElement(k,{src:qa,style:ta}),sa);m.replace(pa,sa);}if(x){var ua=m.scry(document,'#page_recommendations_browse_list')[0];if(ua)m.prependContent(ua,z);var va=q('page_reviews_tab_list');if(va)m.prependContent(va,aa);var wa="ul._1rhx",xa=m.scry(document,wa)[0];if(xa)m.prependContent(xa,ba);}if(ca){var ya=q('page_reviews_pill_and_histogram');if(ya)m.replace(ya,ca);}if(da){var za=q('pages_inline_rating_summary');if(za)m.replace(za,da);}if(ea){var ab=q('pages_review_needy_place_card');if(ab)m.replace(ab,ea);}},registerPhotoUpload:function(x,y){g.subscribe('multi-upload/images-upload-completed/'+y,function(){v[y]=false;});g.subscribe('multi-upload/images-upload-start/'+y,function(){v[y]=true;});i.listen(x,'submit',function(){if(v[y]){new h().setTitle(o._("Photos Are Uploading")).setSemiModal(true).setButtons(h.OK).setBody(o._("Please wait until photo is uploaded before posting.")).show();return false;}return true;}.bind(this));}};l.onLeave(function(){r={};s={};t={};u={};v={};});e.exports=w;},null);
__d("CovercardArrow",["ContextualDialogArrow","CSS","DOMQuery","Locale","Style","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=-45,o=45,p=9;if(j.isRTL()){n=-n;o=-o;}function q(s){"use strict";this._layer=s;}q.prototype.enable=function(){"use strict";this._layer.enableBehavior(g);var s=this._layer.getContentRoot();this._arrowWrapper=i.scry(s,"._7lh")[0];if(!this._arrowWrapper)return;this._arrowShadow=i.scry(this._arrowWrapper,"._7li")[0];if(!this._arrowShadow)return;var t=null;if(r(this._arrowWrapper))t=this._renderArrowWithRotate.bind(this);if(!t)return;if(j.isRTL())h.addClass(s,"_7lf");this._subscription=this._layer.subscribe('reposition',function(u,v){var w=v.getPosition()=='below';h.conditionClass(s,"_53ih",w);w&&t(v);});};q.prototype.disable=function(){"use strict";this._subscription&&this._subscription.unsubscribe();this._subscription=null;};q.prototype._calculateArrowOffset=function(s){"use strict";var t=g.getOffsetPercent(s),u=g.getOffset(s,t,this._layer),v=k.get(this._layer.getContentRoot(),'width');return parseInt(v,10)*(t/100)+u;};q.prototype._renderArrowWithRotate=function(s){"use strict";var t=i.scry(this._arrowWrapper,"._7lj")[0];if(!t){var u=this._layer.getContentRoot();h.addClass(u,"_4nfk");}var v=i.scry(this._arrowWrapper,"._1ubp")[0];if(!v)return;var w=r(this._arrowWrapper);if(!w)return;var x=this._calculateArrowOffset(s),y=p+x,z=-p;if(j.isRTL()){y=-y;z=-z;}this._arrowWrapper.style[w]='translate('+y+'px, -'+p+'px) '+'rotate('+o+'deg)';if(t)t.style[w]='rotate('+n+'deg) '+'translate('+(-y)+'px, '+(p-12)+'px)';v.style[w]='rotate('+n+'deg) '+'translate('+z+'px, 0)';};function r(s){if(!s)s=document.body;var t=['transform','WebkitTransform','msTransform','MozTransform','OTransform'],u;while(u=t.shift())if(s.style[u]!==(void 0))return u;return null;}e.exports=q;},null);