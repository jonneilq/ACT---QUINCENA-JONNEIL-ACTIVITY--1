/*!CK:3661885879!*//*1435069383,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["ROzg0"]); }

__d("ReactComposerTaggerActions",["ReactComposerTaggerActionType","ReactComposerDispatcher","ReactComposerTaggerStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactComposerTaggerStore');function i(){"use strict";}i.prototype.selectTagger=function(j,k){"use strict";var l={composerID:j,type:g.SET_SELECTED_TAGGER,taggerID:k,autoFocus:true};h.dispatch(l);};i.prototype.selectTaggerWithoutAutofocus=function(j,k){"use strict";var l={composerID:j,type:g.SET_SELECTED_TAGGER,taggerID:k,autoFocus:false};h.dispatch(l);};i.prototype.setTaggersSource=function(j,k){"use strict";var l={composerID:j,type:g.SET_TAGGERS_SOURCE,taggersSource:k};h.dispatch(l);};i.prototype.setTaggerSource=function(j,k,l){"use strict";var m={composerID:j,type:g.SET_TAGGER_SOURCE,taggerID:k,taggerSource:l};h.dispatch(m);};i.prototype.setTaggerData=function(j,k,l){"use strict";var m={composerID:j,type:g.SET_TAGGER_DATA,taggerID:k,taggerData:l};h.dispatch(m);};i.prototype.selectDateTime=function(j,k){"use strict";var l={composerID:j,type:g.SET_SELECTED_DATETIME,selectedDateTime:k};h.dispatch(l);};i.prototype.selectPeople=function(j,k){"use strict";var l={composerID:j,type:g.SET_SELECTED_PEOPLE,selectedPeople:k};h.dispatch(l);};e.exports=new i();},null);
__d("ReactComposerTaggerButton.react",["TooltipLink.react","React","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=h,m=l.PropTypes,n=h.createClass({displayName:"ReactComposerTaggerButton",propTypes:{taggerID:m.string.isRequired,title:m.string,tooltip:m.string,selected:m.bool,hasData:m.bool,onSelect:m.func},getDefaultProps:function(){return {title:null,tooltip:null,selected:false,hasData:false,onSelect:j};},render:function(){var o=k((("_3xem")+(this.props.selected?' '+"_50hx":''))),p=k((("_3xen")+(this.props.hasData?' '+"_4pd":'')),this.props.className);return (h.createElement(g,{onClick:this._onSelect,tooltip:this.props.tooltip,className:o,"aria-label":this.props.tooltip,tabIndex:"0",role:"button"},h.createElement("span",{className:"accessible_elem"},this.props.title),h.createElement("div",{className:p}),this.props.children));},_onSelect:function(){this.props.onSelect&&this.props.onSelect(this.props.taggerID);}});e.exports=n;},null);
__d("ReactComposerTaggerButtonMixin",["ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerActions","ReactComposerTaggerButton.react","ReactComposerTaggerStore","React","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={mixins:[g(j)],statics:{calculateState:function(n,o){var p=j.getSelectedTagger(n);return {selected:p===this.taggerID,hasData:j.hasData(n,this.taggerID)};}},componentWillMount:function(){l(this.constructor.taggerID);},render:function(){return (k.createElement(i,k.__spread({taggerID:this.constructor.taggerID,title:this.getTitle(),tooltip:this.getTooltip(),className:this.getClassName(),onSelect:this._onSelect},this.state),this.props.children));},_onSelect:function(){h.selectTagger(this.context.composerID,this.constructor.taggerID);}};e.exports=m;},null);
__d("ReactComposerTaggerButtons.react",["ReactComponentWithPureRenderMixin","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.createClass({displayName:"ReactComposerTaggerButtons",mixins:[g],render:function(){return (h.createElement("div",{className:"_47gt"},this.props.children));}});e.exports=j;},null);
__d("ReactComposerTaggerContainerStateMixin",["ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerActions","ReactComposerTaggerStore","invariant","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={mixins:[g(i)],statics:{beforeCalculateInitialState:function(m,n){if(n.taggerData){var o=i.getTaggerData(m,this.taggerID);if(k(o))h.setTaggerData(m,this.taggerID,n.taggerData);}if(n.taggerSource)h.setTaggerSource(m,this.taggerID,n.taggerSource);},calculateState:function(m,n){var o=i.getSelectedTagger(m),p=i.getAutoFocusOnSelectedTagger(m),q=i.getTaggerData(m,this.taggerID),r=i.getTaggerSource(m,this.taggerID),s=o===this.taggerID;return {autoFocus:p,isSelected:s,taggerData:q,taggerSource:r};}},componentWillMount:function(){j(this.constructor.taggerID);}};e.exports=l;},null);
__d("ReactComposerTaggerContainerMixin",["ReactComposerTaggerActions","ReactComposerTaggerContainerStateMixin","React","invariant"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={mixins:[h],componentWillMount:function(){j(this.constructor.taggerComponent);},render:function(){if(!this.state.isSelected)return i.createElement("noscript",null);var l=this.constructor.taggerComponent;return (i.createElement(l,i.__spread({},this.props,{autoFocus:this.state.autoFocus,taggerSource:this.state.taggerSource,taggerData:this.state.taggerData,onSelect:this._onTaggerDataChanged})));},_onTaggerDataChanged:function(l){this.__onTaggerDataChanged&&this.__onTaggerDataChanged(l);g.setTaggerData(this.context.composerID,this.constructor.taggerID,l);this.props.onSelect&&this.props.onSelect(l);}};e.exports=k;},null);
__d("ShareDialogTagSummary.react",["Arbiter","AsyncRequest","immutable","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=j,n=m.PropTypes,o=true,p=j.createClass({displayName:"ShareDialogTagSummary",_ogSubscription:(undefined),_socialTextRequest:(undefined),propTypes:{people:n.array,peopleToExclude:n.instanceOf(i.Set).isRequired,place:n.object,action:n.object,object:n.object,actionIconId:n.string},getDefaultProps:function(){return {peopleToExclude:i.Set()};},getInitialState:function(){return {socialText:null};},componentWillMount:function(){this._ogSubscription=g.subscribe('composer/ogIconPickerOpened',function(event,q){o=false;});this._sendSocialTextRequest(this.props);},componentWillUnmount:function(){if(this._socialTextRequest)this._socialTextRequest.abort();},componentWillReceiveProps:function(q){this._sendSocialTextRequest(q);},_handleSocialText:function(q){this.setState({socialText:q.getPayload().rendered});},render:function(){var q=l(this.props.className,"_3qg0");return (j.createElement("div",{className:q,dangerouslySetInnerHTML:this.state.socialText}));},_sendSocialTextRequest:function(q){if(this._socialTextRequest)this._socialTextRequest.abort();var r=q.people.filter(function(v){return !this.props.peopleToExclude.has(v.getUniqueID());}.bind(this));if(!(r&&r.length>0)&&!(q.place)&&!(q.action&&q.object)){if(this.state.socialText)this.setState({socialText:null});return;}var s={};if(r)s.people=r.map(function(v){return v.getUniqueID();});if(q.place)s.place=q.place.getTitle();if(q.action&&q.object){s.actionID=q.action.getUniqueID();var t=q.object.getUniqueID(),u=q.object.getTitle();if(!t||t===u){s.objectStr=u;}else s.objectID=t;}if(q.actionIconId)s.actionIconID=q.actionIconId;s.iconPickerOpened=o!==true;this._socialTextRequest=new h();this._socialTextRequest&&this._socialTextRequest.setURI('/ajax/metacomposer/social_text.php').setData(s).setHandler(this._handleSocialText).send();}});e.exports=p;},null);
__d("ReactComposerTaggerSummaryContainer.react",["ReactComposerContextMixin","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ReactComposerPropsAndStoreBasedStateMixin","ShareDialogTagSummary.react","Arbiter","immutable","React","containsNode"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=o.createClass({displayName:"ReactComposerTaggerSummaryContainer",_ogSubscription:((void 0)),mixins:[g,k(i)],statics:{calculateState:function(r,s){var t=i.getTaggersData(r),u=t[j.PEOPLE],v=t[j.LOCATION],w=t[j.ACTIVITY],x=v?v.place:null;return {people:u,place:x,activity:w};}},componentWillMount:function(){this._ogSubscription=m.subscribe('composer/ogCustomIconSelected',function(event,r){if(!p(o.findDOMNode(this.refs.taggerSummary),r.triggerElement))return;var s=i.getTaggerData(this.context.composerID,j.ACTIVITY)||{};s.actionIconID=r.icon_id;h.setTaggerData(this.context.composerID,j.ACTIVITY,s);}.bind(this));},componentWillUnmount:function(){if(this._ogSubscription){this._ogSubscription.unsubscribe&&this._ogSubscription.unsubscribe();this._ogSubscription=null;}},render:function(){return (o.createElement(l,{action:this.state.activity.action,actionIconId:this.state.activity.actionIconID,object:this.state.activity.object,people:this.state.people,peopleToExclude:n.Set([this.context.actorID]),place:this.state.place,ref:"taggerSummary"}));}});e.exports=q;},null);
__d("ReactComposerTaggers.react",["React","cx"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=g.createClass({displayName:"ReactComposerTaggers",render:function(){return (g.createElement("div",{className:"_5f24"},this.props.children));}});e.exports=i;},null);
__d("ReactComposerTaggerViewMixin",["React","Scroll","ScrollableArea.react","TypeaheadViewPropTypes","Vector","getScrollPosition","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=g,o=n.PropTypes,p={propTypes:Object.assign({customIcon:o.object,scrollable:o.bool,scrollableItemHeight:o.number,scrollableMaxHeight:o.number,short:o.bool},j),getDefaultProps:function(){return {role:'listbox',scrollable:false,scrollableItemHeight:40,scrollableMaxHeight:320,short:false};},_renderItem:function(q){var r=q===this.props.highlightedEntry,s=q.getAuxiliaryData(),t=s.isRegexEntry,u=t?this.getRegexItemImpl():this.getItemImpl(),v=((r?"selected":'')+(t?' '+"_3ooq":''));return (g.createElement(u,{className:v,key:q.getUniqueID(),entry:q,highlighted:r,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this._onRenderHighlight,customIcon:this.props.customIcon}));},_onRenderHighlight:function(q){var r=g.findDOMNode(this.refs.list);if(!!!r)return;var s=l(r),t=k.getElementDimensions(q),u=k.getElementDimensions(r),v=Math.floor(u.y/t.y),w=0;for(var x=0;x<r.childNodes.length;x++)if(r.childNodes[x]===q)w=x;var y=w*t.y;if(y<s.y){h.setTop(r,y);}else if(y>=(s.y+(v*t.y)))h.setTop(r,(w-v+1)*t.y);this.props.onRenderHighlight(q);},render:function(){var q=this.props.entries.length,r=((this.props.short?"_3bmv":'')+(' '+"_599r")+(!q?' '+"_599s":'')),s=this.props.entries.map(this._renderItem),t=g.createElement("ul",{className:r,id:this.props.ariaOwneeID,role:this.props.role,ref:"list"},s),u=this.props.scrollableItemHeight*q;if(this.props.scrollable&&u>this.props.scrollableMaxHeight)t=g.createElement(i,{className:"_53vr",height:this.props.scrollableMaxHeight},t);return t;}};e.exports=p;},null);
__d("ReactComposerActionTaggerItem.react",["React","cx","ImageBlock.react","joinClasses","TypeaheadViewItem"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"ReactComposerActionTaggerItem",mixins:[k.Mixin],propTypes:Object.assign({customIcon:m.object},k.propTypes),render:function(){var o=this.props.entry,p=o.getAuxiliaryData(),q=g.createElement("span",{dangerouslySetInnerHTML:p.icon||this.props.customIcon}),r=(("_599m")+(' '+"_5mne")+(this.props.highlighted?' '+"_599n":'')+(' '+"_x7w")+(this.props.highlighted?' '+"_2hxc":''));r=j(r,this.props.className);return (g.createElement("li",{"aria-selected":this.props.highlighted,className:r,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role},g.createElement(i,{spacing:"medium"},q,g.createElement("div",{className:"_599p"},o.getTitle())),g.createElement("i",{className:"_4azx"})));}});e.exports=n;},null);
__d("ReactComposerActionTaggerView.react",["ReactComposerTaggerViewMixin","ReactComposerActionTaggerItem.react","React"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i.createClass({displayName:"ReactComposerActionTaggerView",mixins:[g],getItemImpl:function(){return h;}});e.exports=j;},null);
__d("ReactComposerActionTaggerPresenter",["ReactComposerActionTaggerView.react"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={ViewRenderer:g,useLayer:true,maxEntries:20};},null);
__d("ReactComposerActionTaggerComponent.react",["ReactComposerActionTaggerPresenter","React","XUITypeahead.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=h,n=m.PropTypes,o=h.createClass({displayName:"ReactComposerActionTaggerComponent",propTypes:{autoFocus:n.bool,shortTagger:n.bool,taggerSource:n.object,onSelect:n.func},getDefaultProps:function(){return {autoFocus:true,onSelect:k,shortTagger:false};},getInitialState:function(){return {query:''};},_onSelect:function(p){this.setState({query:p.getTitle()});this.props.onSelect&&this.props.onSelect(p);},_onClear:function(){this.setState({query:''});this.props.onSelect&&this.props.onSelect(null);},_onChange:function(event){this.setState({query:event.target.value});},render:function(){return (h.createElement("div",{className:"_3uco _5esl"},h.createElement(i,{presenter:this._getPresenter(),focusedOnInit:this.props.autoFocus,showEntriesOnFocus:true,placeholder:l._("What are you doing?"),className:"_5esx _3ucr",queryString:this.state.query,searchSource:this.props.taggerSource,highlightOnSelect:true,onSelectAttempt:this._onSelect,onClear:this._onClear,onChange:this._onChange,tallInput:true,autoHighlight:true})));},_getPresenter:function(){return Object.assign({},g,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:{short:this.props.shortTagger}});}});e.exports=o;},null);
__d("ReactComposerActivityTaggerButton.react",["ReactComposerTaggerButtonMixin","ReactComposerTaggerType","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.createClass({displayName:"ReactComposerActivityTaggerButton",mixins:[g],statics:{taggerID:h.ACTIVITY},getTitle:function(){return k._("Add what you're doing or how you're feeling");},getTooltip:function(){return k._("Add what you're doing or how you're feeling");},getClassName:function(){return "_3vk5";}});e.exports=l;},null);
__d("ReactComposerObjectTaggerItem.react",["BackgroundImage.react","Badge.react","ImageBlock.react","React","TypeaheadViewItem","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j.createClass({displayName:"ReactComposerObjectTaggerItem",mixins:[k.Mixin],propTypes:k.propTypes,render:function(){var o=this.props.entry,p=o.getSubtitle()?j.createElement("div",{className:"_599q"},o.getSubtitle()):null,q=o.getPhoto()?j.createElement(g,{width:32,height:32,backgroundSize:"cover",src:o.getPhoto()}):j.createElement("span",null),r=o.getAuxiliaryData(),s=r&&r.verified?s=j.createElement(h,null):null,t=r&&r.icon?j.createElement("span",{className:"_2syo",dangerouslySetInnerHTML:r.icon}):null,u=(("_599m")+(!p?' '+"_5mne":'')+(this.props.highlighted?' '+"_599n":''));u=m(u,this.props.className);return (j.createElement("li",{"aria-selected":this.props.highlighted,className:u,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role},j.createElement(i,{spacing:"medium"},q,j.createElement("div",null,j.createElement("div",{className:"_599p"},o.getTitle(),s),p),t)));}});e.exports=n;},null);
__d("ReactComposerObjectTaggerView.react",["ReactComposerActionTaggerItem.react","ReactComposerObjectTaggerItem.react","ReactComposerTaggerViewMixin","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j.createClass({displayName:"ReactComposerObjectTaggerView",mixins:[i],getItemImpl:function(){return h;},getRegexItemImpl:function(){return g;}});e.exports=k;},null);
__d("ReactComposerObjectTaggerPresenter",["ReactComposerObjectTaggerView.react"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={ViewRenderer:g,useLayer:true,maxEntries:120};},null);
__d("ReactComposerObjectTaggerComponent.react",["ReactComposerObjectTaggerPresenter","Grid.react","React","RegexMatchSearchSource","WebAsyncPlusRegexSearchSource","WebAsyncSearchSource","XUITypeahead.react","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=h.GridItem,q=i,r=q.PropTypes,s=i.createClass({displayName:"ReactComposerObjectTaggerComponent",propTypes:{actorID:r.string.isRequired,action:r.object.isRequired,actionTypeIDsWithNoFreeForm:r.object,autoFocus:r.bool,onEmptyBackspace:r.func.isRequired,onPrefixClick:r.func.isRequired,onSelect:r.func.isRequired,object:r.object,placeID:r.string,shortTagger:r.bool},getDefaultProps:function(){return {autoFocus:true,onEmptyBackspace:o,onPrefixClick:o,onSelect:o,shortTagger:false};},getInitialState:function(){var t=this.props.actionTypeIDsWithNoFreeForm,u=!t||!t[this.props.action.getUniqueID()];return {query:this.props.object?this.props.object.getTitle():'',allowFreeForm:u};},componentWillMount:function(){var t=new l({getAllForEmptyQuery:true,bootstrapRequests:[{uri:'/ajax/metacomposer/attachment/og/typeahead/query/object_loader',data:{at_id:this.props.action.getUniqueID(),is_bootstrap:true,query:this.state.query,place_id:this.props.placeID,viewer:this.props.actorID}}],queryRequests:[{uri:'/ajax/metacomposer/attachment/og/typeahead/query/object_loader',data:{at_id:this.props.action.getUniqueID(),is_bootstrap:false,query:this.state.query,place_id:this.props.placeID,viewer:this.props.actorID}}],auxiliaryFields:{icon:'icon',verified:'is_verified'}}),u=null;if(this.state.allowFreeForm){var v=new j('.+');u=new k({asyncSource:t,regexSource:v,appendRegexEntries:true});}else u=t;this.setState({dataSource:u});},_onSelect:function(t){this.setState({query:t.getTitle()});this.props.onSelect(t);},_onBackspace:function(event){if(this.props.object&&this.props.object.getTitle()===event.target.value)this.props.onSelect(null);if(event.target.value==='')this.props.onEmptyBackspace();},_onClear:function(){this.setState({query:''});this.props.onSelect(null);},_onChange:function(event){this.setState({query:event.target.value});},_onPrefixClick:function(){this.props.onPrefixClick();},focusInput:function(){var t=this.refs.objectTypeahead;if(t)t.focusInput&&t.focusInput();},render:function(){var t=this.props.action.getAuxiliaryData(),u=t?t.prompt:'';return (i.createElement(h,{cols:2,className:"_52wi _5esl",role:"presentation"},i.createElement(p,{className:"_5esm _t2_",key:"prefix",role:"presentation",onClick:this._onPrefixClick},this.props.action.getTitle()),i.createElement(p,{className:"_5esw",key:"suffix",role:"presentation"},i.createElement(m,{ref:"objectTypeahead",presenter:this._getPresenter(),clearable:true,focusedOnInit:this.props.autoFocus,autoHighlight:true,showEntriesOnFocus:true,placeholder:u,selectedEntry:this.props.object,className:"_5esx _52xo",queryString:this.state.query,searchSource:this.state.dataSource,highlightOnSelect:true,onSelectAttempt:this._onSelect,onBackspace:this._onBackspace,onClear:this._onClear,onChange:this._onChange,tallInput:false}))));},_getPresenter:function(){return Object.assign({},g,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:{short:this.props.shortTagger,scrollable:!this.props.shortTagger,customIcon:this.props.action.getAuxiliaryData().icon}});}});e.exports=s;},null);
__d("ReactComposerActivityTaggerComponent.react",["ReactComposerActionTaggerComponent.react","ReactComposerObjectTaggerComponent.react","React","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=i,l=k.PropTypes,m=i.createClass({displayName:"ReactComposerActivityTaggerComponent",propTypes:{actorID:l.string.isRequired,autoFocus:l.bool,placeID:l.string,shortTagger:l.bool,taggerData:l.object.isRequired,taggerSource:l.object.isRequired,onSelect:l.func.isRequired},getDefaultProps:function(){return {autoFocus:true,shortTagger:false,taggerData:{},taggerSource:{},onSelect:j};},getInitialState:function(){return {action:this.props.taggerData.action,object:this.props.taggerData.object};},componentDidUpdate:function(){if(this.state.action&&!this.state.object){var n=this.refs.objectTagger;n&&n.focusInput();}},render:function(){if(this.state.action)return (i.createElement(h,{ref:"objectTagger",actorID:this.props.actorID,action:this.state.action,actionTypeIDsWithNoFreeForm:this.props.taggerData.actionTypeIDsWithNoFreeForm,autoFocus:this.props.autoFocus,object:this.state.object,onEmptyBackspace:this._onEmptyBackspace,onPrefixClick:this._onEmptyBackspace,onSelect:this._onChangeObject,layerPosition:this.props.layerPosition,shortTagger:this.props.shortTagger,placeID:this.props.placeID}));return (i.createElement(g,{autoFocus:this.props.autoFocus,taggerSource:this.props.taggerSource,onSelect:this._onChangeAction,layerPosition:this.props.layerPosition,shortTagger:this.props.shortTagger}));},_onChangeAction:function(n){this.setState({action:n});this.props.onSelect&&this.props.onSelect(this.getTaggerData(n,null));},_onChangeObject:function(n){this.props.onSelect&&this.props.onSelect(this.getTaggerData(this.state.action,n));this.setState({object:n});},_onEmptyBackspace:function(){this.setState({action:null,object:null});},getTaggerData:function(n,o){var p=this.props.taggerData;p.action=n;p.object=o;return p;}});e.exports=m;},null);
__d("ReactComposerActivityTaggerContainer.react",["ReactComposerActivityTaggerComponent.react","ReactComposerMinutiaeAttachmentActions","ReactComposerTaggerActions","ReactComposerTaggerContainerMixin","ReactComposerTaggerType","React","Map","OGComposerJSConstants","WebAsyncSearchSource"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=l,q=p.PropTypes,r=l.createClass({displayName:"ReactComposerActivityTaggerContainer",_searchSources:(new m()),mixins:[j],statics:{taggerID:k.ACTIVITY,taggerComponent:g},propTypes:{isPersonalTimeline:q.bool,rankVerbs:q.bool,placeID:q.string},getDefaultProps:function(){return {isPersonalTimeline:false,rankVerbs:false,placeID:null};},componentWillMount:function(){this._updateSearchSource(this.props.placeID);},componentWillReceiveProps:function(s){if(s.placeID!==this.props.placeID)this._updateSearchSource(s.placeID);},__onTaggerDataChanged:function(s){if(s.action&&s.object){i.selectTagger(this.context.composerID,null);var t=this._shouldFetchMinutiaeAttachment(s.action,s.object);if(t)h.fetchMinutiaeAttachment(this.context.composerID,s.action.getUniqueID(),s.object.getUniqueID(),this.context.targetID,!!this.props.isPersonalTimeline);}else h.setMarkup(this.context.composerID,null);},_shouldFetchMinutiaeAttachment:function(s,t){if(t.getAuxiliaryData().isRegexEntry)return false;var u=s.getUniqueID();if(u==n.ActionTypeIDs.COMPOSER_LOOKS_FOR||u==n.ActionTypeIDs.COMPOSER_FEELS)return false;return true;},_updateSearchSource:function(s){var t=null;if(this._searchSources.has(s)){t=this._searchSources.get(s);}else{t=this._createSearchSource(s);this._searchSources.set(s,t);}i.setTaggerSource(this.context.composerID,k.ACTIVITY,t);},_createSearchSource:function(s){var t='/ajax/metacomposer/attachment/og/typeahead/bootstrap/action_type_loader',u={place_id:s,rank_verbs:this.props.rankVerbs,viewer:this.props.actorID},v={getAllForEmptyQuery:true,bootstrapRequests:[{uri:t,data:Object.assign({},u,{is_prefetching:true})}],queryRequests:[],auxiliaryFields:{default_icon:'default_icon',icon:'icon',prompt:'prompt'}};if(this.props.rankVerbs)v.queryRequests=[{uri:t,data:u}];var w=new o(v);w.bootstrap();return w;}});e.exports=r;},null);
__d("ReactComposerLocationTaggerButton.react",["ReactComposerTaggerButtonMixin","ReactComposerTaggerType","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.createClass({displayName:"ReactComposerLocationTaggerButton",mixins:[g],statics:{taggerID:h.LOCATION},getTitle:function(){return k._("Tag a location");},getTooltip:function(){return k._("Add a location to your post");},getClassName:function(){return "_52xx";}});e.exports=l;},null);
__d("ReactComposerTaggerView.react",["ReactComposerTaggerViewMixin","React","XUITypeaheadViewItem.react"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=h.createClass({displayName:"ReactComposerTaggerView",mixins:[g],getItemImpl:function(){return i;}});e.exports=j;},null);
__d("ReactComposerTaggerPresenter",["ReactComposerTaggerView.react"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports={ViewRenderer:g,useLayer:true};},null);
__d("ReactComposerLocationTaggerComponent.react",["ReactComposerTaggerPresenter","Grid.react","React","SearchableEntry","XUITypeahead.react","WebAsyncSearchSource","cx","isValidUniqueID","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=h.GridItem,r=i,s=r.PropTypes;function t(w){var x=w.title||w.text,y=w.uniqueID||w.uid;if(!x||!n(y))return null;var z=[];if(w.address)z.push(w.address);if(w.subtext)z.push(w.subtext);return new j({auxiliaryData:{address:w.address,cityID:w.city_id,cityName:w.city_name,cityPageID:w.city_page_id},photo:w.photo,subtitle:z.join(' \u00b7 '),title:x,type:w.place_type,uniqueID:y,uri:w.uri||w.path});}var u=new l({bootstrapRequests:[{uri:'/ajax/places/typeahead'}],getAllForEmptyQuery:true,queryRequests:[{uri:'/ajax/places/typeahead',data:{include_subtext:true,include_address:1,exact_match:false,use_unicorn:true,allow_places:true,allow_cities:true,render_map:false,limit:15}}],packageFn:t}),v=i.createClass({displayName:"ReactComposerLocationTaggerComponent",propTypes:{autoFocus:s.bool,implicitLocationEnabled:s.bool,placeholder:s.string,shortTagger:s.bool,taggerSource:s.object,taggerData:s.object.isRequired,onSelect:s.func},getDefaultProps:function(){return {autoFocus:true,implicitLocationEnabled:false,onSelect:o,shortTagger:false,placeholder:p._("Where are you?"),taggerData:{}};},getInitialState:function(){return {query:this.props.taggerData.place?this.props.taggerData.place.getTitle():''};},_getCopyOfData:function(){return Object.assign({},this.props.taggerData);},_onSelect:function(w){var x=this._getCopyOfData();x.place=w;this.setState({query:w.getTitle()});this.props.onSelect&&this.props.onSelect(x);},_onChange:function(event){this.setState({query:event.target.value});},_onBackspace:function(event){if(this.state.query===event.target.value)this._removePlace();},_onClear:function(){this._removePlace();this.setState({query:''});},_removePlace:function(){var w=this._getCopyOfData();w.place=null;if(!this.props.implicitLocationEnabled)w.implicitLocation=null;this.props.onSelect&&this.props.onSelect(w);},render:function(){return (i.createElement(h,{cols:2,className:"_5es8 _5esl",role:"presentation"},i.createElement(q,{key:"prefix",className:"_5esm",role:"presentation"},p._("At")),i.createElement(q,{key:"tagger",className:"_5esw",role:"presentation"},i.createElement(k,{className:"_5esx _5esy",queryString:this.state.query,selectedEntry:this.props.taggerData.place,focusedOnInit:this.props.autoFocus,initialEntry:this.props.taggerData.place,placeholder:this.props.placeholder,onBackspace:this._onBackspace,onClear:this._onClear,onChange:this._onChange,onSelectAttempt:this._onSelect,presenter:this._getPresenter(),searchSource:u,showEntriesOnFocus:true,tallInput:false,highlightOnSelect:true,clearable:true}))));},_getPresenter:function(){return Object.assign({},g,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:{short:this.props.shortTagger}});}});e.exports=v;},null);
__d("ReactComposerLocationTaggerContainer.react",["ReactComposerLocationTaggerComponent.react","ReactComposerTaggerActions","ReactComposerTaggerContainerMixin","ReactComposerTaggerType","React","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=k,n=m.PropTypes,o=k.createClass({displayName:"ReactComposerLocationTaggerContainer",mixins:[i],propTypes:{shortTokenizer:n.bool,taggerSource:n.object,taggerData:n.object,onSelect:n.func.isRequired},getDefaultProps:function(){return {onSelect:l,shortTokenizer:false};},statics:{taggerID:j.LOCATION,taggerComponent:g},__onTaggerDataChanged:function(p){var q=p.place&&p.place.getAuxiliaryData();if(q)p.implicitLocation={cityid:q.cityID,citypageid:q.cityPageID,citystring:q.cityName};if(p.place)h.selectTagger(this.context.composerID,null);}});e.exports=o;},null);
__d("ReactComposerPeopleTaggerButton.react",["ReactComposerTaggerButtonMixin","ReactComposerTaggerType","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=i.createClass({displayName:"ReactComposerPeopleTaggerButton",mixins:[g],statics:{taggerID:h.PEOPLE},getTitle:function(){return k._("Tag people");},getTooltip:function(){return k._("Tag people in your post");},getClassName:function(){return "_41bh";}});e.exports=l;},null);
__d("ReactComposerPeopleTaggerComponent.react",["ReactComposerTaggerPresenter","Grid.react","React","XUITokenizer.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=h.GridItem,o=i,p=o.PropTypes,q=i.createClass({displayName:"ReactComposerPeopleTaggerComponent",propTypes:{actorID:p.string,autoFocus:p.bool,placeholder:p.string,shortTagger:p.bool,taggerSource:p.object.isRequired,taggerData:p.array.isRequired,onPeopleTagRemove:p.func,onSelect:p.func},getDefaultProps:function(){return {autoFocus:true,onSelect:l,placeholder:m._("Who are you with?"),shortTagger:false,taggerData:[]};},_onAdd:function(r){var s=this.props.taggerData,t=r.getUniqueID(),u=s.some(function(v){return v.getUniqueID()===t;});if(u){return;}else s.push(r);this.props.onSelect&&this.props.onSelect(s);},_onRemove:function(r){var s=this.props.taggerData,t=s.indexOf(r);if(t==-1)return;s.splice(t,1);this.props.onPeopleTagRemove&&this.props.onPeopleTagRemove(r);this.props.onSelect&&this.props.onSelect(s);},render:function(){var r={};if(this.props.actorID)r[this.props.actorID]=true;return (i.createElement(h,{cols:2,className:"_3v-g _5esl",role:"presentation"},i.createElement(n,{key:"label",className:"_5esm",role:"presentation"},m._("With")),i.createElement(n,{key:"tokenizer",className:"_5esw",role:"presentation"},i.createElement(j,i.__spread({presenter:this._getPresenter(),focusedOnInit:this.props.autoFocus,excludedEntries:r,entries:this.props.taggerData,className:"_5esx _3v-n",placeholder:this.props.placeholder,searchSource:this.props.taggerSource,onAddEntryAttempt:this._onAdd,onRemoveEntryAttempt:this._onRemove},this.props)))));},_getPresenter:function(){return Object.assign({},g,{layerPosition:this.props.layerPosition||undefined,extraRendererProps:{short:this.props.shortTagger}});}});e.exports=q;},null);
__d("ReactComposerPeopleTaggerContainer.react",["ReactComposerPeopleTaggerComponent.react","ReactComposerPhotoActions","ReactComposerTaggerActions","ReactComposerTaggerContainerStateMixin","ReactComposerTaggerType","React"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=l,n=m.PropTypes,o=l.createClass({displayName:"ReactComposerPeopleTaggerContainer",mixins:[j],propTypes:{actorID:n.string,shortTagger:n.bool,taggerData:n.array,taggerSource:n.object},getDefaultProps:function(){return {shortTagger:false};},statics:{taggerID:k.PEOPLE},render:function(){if(!this.state.isSelected)return l.createElement("noscript",null);return (l.createElement(g,l.__spread({},this.props,{autoFocus:this.state.autoFocus,onPeopleTagRemove:this._onPeopleTagRemove,onSelect:this._onTaggerDataChanged,taggerData:this.state.taggerData,taggerSource:this.state.taggerSource})));},_onTaggerDataChanged:function(p){i.setTaggerData(this.context.composerID,k.PEOPLE,p);this.props.onSelect&&this.props.onSelect(p);},_onPeopleTagRemove:function(p){h.untagSubjectFromAllPhotos(this.context.composerID,p.getUniqueID());}});e.exports=o;},null);
__d("ReactShareDialogComposerActionType",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();e.exports=g({SET_SHARE_DIALOG_TARGET:null,SET_SHARE_DIALOG_TARGET_INFO:null,SET_SHARE_DIALOG_ATTRIBUTION:null});},null);
__d("ReactShareDialogComposerStore",["ReactComposerStoreBase","ReactShareDialogComposerActionType"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){"use strict";g.call(this,(function(){return {target:null,targetInfo:{},attribution:null};}),(function(l){switch(l.type){case h.SET_SHARE_DIALOG_TARGET:this.$ReactShareDialogComposerStore0(l);break;case h.SET_SHARE_DIALOG_TARGET_INFO:this.$ReactShareDialogComposerStore1(l);break;case h.SET_SHARE_DIALOG_ATTRIBUTION:this.$ReactShareDialogComposerStore2(l);break;}}.bind(this)));}k.prototype.getTarget=function(l){"use strict";return this.getComposerData(l).target;};k.prototype.getTargetInfo=function(l){"use strict";return this.getComposerData(l).targetInfo;};k.prototype.getAttribution=function(l){"use strict";return this.getComposerData(l).attribution;};k.prototype.$ReactShareDialogComposerStore0=function(l){"use strict";var m=this.getComposerData(l.composerID);m.target=l.target;this.emitChange(l.composerID);};k.prototype.$ReactShareDialogComposerStore1=function(l){"use strict";var m=this.getComposerData(l.composerID);m.targetInfo=l.targetInfo;this.emitChange(l.composerID);};k.prototype.$ReactShareDialogComposerStore2=function(l){"use strict";var m=this.getComposerData(l.composerID);m.attribution=l.attribution;this.emitChange(l.composerID);};e.exports=new k();},null);
__d("ReactShareDialogComposerActions",["ReactComposerDispatcher","ReactShareDialogComposerActionType","ReactShareDialogComposerStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();b('ReactShareDialogComposerStore');var i={setTarget:function(j,k){g.dispatch({composerID:j,type:h.SET_SHARE_DIALOG_TARGET,target:k});},setTargetInfo:function(j,k){g.dispatch({composerID:j,type:h.SET_SHARE_DIALOG_TARGET_INFO,targetInfo:k});},setAttribution:function(j,k){g.dispatch({composerID:j,type:h.SET_SHARE_DIALOG_ATTRIBUTION,attribution:k});}};e.exports=i;},null);
__d("ShareDialogAttribution.react",["React","cx","emptyFunction","fbt","Link.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"ShareDialogAttribution",propTypes:{name:m.string,onRemove:m.func},getDefaultProps:function(){return {onRemove:i};},_onRemove:function(){this.props.onRemove();},render:function(){return (g.createElement("div",{className:"_5qio"},g.createElement("span",null,j._("via"))," ",this.props.name," "+' '+"(",g.createElement(k,{onClick:this._onRemove},j._("remove")),")"));}});e.exports=n;},null);
__d("ShareDialogAttachment.react",["React","cx","emptyFunction","fbt","Link.react"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=g,m=l.PropTypes,n=g.createClass({displayName:"ShareDialogAttachment",propTypes:{overflowing:m.bool,onExpand:m.func,onCollapse:m.func},getDefaultProps:function(){return {overflowing:false,onExpand:i,onCollapse:i};},getInitialState:function(){return {expanded:false};},_toggle:function(){if(this.state.expanded){this.props.onCollapse();}else this.props.onExpand();this.setState({expanded:!this.state.expanded});},render:function(){var o;if(this.props.overflowing){var p;if(this.state.expanded){p=g.createElement("span",null,g.createElement("span",{className:"_u_1"},"↑")," ",j._("Collapse"));}else p=g.createElement("span",null,j._("Show All")," ",g.createElement("span",{className:"_u_1"},"↓"));o=g.createElement("p",{className:"_u_2"},g.createElement(k,{className:"_u_3",onClick:this._toggle},p));}var q=(("_u_4")+(this.props.overflowing&&!this.state.expanded?' '+"_u_5":''));return (g.createElement("div",{className:q},o,this.props.children));}});e.exports=n;},null);
__d("ReactShareDialogAttachmentContainer.react",["ReactComposerContextMixin","ShareDialogAttachment.react","DOMContainer.react","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=j,m=l.PropTypes,n=400,o=j.createClass({displayName:"ReactShareDialogAttachmentContainer",mixins:[g],propTypes:{attachment:m.instanceOf(HTMLElement)},getInitialState:function(){return {shouldOverflow:false};},componentDidMount:function(){setTimeout(function(){var p=false;if(this.context.gks.gkOsricExpandAttachment&&this.props.attachment&&this.refs.attachment){var q=j.findDOMNode(this.refs.attachment);p=q.clientHeight>n;}this.setState({shouldOverflow:p});}.bind(this),0);},render:function(){if(!this.props.attachment)return null;return (j.createElement(h,{overflowing:this.state.shouldOverflow},j.createElement("div",{ref:"attachment",className:"_51jo"},j.createElement(i,null,this.props.attachment))));}});e.exports=o;},null);
__d("ReactShareDialogComposerStatusAttachmentFooter.react",["ReactComposerActivityTaggerButton.react","ReactComposerActivityTaggerContainer.react","ReactComposerAudienceSelectorContainer.react","ReactComposerContextMixin","ReactComposerFooter.react","ReactComposerFooterActions.react","ReactComposerLocationTaggerButton.react","ReactComposerLocationTaggerContainer.react","ReactComposerPeopleTaggerButton.react","ReactComposerPeopleTaggerContainer.react","ReactComposerTaggerButtons.react","ReactComposerTaggers.react","ReactComposerTaggerType","ShareDialogAudienceTypes","LeftRight.react","React","ReactComponentWithPureRenderMixin","XUIAmbientNUX.react","XUIButton.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){b.__markCompiled&&b.__markCompiled();var ca=v,da=ca.PropTypes,ea=v.createClass({displayName:"ReactShareDialogComposerStatusAttachmentFooter",mixins:[w,j],propTypes:{taggersSource:da.object.isRequired,privacySelector:da.instanceOf(HTMLElement).isRequired,onActivityNUXClose:da.func,onCancel:da.func.isRequired,onPost:da.func.isRequired,onSelectActivity:da.func.isRequired,onSelectLocation:da.func.isRequired,placeID:da.string,showActivityNUX:da.bool,showTaggers:da.bool.isRequired,posting:da.bool,target:t.isValid,targetInfo:da.object.isRequired},getDefaultProps:function(){return {onCancel:aa,onPost:aa,onActivityNUXClose:aa,onSelectActivity:aa,onSelectLocation:aa,showActivityNUX:false,showTaggers:false,targetInfo:{}};},render:function(){return (v.createElement("div",null,this._getTaggers(),v.createElement(k,{background:"light-wash"},v.createElement(u,null,this._getButtons(),this._getFooterActions()))));},_getTaggers:function(){if(!this.props.showTaggers)return v.createElement("noscript",null);return (v.createElement(r,null,v.createElement(p,{actorID:this.context.actorID,layerPosition:"above",shortTagger:true,taggerSource:this.props.taggersSource[s.PEOPLE]}),v.createElement(n,{actorID:this.context.actorID,layerPosition:"above",onSelect:this.props.onSelectLocation,shortTagger:true,taggerSource:this.props.taggersSource[s.LOCATION]}),v.createElement(h,{actorID:this.context.actorID,layerPosition:"above",onSelect:this.props.onSelectActivity,placeID:this.props.placeID,shortTagger:true,taggerSource:this.props.taggersSource[s.ACTIVITY]})));},_getButtons:function(){if(!this.props.showTaggers||this.props.posting)return v.createElement("noscript",null);return (v.createElement(q,null,v.createElement(o,null),v.createElement(m,null),v.createElement(g,{ref:"activityButton"}),this._getActivityNUX()));},_getActivityNUX:function(){if(!this.props.showActivityNUX||!this.refs.activityButton)return null;return (v.createElement(x,{context:v.findDOMNode(this.refs.activityButton),onCloseButtonClick:this.props.onActivityNUXClose,position:"above",shown:true},ba._("New! You can choose to share your feelings and activities.")));},_getFooterActions:function(){var fa=this.props.target===t.OWN&&!this.props.posting?v.createElement(i,{audienceXHP:this.props.privacySelector,viewerIsTarget:this.props.target===t.OWN}):v.createElement("noscript",null),ga=this.props.target!==t.OWN&&!this.props.targetInfo.audienceTargets,ha;if(this.props.target!==t.MESSAGE){ha=this.props.posting?ba._("Posting"):ba._("Post");}else ha=this.props.posting?ba._("Sending"):ba._("Send");return (v.createElement(l,null,fa,v.createElement("div",{className:"_4-88"},v.createElement(y,{use:"default",label:ba._("Cancel"),className:"_2g60",onClick:this.props.onCancel}),v.createElement(y,{use:"confirm",label:ha,className:"_2g61",onClick:this.props.onPost,disabled:ga}))));}});e.exports=ea;},null);
__d("ReactShareDialogComposerStatusAttachmentFooterContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ComposerXNUX","ReactShareDialogComposerStatusAttachmentFooter.react","ReactShareDialogComposerStore","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=o,q=p.PropTypes,r=o.createClass({displayName:"ReactShareDialogComposerStatusAttachmentFooterContainer",mixins:[n,g(i,m)],propTypes:{showActivityNUX:q.bool},statics:{calculateState:function(s,t){var u=i.getTaggerData(s,j.LOCATION),v=u&&u.place&&u.place.getUniqueID();return {placeID:v,target:m.getTarget(s),targetInfo:m.getTargetInfo(s)};}},getInitialState:function(){return {showActivityNUX:this.props.showActivityNUX,posting:false};},componentWillMount:function(){if(this.props.showActivityNUX)setTimeout(function(){this.setState({showActivityNUX:true});}.bind(this),1000);},render:function(){return (o.createElement(l,o.__spread({},this.props,this.state,{onActivityNUXClose:this._onActivityNUXClose,onPost:this._onPost,onSelectActivity:this._closeTaggers,onSelectLocation:this._closeTaggers})));},_closeTaggers:function(s){if(s&&s.getType&&s.getType()==='action_type')return;h.selectTagger(this.context.composerID,null);},_onActivityNUXClose:function(){this.setState({showActivityNUX:false});k.sendMarkSeenRequest(k.SHARER_MINUTIAE_NUX);},_onPost:function(s){this.setState({posting:true});this.props.onPost(s);}});e.exports=r;},null);
__d("ShareDialogWarningNotice.react",["FBToggle.react","Image.react","LeftRight.react","React","cx","fbt","xuiglyph"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=j,o=n.PropTypes,p=j.createClass({displayName:"ShareDialogWarningNotice",propTypes:{warning:o.object.isRequired},render:function(){return (j.createElement(g,{className:"_3ba_"},j.createElement(i,{className:"_3bb0"},j.createElement("span",{className:"_3bb1"},j.createElement(h,{src:m({name:'help-solid',shade:'accent',size:'medium'})})),j.createElement("span",{className:"_3bb2"},l._("Who can see this?"))),j.createElement("div",{className:"_3bb3"},j.createElement("span",{dangerouslySetInnerHTML:this.props.warning}))));}});e.exports=p;},null);
__d("ReactShareDialogComposerStatusAttachment.react",["ReactComposerContextMixin","ReactComposerStatusAttachmentMentionsInputContainer.react","ReactComposerTaggerSummaryContainer.react","ReactComposerTaggerType","ShareDialogAttribution.react","ReactShareDialogAttachmentContainer.react","ShareDialogAudienceTypes","ShareDialogDataSources","ReactShareDialogComposerStatusAttachmentFooterContainer.react","ShareDialogWarningNotice.react","SharerType","React","XUINotice.react","cx","emptyFunction","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();var w=r,x=w.PropTypes,y=r.createClass({displayName:"ReactShareDialogComposerStatusAttachment",mixins:[g],propTypes:{activeAudience:m.propType,privacySelector:x.instanceOf(HTMLElement).isRequired,attachment:x.object,dataSources:x.instanceOf(n).isRequired,taggersData:x.object,onCancel:x.func,onPost:x.func,onRemoveAttribution:x.func,publicityWarning:x.object,showDoingNUX:x.bool,via:x.object,useCheckinBranding:x.bool,sharerType:x.oneOf([q.ALL_MODES,q.MESSAGE_ONLY,q.PAGE_ONLY,q.PAGE_VIEWER]),subtleWarning:x.bool},getDefaultProps:function(){return {taggersData:{},onCancel:u,onPost:u,onRemoveAttribution:u};},render:function(){var z=this.props.dataSources,aa=this.props.activeAudience!==m.MESSAGE?z.getSource(n.TYPES.MENTIONS):null,ba=v._("Say something about this..."),ca=r.createElement("noscript",null);if(this._shouldShowTaggers())ca=r.createElement(i,null);return (r.createElement("div",null,r.createElement(h,{mentionsSource:aa,placeholder:ba,className:"autofocus"}),ca,this._getAttribution(),r.createElement(l,{attachment:this.props.attachment}),this._getWarning(),r.createElement(o,{showTaggers:this._shouldShowTaggers(),taggersSource:this._getTaggersSource(),privacySelector:this.props.privacySelector,onCancel:this.props.onCancel,onPost:this.props.onPost,showActivityNUX:this.props.showDoingNUX})));},_shouldShowTaggers:function(){return (this.context.gks.gkOsricTaggers&&this.props.activeAudience!==m.GROUP&&this.props.activeAudience!==m.MESSAGE&&this.props.sharerType!==q.PAGE_VIEWER);},_getTaggersSource:function(){var z={},aa=this.props.dataSources;z[j.PEOPLE]=aa.getSource(n.TYPES.PERSON);z[j.LOCATION]=aa.getSource(n.TYPES.PLACE);z[j.ACTIVITY]=aa.getSource(n.TYPES.ACTION);return z;},_getTaggerData:function(z){return this.props.taggersData?this.props.taggersData[z]:null;},_getAttribution:function(){var z=this.props.attribution;if(!z||!z.name||this.props.activeAudience===m.MESSAGE)return r.createElement("noscript",null);return (r.createElement(k,{onRemove:this.props.onRemoveAttribution,name:z.name}));},_getWarning:function(){if(!this.props.publicityWarning)return r.createElement("noscript",null);if(this.props.subtleWarning){return (r.createElement(p,{warning:this.props.publicityWarning}));}else return (r.createElement(s,{className:"_2nt0",size:"small"},r.createElement("span",{dangerouslySetInnerHTML:this.props.publicityWarning})));}});e.exports=y;},null);
__d("ReactShareDialogComposerStatusAttachmentContainer.react",["ReactComposerPropsAndStoreBasedStateMixin","ReactComposerTaggerActions","ReactComposerTaggerStore","ReactComposerTaggerType","ReactShareDialogComposerActions","ReactShareDialogComposerStore","ShareDialogAudienceTypes","ReactShareDialogComposerStatusAttachment.react","ShareDialogDataSources","Arbiter","React","containsNode","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=q,u=t.PropTypes,v=q.createClass({displayName:"ReactShareDialogComposerStatusAttachmentContainer",_ogSubscription:Object,mixins:[g(i,l)],propTypes:{activeAudience:m.propType,privacySelector:u.instanceOf(HTMLElement).isRequired,attachment:u.object,dataSources:u.instanceOf(o).isRequired,onCancel:u.func,onPost:u.func,publicityWarning:u.object,showDoingNUX:u.bool,via:u.object,useCheckinBranding:u.bool},getDefaultProps:function(){return {onCancel:s,onPost:s};},componentWillMount:function(){this._ogSubscription=p.subscribe('composer/ogCustomIconSelected',function(event,w){if(!r(q.findDOMNode(this.refs.shareBody),w.triggerElement))return;var x=i.getTaggerData(this.context.composerID,j.ACTIVITY)||{};x.actionIconID=w.icon_id;h.setTaggerData(this.context.composerID,j.ACTIVITY,x);}.bind(this));},componentWillUnmount:function(){if(this._ogSubscription){var w=this._ogSubscription;w.unsubscribe&&w.unsubscribe();this._ogSubscription=null;}},statics:{beforeCalculateInitialState:function(w,x){var y=x.via;if(y&&y.name)k.setAttribution(w,y);},calculateState:function(w,x){var y=i.getTaggerData(w,j.ACTIVITY);return {taggersData:i.getTaggersData(w),attribution:l.getAttribution(w),actionIconID:y?y.actionIconID:null};}},render:function(){return (q.createElement(n,q.__spread({ref:"shareBody"},this.props,this.state,{onRemoveAttribution:this._onRemoveAttribution})));},_onRemoveAttribution:function(){k.setAttribution(this.context.composerID,null);}});e.exports=v;},null);
__d("ReactShareDialogComposerStatusEagerAttachment.react",["ReactComposerAttachmentType","ReactComposerAttachmentBodyMixin","ShareDialogAudienceTypes","ReactShareDialogComposerStatusAttachmentContainer.react","ShareDialogDataSources","React","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l,o=n.PropTypes,p=l.createClass({displayName:"ReactShareDialogComposerStatusEagerAttachment",mixins:[h()],propTypes:{selected:o.bool,subtleWarning:o.bool,activeAudience:i.propType,privacySelector:o.instanceOf(HTMLElement).isRequired,attachment:o.object,dataSources:o.instanceOf(k),onCancel:o.func,onPost:o.func,publicityWarning:o.object,showDoingNUX:o.bool,via:o.object,useCheckinBranding:o.bool},getDefaultProps:function(){return {selected:true,onCancel:m,onPost:m};},statics:{attachmentID:g.STATUS},renderX:function(){return l.createElement(j,l.__spread({},this.props));}});e.exports=p;},null);
__d("ReactShareDialogComposer.react",["ReactComposer.react","ReactComposerBody.react","ShareDialogAudienceTypes","ReactShareDialogComposerStatusEagerAttachment.react","ShareDialogDataSources","SharerType","React","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=m,p=o.PropTypes,q=m.createClass({displayName:"ReactShareDialogComposer",propTypes:{experiments:p.shape({subtleWarning:p.bool}),postId:p.string,shareType:p.string,activeAudience:i.propType,privacySelector:p.instanceOf(HTMLElement).isRequired,userId:p.string.isRequired,attachment:p.object,dataSources:p.instanceOf(k),onCancel:p.func,onPost:p.func,publicityWarning:p.object,sharerType:p.oneOf([l.ALL_MODES,l.MESSAGE_ONLY,l.PAGE_ONLY,l.PAGE_VIEWER]),showDoingNUX:p.bool,via:p.object,useCheckinBranding:p.bool},getDefaultProps:function(){return {onCancel:n,onPost:n,sharerType:l.ALL_MODES,status:{type:'composing'}};},_onCancel:function(r){var s=this.props.onCancel;s&&s(r);},_onPost:function(r){var s=this.props.onPost;s&&s(r);},render:function(){return (m.createElement(g,{hideBorders:true,loggingConfig:this.props.loggingConfig},m.createElement(h,null,m.createElement(j,{activeAudience:this.props.activeAudience,privacySelector:this.props.privacySelector,attachment:this.props.attachment,dataSources:this.props.dataSources,onCancel:this._onCancel,onPost:this._onPost,publicityWarning:this.props.publicityWarning,showDoingNUX:this.props.showDoingNUX,via:this.props.via,useCheckinBranding:this.props.useCheckinBranding,sharerType:this.props.sharerType,subtleWarning:this.props.experiments&&this.props.experiments.subtleWarning}))));}});e.exports=q;},null);
__d("ShareDialogAudienceHeader.react",["ShareDialogAudience.react","ShareDialogAudienceSelector.react","ShareDialogDataSources","SharerType","React","cx","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i.TYPES,o=g.TYPES,p=k,q=p.PropTypes,r=k.createClass({displayName:"ShareDialogAudienceHeader",propTypes:{activeAudience:function(s){if(!o.isValid(s.activeAudience))return new Error('The active audience is invalid.');},dataSources:q.instanceOf(i),onAudienceSelect:q.func},getDefaultProps:function(){return {onAudienceSelect:m};},render:function(){var s=this.props.dataSources,t=this.props.activeAudience,u=[];if(this.props.sharerType===j.MESSAGE_ONLY){u.push(o.MESSAGE);}else if(this.props.sharerType===j.PAGE_ONLY){u.push(o.PAGE);}else if(this.props.sharerType===j.PAGE_VIEWER){u.push(o.OWN);}else{u.push(o.OWN);if(s.getSource(n.PERSON_WALL))u.push(o.PERSON);if(s.getSource(n.GROUP))u.push(o.GROUP);if(s.getSource(n.PAGE))u.push(o.PAGE);if(s.getSource(n.MESSAGE))u.push(o.MESSAGE);}var v=(("__0k")+(this.props.activeAudience===o.OWN?' '+"_47xt":'')+(this.props.activeAudience===o.PERSON?' '+"_47xu":'')+(this.props.activeAudience===o.GROUP?' '+"_47xv":'')+(this.props.activeAudience===o.PAGE?' '+"_47xw":'')+(this.props.activeAudience===o.MESSAGE?' '+"_47xx":''));return (k.createElement("div",{className:v},k.createElement(h,{allowedAudiences:u,activeAudience:t,onAudienceSelect:this.props.onAudienceSelect})));}});e.exports=r;},null);
__d("ReactSharer.react",["ReactShareDialogComposer.react","ShareDialogAudienceHeader.react","ShareDialogAudienceTypes","ShareDialogAudience.react","ShareDialogDataSources","React"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=l,n=m.PropTypes,o=l.createClass({displayName:"ReactSharer",propTypes:{activeAudience:i.propType,dataSources:n.instanceOf(k),privacySelector:n.instanceOf(HTMLElement).isRequired,userId:n.string.isRequired,attachment:n.object,gks:n.shape({showGroupThreads:n.bool,subtleWarning:n.bool}),messageTargets:n.array,onCancel:n.func,onChangeAudienceTargets:n.func,onClearAudienceTargets:n.func,onTargetSelect:n.func,onPost:n.func},render:function(){return (l.createElement("div",null,l.createElement(h,{key:"title",activeAudience:this.props.activeAudience,dataSources:this.props.dataSources,onAudienceSelect:this.props.onTargetSelect}),l.createElement(j,{key:"audience",userId:this.props.userId,activeAudience:this.props.activeAudience,messageTargets:this.props.messageTargets,dataSources:this.props.dataSources,onChange:this.props.onChangeAudienceTargets,onClear:this.props.onClearAudienceTargets,showGroupThreads:this.props.gks&&this.props.gks.showGroupThreads}),l.createElement(g,l.__spread({},this.props))));}});e.exports=o;},null);
__d("ReactSharerContainer.react",["ReactComposerContextMixin","ReactComposerPropsAndStoreBasedStateMixin","ReactComposerStore","ReactComposerStatusStore","ReactComposerTaggerStore","ReactComposerTaggerType","ReactSharer.react","ReactShareDialogComposerActions","ReactShareDialogComposerStore","ShareDialogAudienceTypes","SharerType","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=s.createClass({displayName:"ReactSharerContainer",mixins:[r,g,h(o)],statics:{beforeCalculateInitialState:function(u,v){var w=p.OWN;if(v.sharerType===q.MESSAGE_ONLY){w=p.MESSAGE;}else if(v.sharerType===q.PAGE_ONLY)w=p.PAGE;n.setTarget(u,w);n.setTargetInfo(u,{userId:v.userId});},calculateState:function(u,v){var w=o.getTargetInfo(u),x=w.audienceTargets,y=w.userId;return {activeAudience:o.getTarget(u),audienceTargets:x,userId:y};}},render:function(){return (s.createElement(m,s.__spread({},this.props,this.state,{onCancel:this._onCancel,onChangeAudienceTargets:this._onChangeAudienceTargets,onClearAudienceTargets:this._onClearAudienceTargets,onPost:this._onPost,onTargetSelect:this._onTargetSelect})));},_getStatefulResponse:function(){var u=this.props.contextConfig.composerID,v=k.getTaggersData(u),w=i.getAudience(u),x=j.getMessage(u),y=o.getTarget(u),z=o.getTargetInfo(u),aa=o.getAttribution(u),ba=z.audienceTargets?z.audienceTargets:[],ca=v[l.PEOPLE],da=v[l.LOCATION],ea=v[l.ACTIVITY],fa=ca.map(function(ka){return ka.getUniqueID();}),ga=null,ha=null;if(ea.object){var ia=ea.object.getUniqueID(),ja=ea.object.getTitle();if(!ia||ia===ja){ha=ja;}else ga=ia;}return {actorId:z.userId,audienceType:y,audienceTargets:ba,appId:this.props.appId,attributionId:aa?aa.id:null,internalExtra:this.props.internalExtra,message:x,messageTags:this.props.messageTags,ownerId:this.props.ownerId,privacy:w,postId:this.props.postId,sharedAdId:this.props.sharedAdId,shareType:this.props.shareType,source:'osbach-sharer',taggedActionId:ea.action?ea.action.getUniqueID():null,taggedActionIconId:ea.actionIconId,taggedObjectId:ga,taggedObjectStr:ha,taggedPeople:fa,taggedPlace:da&&da.place?da.place.getUniqueID():null};},_onTargetSelect:function(u){n.setTarget(this.context.composerID,u);n.setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId});},_onCancel:function(u){this.props.onCancel&&this.props.onCancel(this._getStatefulResponse(),u);},_onChangeAudienceTargets:function(u){if(u.length===0)return;var v=u[0],w=this.state.activeAudience===p.PAGE?{audienceTargets:[v.pageId],userId:v.actorId}:{audienceTargets:u,userId:this.props.userId};n.setTargetInfo(this.context.composerID,w);},_onClearAudienceTargets:function(){n.setTargetInfo(this.context.composerID,{audienceTargets:null,userId:this.props.userId});},_onPost:function(u){this.props.onPost(this._getStatefulResponse(),u);}});e.exports=t;},null);
__d("ReactSharerRoot.react",["ReactComposerContextProviderMixin","ReactSharerContainer.react","ReactComponentWithPureRenderMixin","React"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=j,l=k.PropTypes,m=j.createClass({displayName:"ReactSharerRoot",mixins:[i,g],propTypes:{contextConfig:l.shape({actorID:l.string.isRequired,composerID:l.string.isRequired,targetID:l.string.isRequired}).isRequired},render:function(){return j.createElement(h,j.__spread({},this.props));}});e.exports=m;},null);
__d("ReactSharerInit",["ReactSharerRoot.react","ShareDialogAudienceTypes","ShareDialogDataSources","DOM","React","uniqueID"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m,n={init:function(o,p){o=this.getPropsFromAsyncResponse(o);m=p;k.render(k.createElement(g,k.__spread({contextConfig:{actorID:o.userId,composerID:l(),gks:o.gks,targetID:o.userId},onCancel:this._onCancel,onPost:this._onPost},o)),m);},_onCancel:function(o,p){p.preventDefault();},_onPost:function(o,p){if(o.audienceType===h.OWN){j.appendContent(m,j.create('input',{name:'privacyx',type:'hidden',value:o.privacy}));}else if(o.audienceType===h.PERSON){j.appendContent(m,j.create('input',{name:'friendTarget',type:'hidden',value:o.audienceTargets.toString()}));}else if(o.audienceType===h.MESSAGE){j.appendContent(m,j.create('input',{name:'messageTarget',type:'hidden',value:o.audienceTargets.toString()}));}else if(o.audienceType===h.GROUP){j.appendContent(m,j.create('input',{name:'groupTarget',type:'hidden',value:o.audienceTargets.toString()}));}else if(o.audienceType===h.PAGE)j.appendContent(m,[j.create('input',{name:'pageTarget',type:'hidden',value:o.audienceTargets.toString()}),j.create('input',{name:'av',type:'hidden',value:o.actorId})]);if(o.taggedPeople){var q=0;o.taggedPeople.forEach(function(r){j.appendContent(m,j.create('input',{name:'composertags_with['+q+']',type:'hidden',value:r}));q++;});}j.appendContent(m,[j.create('input',{name:'xhpc_message_text',type:'hidden',value:o.message}),j.create('input',{name:'xhpc_message',type:'hidden',value:o.message}),j.create('input',{name:'composertags_place',type:'hidden',value:o.taggedPlace}),j.create('input',{name:'action_type_id[]',type:'hidden',value:o.taggedActionId}),j.create('input',{name:'icon_id',type:'hidden',value:o.taggedActionIconId}),j.create('input',{name:'object_id[]',type:'hidden',value:o.taggedObjectId}),j.create('input',{name:'object_str[]',type:'hidden',value:o.taggedObjectStr}),j.create('input',{name:'is_react',type:'hidden',value:'true'})]);},getPropsFromAsyncResponse:function(o){var p=o,q=p.sources,r=(function(ea,fa){var ga={},ha=Object.prototype.hasOwnProperty;if(ea==null)throw new TypeError();for(var ia in ea)if(ha.call(ea,ia)&&!ha.call(fa,ia))ga[ia]=ea[ia];return ga;})(p,{sources:1}),s=q,t=s.person,u=s.personTag,v=s.personWall,w=s.group,x=s.page,y=s.mentions,z=s.place,aa=s.feeling,ba=s.action,ca=s.object,da=(new i()).addSource(i.TYPES.ACTION,ba).addSource(i.TYPES.GROUP,w).addSource(i.TYPES.FEELING,aa).addSource(i.TYPES.MENTIONS,y).addSource(i.TYPES.MESSAGE,t).addSource(i.TYPES.OBJECT,ca).addSource(i.TYPES.PAGE,x).addSource(i.TYPES.PERSON,u).addSource(i.TYPES.PERSON_WALL,v).addSource(i.TYPES.PLACE,z);return Object.assign({dataSources:da},r);}};e.exports=n;},null);