/*!CK:3308131687!*//*1435268430,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["sNoWu"]); }

__d("MessagesViewerSetID",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"};},null);
__d("MessengerView",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={DETAIL:{COMPOSE:"detail\/compose",THREAD:"detail\/thread"},MASTER:{GROUPS:"master\/groups",PEOPLE:"master\/people",RECENT:"master\/recent"}};},null);
__d("MNCommerceErrors",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ALREADY_UNLINKED:1893001};},null);
__d("MNCommerceLoggerEvents",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={GEN_CALL:"gen_call",DUPLICATE_CALL:"duplicate_call",ERROR:"error",GEN_SHIPMENT_ENT:"gen_shipment_ent",GEN_SHIPMENT_TRACKING_ENT:"gen_shipment_tracking_ent",SHIPMENT_NOTIFICATION_READY:"shipment_notification_ready",SHIPMENT_NOTIFICATION_SENT:"shipment_notification_sent",ASYNC_EXECUTION:"async_execution",ASYNC_SCHEDULE:"async_schedule",ASYNC_THROTTLE:"async_throttle",ASYNC_USER_ACCOUNT_DISABLED:"async_user_account_disabled",ASYNC_GEN_DATA_ERROR:"async_gen_data_error",TRACKING_SHUTDOWN_WITH_EXCEPTION_ERROR:"tracking_shutdown_with_exception",TRACKING_SHUTDOWN_WITH_RETRY_ERROR:"tracking_shutdown_with_retry",DELIVERED_STATS:"delivered_stats",USER_LINKED:"user_linked",USER_LINK_FAILED:"user_link_failed",USER_TOKEN_DECRYPTION_FAILED:"user_token_decryption_failed",USER_TOKEN_DELIVERY_ATTEMPT:"user_token_delivery_attempt",USER_TOKEN_DELIVERED:"user_token_delivered",USER_TOKEN_DELIVERY_FAILED:"user_token_delivery_failed",USER_TOKEN_CRITICAL_LOOKUP:"user_token_critical_lookup",USER_TOKEN_LOOKUP_FAILED:"user_token_lookup_failed",USER_UNLINKED:"user_unlinked",USER_UNLINK_FAILED:"user_unlink_failed",USER_UNLINK_BUSINESS_NOTIFIED:"user_unlink_business_notified",USER_UNLINK_BUSINESS_NOTIFICATION_FAILED:"user_unlink_business_notification_failed",PLUGIN_CLIENT_RENDERED:"plugin_client_rendered",PLUGIN_RENDERED:"plugin_rendered",PLUGIN_HIDDEN_ALREADY_LINKED:"plugin_hidden_already_linked",PLUGIN_BLOCKED:"plugin_blocked",PLUGIN_UPDATES_DISALLOWED:"plugin_updates_disallowed",PLUGIN_UPDATES_REALLOWED:"plugin_updates_reallowed",PLUGIN_ASSOC_MUTATE_FAILED:"plugin_assoc_mutate_failed",PLUGIN_ASSOC_READ_FAILED:"plugin_assoc_read_failed",ORDER_CANCELLED:"order_cancelled",ORDER_CANCELLATION_FAILED:"order_cancellation_failed",SEND_MESSAGE_WITH_ROBOTEXT:"send_message_with_robotext",SEND_MESSAGE_WITH_ATTACHMENT:"send_message_with_attachment",SEND_MESSAGE_WITH_LOG_MESSAGE:"send_message_with_log_message",SEND_MESSAGE_FAILURE:"send_message_failure",DIALOG_OPENED:"dialog_opened",DIALOG_CLOSED:"dialog_closed",DIALOG_LOAD_ERROR:"dialog_load_error",DIALOG_LOAD_SUCCESS:"dialog_load_success",NOT_YOU_CLICKED:"not_you_clicked",RECEIPTS:"receipts",CANCELLATIONS:"cancellations",SHIPMENTS:"shipments",PROCESSED_RECEIPTS:"processedreceipts",NOW_IN_STOCK:"nowinstock",UPDATE_RECEIPTS:"updatereceipts"};},null);
__d("MNCommerceReplyTypes",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={COMMERCE_LINK:2};},null);
__d("P2PPaymentLoggerEvent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={ACTN_ADD_CREDIT_CARD:"Actn_AddCreditCard",ACTN_UPDATE_CREDIT_CARD:"Actn_UpdateCreditCard",ACTN_REMOVE_CREDIT_CARD:"Actn_RemoveCreditCard",ACTN_UNLOCK_CREDIT_CARD:"Actn_UnlockCreditCard",ACTN_VALIDATE_CARD:"Actn_ValidateCard",ACTN_TRANSFER_MONEY:"Actn_TransferMoney",ACTN_TRANSFER_MONEY_REVERT:"Actn_TransferMoneyRevert",ACTN_TRANSFER_MONEY_CREATE_CONTEXT:"Actn_TransferMoneyCreateContext",ACTN_ACCEPT_MONEY:"Actn_AcceptMoney",ACTN_DECLINE_MONEY:"Actn_DeclineMoney",ACTN_SET_PRIMARY:"Actn_SetPrimary",ACTN_WITHDRAW_MONEY:"Actn_WithdrawMoney",ACTN_SEND_TRANSFER_MESSAGE:"Actn_SendTransferMessage",ACTN_SEND_TRANSFER_EMAIL:"Actn_SendTransferEmail",ACTN_SEND_EXPIRE_NOTIFICATIONS:"Actn_SendExpireNotifications",ACTN_SEND_TRANSFER_MESSAGE_QUEUED:"Actn_SendTransferMessageQueued",ACTN_CREATE_PAYMENT_REQUEST:"Actn_CreatePaymentRequest",ACTN_ACCEPT_PAYMENT_REQUEST:"Actn_AcceptPaymentRequest",ACTN_DECLINE_PAYMENT_REQUEST:"Actn_DeclinePaymentRequest",ACTN_AUTH_FOR_SENDER_REVIEW:"Actn_AuthForSenderReview",ACTN_COMPLETE_SENDER_REVIEW:"Actn_CompleteSenderReview",ACTN_COMPLETE_RECEIVER_REVIEW:"Actn_CompleteReceiverReview",ACTN_SUBMIT_VERIFICATION_STEP:"Actn_SubmitVerificationStep",ACTN_COMPLETE_SENDER_VERIFICATION:"Actn_CompleteSenderVerification",ACTN_COMPLETE_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_VERIFICATION:"Actn_CancelSenderVerification",ACTN_CANCEL_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_RISK:"Actn_CancelSenderRisk",ACTN_CANCEL_EXPIRE:"Actn_CancelExpire",ACTN_CANCEL_FOR_SAME_CARD:"Actn_CancelForSameCard",ACTN_CANCEL_BY_CUSTOMER_SERVICE:"Actn_CancelByCustomerService",ACTN_CANCEL_RECEIVER_REVIEW:"Actn_CancelReceiverReview",ACTN_CANCEL_SENDER_REVIEW:"Actn_CancelSenderReview",ACTN_CANCEL_ALL_PENDING_TRANSFERS:"Actn_CancelAllPendingTransfers",ACTN_ADD_PIN:"Actn_AddPIN",ACTN_UPDATE_PIN:"Actn_UpdatePIN",ACTN_REMOVE_PIN:"Actn_RemovePIN",ACTN_RESET_PIN:"Actn_ResetPIN",ACTN_ENABLE_TOUCH_ID:"Actn_EnableTouchID",ACTN_VERIFY_TOUCH_ID:"Actn_VerifyTouchID",ACTN_DISABLE_TOUCH_ID:"Actn_DisableTouchID",ACTN_CHANNEL_NOTIF_CARD_EVENT:"Actn_ChannelNotifCardEvent",ACTN_CHANNEL_NOTIF_TRANSFER_STATUS_EVENT:"Actn_ChannelNotifTransferStatusEvent",UI_ACTN_INITIATE_SEND:"UI_Actn_Initiate_Send",UI_ACTN_CANCEL_SEND:"UI_Actn_Send_Money_Cancelled",UI_ACTN_INITIATE_ADD_CARD:"UI_Actn_Initiate_Add_Card",UI_ACTN_CANCEL_ADD_CARD:"UI_Actn_Cancel_Add_Card",UI_ACTN_CONFIRM_CARD_DETAILS:"UI_Actn_Confirm_Card_Details",UI_ACTN_ACCEPT_WITH_CARD:"UI_Actn_Accept_With_Card",UI_ACTN_ADD_CARD_SUCCESS:"UI_Actn_Add_Card_Success",UI_ACTN_ADD_CARD_FAIL:"UI_Actn_Add_Card_Fail",UI_ACTN_CONFIRM_SEND:"UI_Actn_Confirm_Send",UI_ACTN_SEND_SUCCESS:"UI_Actn_Send_Success",UI_ACTN_SEND_MONEY_CANCELLED:"UI_Actn_Send_Money_Cancelled",UI_ACTN_SEND_FAIL:"UI_Actn_Send_Fail",UI_ACTN_INITIATE_EDIT_CARD:"UI_Actn_Initiate_Edit_Card",UI_ACTN_CANCEL_EDIT_CARD:"UI_Actn_Cancel_Edit_Card",UI_ACTN_CONFIRM_EDIT_CARD_DETAILS:"UI_Actn_Confirm_Edit_Card_Details",UI_ACTN_EDIT_CARD_SUCCESS:"UI_Actn_Edit_Card_Success",UI_ACTN_EDIT_CARD_FAIL:"UI_Actn_Edit_Card_Fail",UI_ACTN_INITIATE_REMOVE_CARD:"UI_Actn_Initiate_Remove_Card",UI_ACTN_CONFIRM_REMOVE_CARD:"UI_Actn_Confirm_Remove_Card",UI_ACTN_REMOVE_CARD_SUCCESS:"UI_Actn_Remove_Card_Success",UI_ACTN_REMOVE_CARD_FAIL:"UI_Actn_Remove_Card_Fail",UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX:"UI_Actn_Initiate_Password_Protection_NUX",UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_In_Password_Protection_NUX",UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_Out_Password_Protection_NUX",UI_ACTN_ENABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Enabled_Password_Protection_Setting",UI_ACTN_DISABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Disabled_Password_Protection_Setting",UI_ACTN_SEND_CLICKED:"UI_Actn_Send_Clicked",UI_ACTN_VERIFY_CSC:"UI_Actn_Verify_CSC",UI_ACTN_CONFIRM_AMOUNT:"UI_Actn_Confirm_Amount",UI_ACTN_EDIT_CARD:"UI_Actn_Edit_Card",UI_ACTN_CHANGE_CARD:"UI_Actn_Change_Card",UI_ACTN_INITIATE_SEND_TRIGGER:"UI_Actn_Initiate_Send_Trigger",UI_ACTN_INITIATE_GROUP_SEND:"UI_Actn_Initiate_Group_Send",UI_ACTN_GROUP_SEND_CANCELLED:"UI_Actn_Group_Send_Cancelled",UI_ACTN_INITIATE_GROUP_SEND_TRIGGER:"UI_Actn_Initiate_Group_Send_Trigger",UI_ACTN_GROUP_SEND_RECIPIENT_PICKED:"UI_Actn_Group_Send_Recipient_Picked",UI_ACTN_3RD_PARTY_LOG_MESSAGE_CLICKED:"UI_Actn_3rd_Party_Log_Message__Clicked",UI_ACTN_3RD_PARTY_LOG_MESSAGE_TRY_CLICKED:"UI_Actn_3rd_Party_Log_Message_Try_Clicked",UI_ACTN_3RD_PARTY_LOG_MESSAGE_CANCELLED:"UI_Actn_3rd_Party_Log_Message_Cancelled",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CLICKED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Clicked",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CANCELLED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Cancelled",UI_ACTN_CHAT_THREAD_BANNER_CLICKED:"UI_Actn_Chat_Thread_Banner_Clicked",UI_ACTN_CHAT_THREAD_BANNER_VIEWED:"UI_Actn_Chat_Thread_Banner_Viewed",UI_ACTN_CHAT_THREAD_BANNER_DISMISSED:"UI_Actn_Chat_Thread_Banner_Dismissed"};},null);
__d("P2PPaymentLoggerEventFlow",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={UI_FLOW_P2P_SEND:"UI_Flow_P2P_Send",UI_FLOW_P2P_RECEIVE:"UI_Flow_P2P_Receive",UI_FLOW_P2P_SETTINGS:"UI_Flow_P2P_Settings",UI_FLOW_P2P_GROUP_SEND:"UI_Flow_P2P_Group_Send",UI_FLOW_ADD_CARD_TO_UNLOCK:"UI_Flow_Add_Card_To_Unlock",UI_FLOW_RECEIVER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Receiver_NUX_Chat_Thread_Banner",UI_FLOW_SENDER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Sender_NUX_Chat_Thread_Banner",UI_FLOW_MONEYPENNY_CHECKOUT:"UI_Flow_Moneypenny_Checkout"};},null);
__d("P2PPaymentLogMessageSubtype",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail"};},null);
__d("StickerAssetType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"};},null);
__d("TypingDetector",["ArbiterMixin","Event","Input","Run","TypingStates","createObjectFrom","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o,p){this._input=o;this._ignoreKeys={};this._getValueFn=p;}Object.assign(n.prototype,g,{_timeout:7000,_currentState:k.INACTIVE,init:function(){this.init=m;this.reset();this._subscription=h.listen(this._input,'keyup',this._update.bind(this));j.onUnload(this._onunload.bind(this));},reset:function(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=k.INACTIVE;},setIgnoreKeys:function(o){this._ignoreKeys=l(o);},destroy:function(){this._subscription.remove();},_onunload:function(){if(this._currentState==k.TYPING)this._transition(k.QUITTING);},_update:function(event){var o=h.getKeyCode(event),p=this._currentState;if(!this._ignoreKeys[o]){var q=this._getValueFn?this._getValueFn():i.getValue(this._input);if(q.trim().length===0){if(p==k.TYPING)this._transition(k.INACTIVE);}else if(p==k.TYPING){this._recordKeystroke();}else if(p==k.INACTIVE){this._transition(k.TYPING);this._recordKeystroke();}}},_transition:function(o){this.reset();this._currentState=o;this.inform('change',o);},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout);},_checkTyping:function(){var o=this._lastKeystrokeTime+this._timeout,p=Date.now();if(p>o){this._transition(k.INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),o-p+10);}}});e.exports=n;},null);
__d("TypingDetectorController",["AsyncRequest","AvailableList","AvailableListConstants","ChannelConnection","ChatVisibility","Keys","TypingDetector","TypingStates","emptyFunction","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();function r(s,t,u,v,w,x){"use strict";this.userID=s;this.input=t;this.source=u;this.threadID=w;this.remoteState=n.INACTIVE;this.notifyTimer=null;v=v||{};this.notifyDelay=v.notifyDelay||this.notifyDelay;this._typingDetector=new m(t,x);this._typingDetector.init(v);this._typingDetector.subscribe('change',this._stateChange.bind(this));}r.prototype.setUserAndThread=function(s,t){"use strict";if(this.userID!==s||this.threadID!==t){this.resetState();this.userID=s;this.threadID=t;}};r.prototype.setIgnoreEnter=function(s){"use strict";var t=s?[l.RETURN]:[];this._typingDetector.setIgnoreKeys(t);};r.prototype.resetState=function(){"use strict";this._notifyState(n.INACTIVE);this.remoteState=n.INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null;};r.prototype.destroy=function(){"use strict";this.resetState();this._typingDetector.destroy();};r.prototype._stateChange=function(s,t){"use strict";if(t!=n.QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=p(q(this._notifyState,this,t),this.notifyDelay);}else this._notifyState(t,true);};r.prototype._notifyState=function(s,t){"use strict";if((!this.userID&&!this.threadID)||!k.isOnline()||s===this.remoteState||j.disconnected())return;this._sendRequest(s,this.userID,t);};r.prototype._sendRequest=function(s,t,u){"use strict";this.remoteState=s;var v={typ:s,to:t,source:this.source,thread:this.threadID};new g().setHandler(this._onTypResponse.bind(this,t)).setErrorHandler(o).setData(v).setURI('/ajax/messaging/typ.php').setAllowCrossPageTransition(true).setOption('asynchronous',!u).send();};r.prototype._onTypResponse=function(s,t){"use strict";var u=t.getPayload()||{};if(u.offline)h.set(s,i.OFFLINE,'typing_response');};Object.assign(r.prototype,{notifyDelay:1000});e.exports=r;},null);
__d("ChatSidebarDropdown",["AppsDivebarDisplayController","Arbiter","AsyncRequest","ChatOptions","ChatOrderedList","ChatSidebar","ChatSidebarActions","ChatTabActions","ChatVisibility","CSS","JSLogger","PresenceState","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();function u(v,w,x,y,z,aa){"use strict";this._menu=w;this._popover=v.getPopover();this._selectedValues={};this._menuIsRendered=false;this._editingFavoriteList=false;this._hasAppsOption=aa;this._logger=q.create('blackbird');this._menu.subscribe('itemclick',this._onClick.bind(this));this._popover.subscribe('init',this._onLayerInit.bind(this));this._popover.subscribe('show',this._updateTickerVisibility.bind(this));h.subscribe('chat/option-changed',this._onOptionChanged.bind(this));}u.prototype._onLayerInit=function(){"use strict";this._menuIsRendered=true;p.addClass(this._popover.getLayer().getContentRoot(),"_5vm9");this._displayBrowserNotificationsIfNeeded();this._updateVisibility();h.subscribe('chat-visibility/go-online',this._updateVisibility.bind(this));h.subscribe('chat-visibility/go-offline',this._updateVisibility.bind(this));this._updateSelectedItems();if(this._editingFavoriteList)this._updateEditFavoriteListLabel(this._editingFavoriteList);if(this._hasAppsOption)this._registerAppHandlers();};u.prototype._updateSelectedItems=function(){"use strict";this._menu.forEachItem(function(v){var w=v.getValue&&v.getValue();if(w in this._selectedValues){var x=this._selectedValues[w];if(x){v.select();}else v.deselect();}}.bind(this));};u.prototype._registerAppHandlers=function(){"use strict";this._updateAppsVisibility();h.subscribe('AppsDivebar/hide-apps',this._updateAppsVisibility.bind(this));h.subscribe('AppsDivebar/show-apps',this._updateAppsVisibility.bind(this));};u.prototype._updateTickerVisibility=function(){"use strict";var v=t('pagelet_ticker');p.conditionClass(this._popover.getLayer().getContentRoot(),"_2rox",!v||v.offsetHeight===0);};u.prototype._updateAppsVisibility=function(){"use strict";p.conditionClass(this._popover.getLayer().getContentRoot(),"_2vh",!g.isVisible());};u.prototype._updateVisibility=function(){"use strict";p.conditionClass(this._popover.getLayer().getContentRoot(),"_5vma",!o.isOnline());};u.prototype._displayBrowserNotificationsIfNeeded=function(){"use strict";if(window.webkitNotifications){var v;this._menu.forEachItem(function(w){if(w.getValue&&w.getValue()==='browser_notif')v=w;});if(v){p.show(v.getRoot());if(window.webkitNotifications.checkPermission()!==0)v.deselect();}}};u.prototype._onChangeSettingResponse=function(v,w,x){"use strict";r.doSync();};u.prototype._onChangeSettingError=function(v,w,x){"use strict";j.setSetting(v,!w,'sidebar_menu_error');};u.prototype._onChangeFinally=function(){"use strict";this._pendingChange=false;};u.prototype._onOptionChanged=function(v,w){"use strict";var x=w.name,y=w.value;if(this._menuIsRendered){this._menu.forEachItem(function(z){if(z.getValue&&(z.getValue()===x))if(z.isSelected()&&!y){z.deselect();}else if(!z.isSelected()&&y)z.select();});}else this._selectedValues[x]=y;};u.prototype._onClick=function(v,w){"use strict";if(this._pendingChange)return false;var x=false,y=w.item.getValue(),z=true;switch(y){case 'sidebar':this.toggleSidebar();break;case 'online':if(!o.isOnline()){o.goOnline();}else this._logVisibilityChange(y,true);x=true;break;case 'offline':if(o.isOnline()){o.goOffline();}else this._logVisibilityChange(y,true);x=true;break;case 'advanced_settings':case 'turn_off_dialog':h.inform('chat/advanced-settings-dialog-opened');x=true;this._logVisibilityChange(y,false);break;case 'browser_notif':if(!w.item.isSelected()&&window.webkitNotifications&&window.webkitNotifications.checkPermission()!==0){window.webkitNotifications.requestPermission(function(){this.changeSetting(y,!w.item.isSelected());}.bind(this));}else this.changeSetting(y,!w.item.isSelected());x=true;break;case 'sound':this.changeSetting(y,!w.item.isSelected());x=true;break;case 'pause':var aa=!w.item.isSelected();if(aa){k._pause();}else k._unpause();x=true;z=false;break;case 'close_all_tabs':n.closeAllTabs();this._logVisibilityChange(y,false);x=true;break;case 'show_apps':if(!g.isVisible()){g.showApps();l.resize();}x=true;break;case 'hide_apps':if(g.isVisible()){g.hideApps();l.resize();}x=true;break;case 'show_ticker':h.inform('ChatSidebarDropdown/openTicker');x=true;break;case 'hide_ticker':h.inform('ChatSidebarDropdown/closeTicker');x=true;break;case 'hide_groups':var ba=w.item.isSelected();this.changeSetting('hide_groups',!ba);x=true;break;}if(x){this.hideMenu();return z;}};u.prototype._logVisibilityChange=function(v,w){"use strict";this._logger.error(w?'sidebar_dropdown_visibility_error':'sidebar_dropdown_set_visibility',{action:v});};u.prototype.changeSetting=function(v,w){"use strict";if(this._pendingChange)return false;this._pendingChange=true;var x={};x[v]=w;j.setSetting(v,w,'sidebar_menu');new i('/ajax/chat/settings.php').setHandler(this._onChangeSettingResponse.bind(this,v,w)).setErrorHandler(this._onChangeSettingError.bind(this,v,w)).setFinallyHandler(this._onChangeFinally.bind(this)).setData(x).setAllowCrossPageTransition(true).send();};u.prototype.hideMenu=function(){"use strict";if(this._menuIsRendered)this._popover.hideLayer();};u.prototype.toggleSidebar=function(){"use strict";m.toggle();this.hideMenu();return false;};e.exports=u;},null);
__d("MercuryTypeaheadDataSource",["Banzai","BanzaiLogger","CurrentUser","DataSource","MercuryParticipantTypes","MercuryTypeaheadConstants","OrderedFriendsList","ShortProfiles","WorkModeConfig","debounce"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();var q=500,r=[],s={},t={},u={},v=false,w=false;for(var x in j)if(j.hasOwnProperty(x))z[x]=j[x];var y=j===null?null:j.prototype;z.prototype=Object.create(y);z.prototype.constructor=z;z.__superConstructor__=j;function z(aa){"use strict";aa=aa||{};aa.kanaNormalization=true;j.call(this,aa);this.logQuery=p(function(ba){this.$MercuryTypeaheadDataSource0(ba);},q,this,true);this.logResponse=p(function(ba){this.$MercuryTypeaheadDataSource0(ba);},q,this,true);}z.prototype.dirty=function(){"use strict";this.$MercuryTypeaheadDataSource1=r;this.localCache=t;this.queryCache=s;this.queryIDs=u;return this;};z.prototype.bootstrap=function(){"use strict";if(v||w)return false;this.$MercuryTypeaheadDataSource0({event:'bootstrap_start'});w=true;n.fetchAll().then(function(){this.updateBootstrapData();this.$MercuryTypeaheadDataSource0({event:'bootstrap_end'});w=false;v=true;}.bind(this),function(){this.$MercuryTypeaheadDataSource0({event:'bootstrap_failure'});}.bind(this));return true;};z.prototype.updateBootstrapData=function(){"use strict";var aa=this.getCachedShortProfileIDs(),ba=o.is_work_user?k.FB4C:k.FRIEND,ca=aa.map(function(da){var ea=n.getNow(da),fa=da==i.getID()?ba:ea.type,ga=[ea.additionalName,ea.alternateName].concat(ea.searchTokens||[]).join(' ');return {uid:da,index:m.getActiveRank(da),text:ea.name,tokens:ga,localized_text:ea.name,additional_text:ea.additionalName,photo:ea.thumbSrc,render_type:fa,type:l.USER_TYPE};});if(ca.length)this.addEntries(ca);};z.prototype.query=function(aa,ba,ca,da){"use strict";var ea=ba||aa.length===1;return y.query.call(this,aa,ea,ca,da);};z.prototype.getQueryData=function(aa,ba){"use strict";return Object.assign({},y.getQueryData.call(this,aa,ba),{needs_friends:!this.isBootstrapped()});};z.prototype.setEntry=function(aa,ba){"use strict";this.$MercuryTypeaheadDataSource1[aa]=ba;};z.prototype.getEntry=function(aa){"use strict";return this.$MercuryTypeaheadDataSource1[aa]||null;};z.prototype.getCachedShortProfileIDs=function(){"use strict";var aa=n.getCachedProfileIDs(),ba=aa.filter(function(ca){var da=n.getNow(ca);return (ca==i.getID()||da.type===k.FRIEND||da.type===k.FB4C);});return ba;};z.prototype.isBootstrapped=function(){"use strict";return v;};z.prototype.isBootstrapping=function(){"use strict";return w;};z.prototype.processEntries=function(aa,ba){"use strict";aa=aa.map(function(ca){if(ca.index==null&&(ca.render_type===k.FRIEND||ca.render_type===k.FB4C))ca.index=m.getActiveRank(ca.uid);return ca;});return y.processEntries.call(this,aa);};z.prototype.mergeUids=function(aa,ba,ca,da){"use strict";var ea=ba.sort(function(fa,ga){return this.getEntry(fa).index-this.getEntry(ga).index;}.bind(this));return y.mergeUids.call(this,aa,ea,ca,da);};z.prototype.$MercuryTypeaheadDataSource0=function(aa){"use strict";if(!g.isEnabled('mercury_typeahead_logging'))return;h.log('MercuryQueryResultsLoggerConfig',aa);};e.exports=z;},null);
__d("ChatSidebarTypeaheadDataSource",["MercuryConfig","MercuryTypeaheadDataSource","ShortProfiles"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(m){"use strict";m=m||{};m.kanaNormalization=true;if(g.ScrollableSidebarTypeaheadGK)m.maxResults=30;h.call(this,m);}l.prototype.init=function(){"use strict";k.init.call(this);this.updateBootstrapData();};l.prototype.bootstrap=function(){"use strict";k.bootstrap.call(this);};l.prototype.updateBootstrapData=function(){"use strict";if(this.isBootstrapped())return;k.updateBootstrapData.call(this);};l.prototype.fetchAll=function(){"use strict";i.fetchAll();};l.prototype.refreshData=function(){"use strict";this.fetchAll();d(['AvailableList'],function(m){m.update();}.bind(this));};l.prototype.query=function(m,n,o,p){"use strict";this.logQuery({event:'query_dive_bar',query:m});return k.query.call(this,m,n,o,p);};l.prototype.respond=function(m,n,o){"use strict";var p=k.respond.call(this,m,n,o);this.logResponse({event:'query_response_dive_bar',response_query:m,response_uids:n});return p;};e.exports=l;},null);
__d("ChatTypeaheadCore",["Event","Keys","TypeaheadCore","emptyFunction","shield"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();for(var l in i)if(i.hasOwnProperty(l))n[l]=i[l];var m=i===null?null:i.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=i;function n(){"use strict";if(i!==null)i.apply(this,arguments);}n.prototype.init=function(o,p,q){"use strict";m.init.call(this,o,p,q);this.informBeginActive=false;this.informEndActive=false;this.data.subscribe('respond',function(){if(this.informBeginActive){this.informBeginActive=false;this.inform('sidebar/typeahead/active',true);}else if(this.informEndActive){this.informEndActive=false;this.inform('sidebar/typeahead/active',false);}}.bind(this));};n.prototype.keydown=function(event){"use strict";this.data.fetchAll();var o=g.getKeyCode(event);if(o===h.ESC){this.view.clearContent();setTimeout(k(this.reset,this),0);if(!this.getValue()){this.element.blur();this.inform('escape');}return event.kill();}return m.keydown.call(this,event);};n.prototype.checkValue=function(){"use strict";var o=this.getValue(),p=this.value;if(o==p)return;if(p&&!o){this.typeaheadActive=false;this.informEndActive=true;}else if(!p&&o){this.typeaheadActive=true;this.informBeginActive=true;this.inform('sidebar/typeahead/preActive');}m.checkValue.call(this);};Object.assign(n.prototype,{handleTab:j});e.exports=n;},null);
__d("ChatSidebarHeader.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=g.createClass({displayName:"ReactChatSidebarHeader",render:function(){return (g.createElement("div",g.__spread({},this.props,{className:i(this.props.className,"_55ob")}),g.createElement("div",{className:"_55oc"},this.props.children)));}});e.exports=j;},null);
__d("ChatTypeaheadRenderer",["AvailableListConstants","ChatSidebarConstants","ChatSidebarHeader.react","ChatSidebarSections","ChatSidebarThread.react","ChatSidebarUser.react","ChatTypeaheadConstants","DOM","LastMobileActiveTimes","MercuryIDs","PresenceStatus","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s={};function t(y,z){if(!(y in s))s[y]=n.create('li');r.render(z,s[y]);return s[y];}function u(y){return t(y.text,r.createElement(i,null,y.text));}function v(y){var z=y.mercury_thread.participants.map(function(aa){return p.getUserIDFromParticipantID(aa);});return t(y.uid,r.createElement(k,{image:y.mercury_thread.image_src,imageSize:h.getImageSize(),name:y.mercury_thread.name,participants:y.participants_to_render,numOtherParticipants:z.length-1,referrer:j.TYPEAHEAD,status:q.getGroup(z),threadFBID:y.uid}));}function w(y){var z=q.get(y.uid),aa=(z===g.MOBILE)?o.getShortDisplay(y.uid):null,ba=(y.render_type==m.NON_FRIEND_TYPE||y.render_type==m.PAGE_TYPE||y.render_type==m.FB4C_TYPE)?y.subtext:null,ca=null;if(z===g.ACTIVE)ca=q.getDetailedActivePresence(y.uid);return t(y.uid,r.createElement(l,{image:y.photo,imageSize:h.getImageSize(),name:y.text,sectionName:j.TYPEAHEAD,status:z,statusTime:aa,detailedStatus:ca,userID:y.uid,context:ba}));}function x(y,z){if(y.type===m.HEADER_TYPE)return u(y);if(y.type==m.THREAD_TYPE)return v(y);return w(y);}e.exports=x;},null);
__d("MercuryThreadSearchUtils",["escapeRegex","TokenizeUtil"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={wordsInString:function(j){return (j||'').split(/\s+/).filter(function(k){return k.trim().length>0;});},anyMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(k(j[l]))return true;return false;},allMatchPredicate:function(j,k){for(var l=0;l<j.length;l++)if(!k(j[l]))return false;return true;},queryWordMatchesAnyNameWord:function(j,k){var l=new RegExp('^'+g(j),'i');return this.anyMatchPredicate(k,function(m){var n=h.parse(m).flatValue;return l.test(n);});},queryMatchesName:function(j,k){var l=this.wordsInString(j),m=this.wordsInString(k);return this.allMatchPredicate(l,function(n){return this.queryWordMatchesAnyNameWord(n,m);}.bind(this));}};e.exports=i;},null);
__d("ChatTypeaheadView",["BucketedTypeaheadView","ChatTypeaheadConstants","CurrentUser","DOM","MercuryConfig","React","ScrollableArea","MercuryThreadSearchUtils","Style","WorkModeConfig","XUISpinner.react","arrayContains","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();for(var u in g)if(g.hasOwnProperty(u))w[u]=g[u];var v=g===null?null:g.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=g;function w(x,y){"use strict";if(k.ScrollableSidebarTypeaheadGK){this.$ChatTypeaheadView0=m.renderDOM();j.appendContent(x,this.$ChatTypeaheadView0.root);this.$ChatTypeaheadView1=m.fromNative(this.$ChatTypeaheadView0.root);g.call(this,this.$ChatTypeaheadView0.content,y);}else g.call(this,x,y);this.showingLoadingIndicator=false;this.typeObjects={};this.typeObjectsOrder=[];this.typeObjects[h.NON_FRIEND_TYPE]={uid:h.NON_FRIEND_TYPE,type:h.HEADER_TYPE,text:t._("MORE PEOPLE")};this.typeObjectsOrder.push(h.NON_FRIEND_TYPE);this.typeObjects[h.PAGE_TYPE]={disabled:true,uid:h.PAGE_TYPE,type:h.HEADER_TYPE,text:t._("PAGES")};this.typeObjectsOrder.push(h.PAGE_TYPE);this.typeObjects[h.THREAD_TYPE]={uid:h.THREAD_TYPE,type:h.HEADER_TYPE,text:t._("GROUP CONVERSATIONS")};this.typeObjectsOrder.push(h.THREAD_TYPE);this.typeObjects[h.FB4C_TYPE]={uid:h.FB4C_TYPE,type:h.HEADER_TYPE,text:t._("CO-WORKERS")};this.typeObjects[h.FRIEND_TYPE]={disabled:true,uid:h.FRIEND_TYPE,type:h.HEADER_TYPE,text:t._("FRIENDS")};this.typeObjectsOrder.push(h.FB4C_TYPE);this.typeObjectsOrder.push(h.FRIEND_TYPE);}w.prototype.reset=function(){"use strict";if(this.value==='')this.clearContent();this.index=-1;this.items=[];this.results=[];this.value='';this.inform('reset');return this;};w.prototype.clearContent=function(){"use strict";this.hideLoadingIndicator();j.empty(this.content);};w.prototype.buildBuckets=function(x,y){"use strict";var z=y.filter(function(aa){var ba=aa.render_type||aa.type;if(ba==='thread'){var ca='fbid:'+i.getID();if(!r(aa.mercury_thread.participants,ca))return false;var da=aa.participants_to_render.some(function(fa){return n.queryMatchesName(x,fa.name);}),ea=n.queryMatchesName(x,aa.mercury_thread.name);if(!da&&!ea)return false;}return true;}).reverse();return v.buildBuckets.call(this,x,z);};w.prototype.getDefaultIndex=function(x){"use strict";if(x.length===0)return -1;var y=x.length-1;while(!this.isHighlightable(x[y])&&y>=0)y--;return y;};w.prototype.showLoadingIndicator=function(){"use strict";if(!this.showingLoadingIndicator){l.render(l.createElement("div",{className:"spinnerContainer"},l.createElement(q,{className:"_3-8i",background:"light",size:"small",paused:false})),this.content);this.showingLoadingIndicator=true;}};w.prototype.hideLoadingIndicator=function(){"use strict";if(this.showingLoadingIndicator){l.unmountComponentAtNode(this.content);this.showingLoadingIndicator=false;}};w.prototype.showNoResults=function(){"use strict";var x=t._("Friend not found.");if(p.is_work_user)x=t._("Co-worker not found.");this.hideLoadingIndicator();j.setContent(this.content,j.create('div',{className:"noResults _3-9a"},x));};w.prototype.hide=function(){"use strict";this.clearContent();return v.hide.call(this);};w.prototype.next=function(){"use strict";v.next.call(this);if(k.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView1.scrollIntoView(this.selected,false);};w.prototype.prev=function(){"use strict";v.prev.call(this);if(k.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView1.scrollIntoView(this.selected,false);};w.prototype.setMaxHeight=function(x){"use strict";o.set(this.$ChatTypeaheadView0.wrap,'max-height',x+'px');};w.prototype.render=function(x,y,z){"use strict";if(k.ScrollableSidebarTypeaheadGK)var aa=this.value!==x||this.$ChatTypeaheadView1.isScrolledToBottom();if(!y.length){if(x&&x.length>1)this.showLoadingIndicator();}else this.hideLoadingIndicator();v.render.call(this,x,y,z);if(k.ScrollableSidebarTypeaheadGK&&aa)this.$ChatTypeaheadView1.scrollToBottom(false);};e.exports=w;},null);
__d("legacy:ChatTypeaheadBehavior",["ChatTypeaheadBehavior"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.chatTypeahead=function(h){h.enableBehavior(g);};},3);
__d("MercuryMessageError.react",["CurrentUser","ImmutableObject","MercuryErrorInfo","MercuryMessageActions","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=k,o=n.PropTypes,p=k.createClass({displayName:"MercuryMessageError",propTypes:{authorFBID:o.string,message:o.instanceOf(h).isRequired},getDefaultProps:function(){return {authorFBID:g.getID()};},render:function(){var q=this.props.message,r=q.error_data;return (k.createElement("div",k.__spread({},this.props,{className:m(this.props.className,this._getClassNameFromStatus(q)),tabIndex:i.isTransient(r)?0:null,onClick:i.isTransient(r)?this.messageResend:null}),k.createElement("div",{className:"_2fs1"}),k.createElement("span",{dangerouslySetInnerHTML:{__html:this._getTextFromStatus(q)}})));},messageResend:function(){j.getForFBID(this.props.authorFBID).resend(this.props.message);},_getClassNameFromStatus:function(q){if(i.hasErrorStatus(q)){return (("_2fs2")+(' '+"_2fs3")+(i.isTransient(q.error_data)?' '+"_2fs4":'')+(i.isPermanent(q.error_data)?' '+"_2fs5":''));}else return "_2fs6 _2fs2";},_getTextFromStatus:function(q){var r='',s=q.error_data;if(i.hasErrorStatus(q))r=i.getMessage(s);if(typeof r==='object'&&r.__html)r=r.__html;return r;}});e.exports=p;},null);
__d("MercuryAudioPlayer",["Event","Arbiter","DOM","Flash","UserAgent_DEPRECATED"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l=200;function m(){if(k.webkit()&&!k.chrome())return false;var v=i.create('audio'),w=false;try{if(!!v.canPlayType)if(v.canPlayType('video/mp4;').replace(/^no$/,''))w=true;}finally{return w;}}function n(){return j.isAvailable();}var o=function(){this.interval=null;this.arbiterInstance=null;this.audio=i.create('audio');g.listen(this.audio,'playing',function(){this.informAttachment('playing',this.audio.currentTime);this.interval=setInterval(function(){this.informAttachment('playing',this.audio.currentTime);}.bind(this),l);}.bind(this));g.listen(this.audio,'ended',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(o.prototype,{setAudio:function(v,w){this.audio.setAttribute('src',v);this.arbiterInstance=w;},informAttachment:function(v,w){if(this.arbiterInstance)this.arbiterInstance.inform(v,w);},play:function(){this.audio.play();this.informAttachment('played');},resume:function(){this.audio.play();this.informAttachment('played');},pause:function(){this.audio.pause();clearInterval(this.interval);this.informAttachment('paused');},getType:function(){return 'html5';}});var p=function(){this.src=null;this.arbiterInstance=null;var v=i.create('div');document.body.appendChild(v);this.swf=j.embed('/swf/SoundStreamPlayer.swf',v,null,{});this.interval=null;h.subscribe('soundstream/finished',function(){clearInterval(this.interval);this.informAttachment('finished');}.bind(this));};Object.assign(p.prototype,{setAudio:function(v,w){this.src=v;this.arbiterInstance=w;},informAttachment:function(v,w){if(this.arbiterInstance)this.arbiterInstance.inform(v,w);},play:function(){this.swf.playSound(this.src);this.interval=setInterval(function(){var v=this.swf.getCurrentTime();this.informAttachment('playing',v);}.bind(this),l);this.informAttachment('played');},resume:function(){this.swf.resume();this.informAttachment('played');},pause:function(){clearInterval(this.interval);this.swf.pause();this.informAttachment('paused');},getType:function(){return 'flash';}});function q(){if(m()){return new o();}else if(n())return new p();return false;}var r=null,s=null,t=0;function u(v,w){this.src=v;this.arbiterInstance=w;this.audio_id=++t;r!==null||(r=q());if(!r)return false;}Object.assign(u.prototype,{getType:function(){if(!r){return false;}else return r.getType();},play:function(v){if(v&&s==this.audio_id){r.resume();}else{this.pause();s=this.audio_id;r.setAudio(this.src,this.arbiterInstance);r.play();}},pause:function(){r.pause();}});e.exports=u;},null);
__d("MercuryAttachmentAudioClip.react",["Arbiter","ArbiterMixin","MercuryAudioPlayer","CurrentUser","JSLogger","LeftRight.react","MercuryShareAttachmentRenderLocations","React","SubscriptionsHandler","cx","fbt","joinClasses","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=n,u=t.PropTypes,v='MercuryAttachmentAudioClip/play',w=k.create('mercury_audio_clip'),x=n.createClass({displayName:"AudioClip",mixins:[h],propTypes:{duration:u.number,location:u.oneOf(m.getValues()),rootClassName:u.string,showHelp:u.bool,src:u.string.isRequired,width:u.number},getInitialState:function(){this.logged=false;return {time:0,playing:false,started:false,duration:this.props.duration,audioPlayer:new i(this.props.src,this)};},componentDidMount:function(){this._subscriptionsHandler=new o();this._subscriptionsHandler.addSubscriptions(this.subscribe('playing',this.updateTime),this.subscribe('played',s(this.setState,this,{playing:true,started:true})),this.subscribe('paused',s(this.setState,this,{playing:false})),this.subscribe('finished',s(this.setState,this,{playing:false,started:false,time:this.props.duration})),g.subscribe(v,function(y,z){if(this.props.src!=z)this.setState({time:0});}.bind(this)));},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release();},updateTime:function(y,z){this.setState({time:z});},play:function(){if(this.state.playing){this.state.audioPlayer.pause();}else{this.state.audioPlayer.play(this.state.started);g.inform(v,this.props.src);if(!this.logged){this.logged=true;w.log('play',{uid:j.getID(),duration:this.props.duration});}}},_formatSeconds:function(y){if(y){y=Math.ceil(y);var z=y%60;if(z<10)z='0'+z;var aa=Math.floor(y/60);return aa+':'+z;}else return null;},_renderPlayer:function(y,z){return (n.createElement("a",{className:"_1miz _2e-1",href:"#",style:{width:y},onClick:this.play},n.createElement("span",{className:"_1mi- _2e-2"},n.createElement("i",{className:"_1mi_ _2e-3"})),n.createElement("span",{className:"_1mj0 _2e-4 _3oh-"},z),n.createElement("div",{className:"_1mj1 _2e-5"})));},render:function(){var y=this.state.time,z=this.state.playing,aa=this._formatSeconds(this.state.duration),ba=this.props.location===m.MESSENGER,ca=this.props.width||170;if(ba){var da=this.props.duration;if(da>10){ca=240;}else if(da>5){ca=200;}else if(da>2){ca=160;}else ca=120;}var ea=null,fa=Math.ceil((y*(ca+2))/this.state.duration);if(ba)fa=Math.ceil((y*(ca+24))/this.state.duration);if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var ga=this._renderPlayer(ca,aa),ha=this._renderPlayer(ca,aa),ia=(("_1mj2")+(' '+"_2e-6")+(z&&(y!==0)?' '+"_1mj3":'')+(z&&(y===0)?' '+"_4g4x":''));ea=(n.createElement("div",{className:ia},ga,n.createElement("div",{className:"_1mj4 _2e-7",style:{width:fa}},ha)));}else ea=(n.createElement("div",{className:"_1mj2"},n.createElement("div",{className:"_1miz"},n.createElement(l,null,n.createElement("a",{className:"_1mj5",href:this.props.src},n.createElement("span",{className:"_3qi6"},n.createElement("i",{className:"_1mj6"})),n.createElement("span",{className:"_1mj7"},q._("Voice Message")),n.createElement("span",{className:"_1mj8"},aa)),n.createElement("a",{href:this.props.src,className:"_1mj9"},n.createElement("i",{className:"_1mja"}))))));return (n.createElement("div",{className:r((("_1mjb")+(ba?' '+"_454y":'')),this.props.rootClassName)},ea));}});e.exports=x;},null);
__d("MercuryAttachmentConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={SIDE_LENGTH:9};e.exports=g;},null);
__d("MercuryAttachmentFile.react",["Image.react","LeftRight.react","Link.react","MercuryAttachment","ReactComponentWithPureRenderMixin","React","ix","cx","joinClasses","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=l,r=q.PropTypes,s=l.createClass({displayName:"MercuryAttachmentFile",propTypes:{name:r.string.isRequired,open_url:r.string,rel:r.string,type:r.string.isRequired,url:r.string},mixins:[k],_renderFileLinks:function(){if(this.props.open_url)return (l.createElement("div",{className:"_59gs"},l.createElement(i,{target:"_blank",href:this.props.open_url},p._("open")),' ',"Â·",' ',l.createElement(i,{href:this.props.url},p._("download"))));return l.createElement("div",null);},render:function(){var t=o(j.getAttachIconClass(this.props.type),"_59go _59gq");if(this.props.url)return (l.createElement(h,{className:t},l.createElement(i,{href:this.props.url},l.createElement(h,null,l.createElement(g,{src:m('/images/messaging/docs/generic.png')}),l.createElement("span",{className:"_59gp"},this.props.name))),this._renderFileLinks()));return (l.createElement(h,{className:t},l.createElement(g,{src:m('/images/messaging/docs/generic.png')}),l.createElement("span",{className:"_59gp"},this.props.name)));}});e.exports=s;},null);
__d("MercuryAttachmentMalicious.react",["XUINotice.react","XUIText.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MercuryAttachmentMalicious",render:function(){return (i.createElement(g,{use:"warn"},i.createElement(h,{size:"small"},j._("This attachment has been marked as malicious."))));}});e.exports=k;},null);
__d("ChatImageArrowDirection",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({BOTH:null,LEFT:null,RIGHT:null});e.exports=h;},null);
__d("ChatImageWithArrow.react",["BackgroundImage.react","ChatImageArrowDirection","Link.react","MercuryAttachmentConstants","React","XUISpinner.react","cx","getVendorPrefixedName","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=k,q=p.PropTypes,r=30,s=15,t=k.createClass({displayName:"ChatImageWithArrow",propTypes:{arrowDirection:q.oneOf(Object.keys(h)),onClick:q.func,height:q.number.isRequired,isLoading:q.bool,rootClassName:q.string,sideLength:q.number,source:q.string,width:q.number.isRequired},getDefaultProps:function(){return {sideLength:j.SIDE_LENGTH,isLoading:false};},render:function(){this._arrowWidth=Math.floor(this.props.sideLength/Math.sqrt(2));this._extendedPhotoWidth=Math.ceil(this._getWidth()+this._arrowWidth);if(this.props.isLoading)return this._renderUploadingBubble();var u=o((("_4yp6")+(this.props.arrowDirection!==h.BOTH?' '+"_2nlo":'')),this.props.rootClassName),v,w;switch(this.props.arrowDirection){case h.BOTH:v=[this._renderArrowWithBorder(h.LEFT),this._renderArrowWithBorder(h.RIGHT)];w=[this._renderArrowWithNoBorder(h.LEFT),this._renderArrowWithNoBorder(h.RIGHT)];break;case h.LEFT:case h.RIGHT:v=this._renderArrowWithBorder(this.props.arrowDirection);w=this._renderArrowWithNoBorder(this.props.arrowDirection);break;}return this._renderLink(k.createElement("div",{className:u},v,k.createElement("div",{className:"_52kr",style:{width:this._getWidth(),height:this._getHeight()}},k.createElement("div",{className:"_4yp9",style:{backgroundImage:'url('+this.props.source+')',width:this._extendedPhotoWidth,height:this._getHeight()}})),w));},_getWidth:function(){return Math.max(this.props.width,s);},_getHeight:function(){return Math.max(this.props.height,r);},_renderLink:function(u){if(this.props.onClick)return (k.createElement(i,{onClick:this.props.onClick},u));return u;},_calculateArrowTransform:function(u,v,w,x){if(v===h.LEFT){return 'translate('+w+'px, '+x+'px)'+'rotate(45deg)';}else return 'translate('+(u-w)+'px, '+x+'px)'+'rotate(45deg)';},_calculateArrowImageTransform:function(u,v,w,x){if(v===h.LEFT){return 'rotate(-45deg)'+'translate(-'+(this._arrowWidth+w)+'px,'+'-'+x+'px)';}else return 'rotate(-45deg)'+'translate(-'+(u-w)+'px, -'+x+'px)';},_renderUploadingBubble:function(){var u={width:this.props.sideLength,height:this.props.sideLength},v={width:this.props.sideLength,height:this.props.sideLength},w=n('transform');if(w){u[w]=this._calculateArrowTransform(this._getWidth(),this.props.arrowDirection,0,this.props.sideLength);v[w]=this._calculateArrowTransform(this._getWidth(),this.props.arrowDirection,0,Math.floor(this.props.sideLength-this._getHeight()));}return (k.createElement("div",{className:"_4yp6"},k.createElement("div",{className:"_4ypa",style:u}),k.createElement("div",{className:"_4ypb",style:{width:this._getWidth(),height:this._getHeight()}},k.createElement(l,{size:"small"})),k.createElement("div",{className:"_4ype",style:v})));},_renderArrowWithBorder:function(u){var v={width:this.props.sideLength,height:this.props.sideLength},w={},x=n('transform');if(x){v[x]=this._calculateArrowTransform(this._getWidth(),u,0,this.props.sideLength);w[x]=this._calculateArrowImageTransform(this._getWidth(),u,0,this.props.sideLength);return (k.createElement("div",{className:(("_4ypf")+(u===h.LEFT?' '+"_2nlp":'')+(u===h.RIGHT?' '+"_2nlq":'')),key:'border:'+u,style:v},k.createElement(g,{backgroundSize:"cover",className:"_4ypg",height:this._getHeight(),src:this.props.source,style:w,width:this._extendedPhotoWidth})));}},_renderArrowWithNoBorder:function(u){var v={width:this.props.sideLength,height:this.props.sideLength},w={},x=1,y=n('transform');if(y){v[y]=this._calculateArrowTransform(this._getWidth(),u,x,this.props.sideLength-this._getHeight());w[y]=this._calculateArrowImageTransform(this._getWidth(),u,x,this.props.sideLength);}return (k.createElement("div",{className:(("_4yph")+(u===h.LEFT?' '+"_2nlp":'')+(u===h.RIGHT?' '+"_2nlq":'')),key:'noBorder:'+u,style:v},k.createElement(g,{backgroundSize:"cover",className:"_4ypg",height:this._getHeight(),src:this.props.source,style:w,width:this._extendedPhotoWidth})));}});e.exports=t;},null);
__d("PhotoStoreCore",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={actions:{UPDATE:'update'},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function(h){if(!this._photoCache[h])throw new Error('Photo cache requested for unknown set ID');return this._photoCache[h];},hasBeenCreated:function(h){return !!this._photoCache[h];},clearSetCache:function(h){delete this._photoCache[h];delete this._postCreateCallbacks[h];},getByIndex:function(h,i,j){this.getPhotoCache(h).getItemAtIndex(i,j);},getByIndexImmediate:function(h,i){if(this._photoCache[h])return this._photoCache[h].getItemAtIndexImmediate(i);return (void 0);},getItemsInAvailableRange:function(h){var i=this.getAvailableRange(h),j=[];for(var k=i.offset;k<i.length;k++)j.push(this.getByIndexImmediate(h,k));return j;},getItemsAfterIndex:function(h,i,j,k){var l=this.getCursorByIndexImmediate(h,i);this.fetchForward(h,l,j,k);},getAllByIDImmediate:function(h){var i=Object.keys(this._photoCache);return i.map(function(j){return this.getByIndexImmediate(j,this.getIndexForID(j,h));}.bind(this)).filter(function(j){return !!j;});},getIndexForID:function(h,i){if(this._photoCache[h])return this._photoCache[h].getIndexForID(i);return (void 0);},getEndIndex:function(h){var i=this.getAvailableRange(h);return i.offset+i.length-1;},getCursorByIndexImmediate:function(h,i){var j=this.getByIndexImmediate(h,i);if(j)return this._photoCache[h].getCursorForID(j.id);return (void 0);},hasNextPage:function(h){var i=this.getCursorByIndexImmediate(h,this.getEndIndex(h));return this.getPhotoCache(h).hasNextPage(i);},getAvailableRange:function(h){return this.getPhotoCache(h).getAvailableRange();},hasLooped:function(h){return this.getPhotoCache(h).hasLooped();},fetchForward:function(h,i,j,k){this.getPhotoCache(h).getItemsAfterCursor(i,j,k);},fetchBackward:function(h,i,j,k){this.getPhotoCache(h).getItemsBeforeCursor(i,j,k);},executePostCreate:function(h,i){if(this._photoCache[h]){i&&i();}else this._postCreateCallbacks[h]=i;},runPostCreateCallback:function(h){var i=this._postCreateCallbacks[h];if(i){i();delete this._postCreateCallbacks[h];}},setPreFetchCallback:function(h,i){this.getPhotoCache(h).setPreFetchCallback(i);},updateData:function(h){var i=h.set_id;if(!this._photoCache[i]){this._photoCache[i]=new h.cache_class(h);this.runPostCreateCallback(i);}else if(h.query_metadata.action==g.actions.UPDATE){this._photoCache[i].updateData(h);}else this._photoCache[i].addData(h);},updateFeedbackData:function(h){var i=Object.keys(h);i.forEach(function(j){return g.getAllByIDImmediate(j).forEach(function(k){k.feedback=h[j].feedback;});});},reset:function(){Object.keys(this._photoCache).forEach(function(h){return this.clearSetCache(h);}.bind(this));}};e.exports=g;},null);
__d("PhotoStore",["Arbiter","PhotoStoreCore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();g.subscribe('update-photos',function(i,j){h.updateData(j);});e.exports=h;},null);
__d("MessagesViewer",["AsyncRequest","Bootloader","DOM","MessagesViewerSetID","PhotoStore","React","Run","emptyFunction","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p={bootstrapWithElem:function(s){p.bootstrapWithConfig({fbid:s.getAttribute('data-fbid'),dimensions:s.getAttribute('data-dimensions'),src:s.getAttribute('href'),endpoint:s.getAttribute('data-endpoint'),disablePaging:s.getAttribute('data-disablepaging')},s);},bootstrapWithConfig:function(s,t){var u=s.setID;if(!u)u=j.MESSAGES;r(function(v,w){q(l.createElement(v,{dimensions:[s.dimensions],disablepaging:s.disablePaging,disableForward:s.disableForward,open:true,photoid:s.fbid,reverse:false,rootClassName:s.rootClassName,setid:u,snapToPhoto:s.snapToPhoto,thumbsrc:s.src}));if(!k.hasBeenCreated(u)&&s.endpoint){var x=new g(s.endpoint);if(t)x.setRelativeTo(t);x.send();}});},renderVideo:function(s){r(function(t,u){q(l.createElement(u,l.__spread({},s)));});},preload:function(){m.onAfterLoad(function(){return r(n);});}};function q(s){var t=o('messages_viewer');if(!t){t=i.create('div',{id:'messages_viewer'});document.body.appendChild(t);}s=l.render(s,t);s.subscribeOnce('close',function(){l.unmountComponentAtNode(t);});}function r(s){h.loadModules(["SpotlightMessagesViewer","MessagingVideoViewer.react"],s);}e.exports=p;},null);
__d("MercuryAttachmentPhoto.react",["ChatImageArrowDirection","ChatImageWithArrow.react","MercuryMessageInfo","MessagesViewer","React"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=k,m=l.PropTypes,n=k.createClass({displayName:"MercuryAttachmentPhoto",propTypes:{height:m.number,image:m.object.isRequired,message:m.object.isRequired,width:m.number},componentDidMount:function(){j.preload();},_handleClickPicture:function(o){var p=this.props.image;j.bootstrapWithConfig({src:p.preview_url,endpoint:p.url,fbid:p.metadata.fbid,dimensions:p.metadata.dimensions,disablePaging:true},null);},render:function(){var o=i.isInbound(this.props.message);return (k.createElement(h,{arrowDirection:o?g.LEFT:g.RIGHT,source:this.props.image.preview_url,height:this.props.height,width:this.props.width,onClick:this._handleClickPicture,isLoading:!!this.props.image.preview_uploading}));}});e.exports=n;},null);
__d("ChatGridImage.react",["Link.react","React","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=h,k=j.PropTypes,l=h.createClass({displayName:"ChatGridImage",propTypes:{isLoading:k.bool,onClick:k.func,size:k.number.isRequired,source:k.string},render:function(){if(this.props.isLoading)return (h.createElement("div",{className:"_4ypb",style:{width:this.props.size,height:this.props.size}}));return (h.createElement(g,{onClick:this.props.onClick},h.createElement("div",{className:"_332l",style:{backgroundImage:'url('+this.props.source+')',width:this.props.size,height:this.props.size}})));}});e.exports=l;},null);
__d("MercuryAttachmentPhotoGrid.react",["ChatGridImage.react","ChatImageArrowDirection","ChatImageWithArrow.react","Grid.react","MercuryAttachmentType","MercuryMessageInfo","MessagesViewer","React","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=j.GridItem,q=n,r=q.PropTypes,s=n.createClass({displayName:"MercuryAttachmentPhotoGrid",propTypes:{images:r.arrayOf(r.object).isRequired,size:r.number.isRequired,message:r.object.isRequired},componentDidMount:function(){m.preload();},_generateClickHandler:function(t){var u=this.props.images.some(function(v){return v.attach_type===k.ANIMATED_IMAGE;});return (function(v){m.bootstrapWithConfig({src:t.preview_url,endpoint:t.url,fbid:t.metadata.fbid,dimensions:t.metadata.dimensions,disablePaging:u},null);});},render:function(){var t=this.props.images,u=t.length,v=(u==2||u==4)?2:3,w=Math.floor(this.props.size/v),x=l.isInbound(this.props.message),y=x?0:v-1,z=[];for(var aa=0;aa<t.length;aa++)if(aa===y){z.push(n.createElement(p,{key:aa},n.createElement(i,{arrowDirection:x?h.LEFT:h.RIGHT,source:t[aa].preview_url,height:w,width:w,isLoading:!!t[aa].preview_uploading,onClick:this._generateClickHandler(t[aa])})));}else z.push(n.createElement(p,{key:aa},n.createElement(g,{isLoading:!!t[aa].preview_uploading,onClick:this._generateClickHandler(t[aa]),size:w,source:t[aa].preview_url})));return (n.createElement(j,{cols:v,className:"_5b2w",spacing:"_5b2x",alignh:"right"},z));}});e.exports=s;},null);
__d("MercuryAttachmentVideo.react",["ChatImageArrowDirection","ChatImageWithArrow.react","CenteredContainer.react","FBOverlayBase.react","FBOverlayContainer.react","FBOverlayElement.react","Image.react","MessagesViewer","React","Vector","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=o,t=s.PropTypes,u=o.createClass({displayName:"MercuryAttachmentVideo",propTypes:{duration:t.number.isRequired,isChat:t.bool,isInbound:t.bool,name:t.string.isRequired,pageID:t.number,thumbSize:t.shape({height:t.number,width:t.number}).isRequired,thumbnail:t.string.isRequired,videoSize:t.shape({height:t.number,width:t.number}).isRequired,videoID:t.string.isRequired,videoURI:t.string.isRequired},componentDidMount:function(){n.preload();},_formatDuration:function(){var v=this.props.duration,w=Math.floor(v/60),x=v%60;if(x<10)return w+':0'+x;return w+':'+x;},openViewer:function(){var v=this.props,w=v.pageID,x=v.videoID,y=v.videoSize,z=v.videoURI;y=new p(y.width,y.height);n.renderVideo({pageID:w,videoID:x,videoSize:y,videoURI:z});},_renderImage:function(){if(this.props.isChat){return (o.createElement(h,{arrowDirection:this.props.isInbound?g.LEFT:g.RIGHT,height:this.props.thumbSize.height,source:this.props.thumbnail,width:this.props.thumbSize.width}));}else return (o.createElement(m,{height:this.props.thumbSize.height,width:this.props.thumbSize.width,src:this.props.thumbnail}));},_getStyle:function(){if(this.props.isChat)return {};return this.props.thumbSize;},render:function(){var v=(("clearfix")+(' '+"_zow")+(' '+"_59go")+(this.props.isChat?' '+"_3ds5":''));return (o.createElement(k,{className:v,onClick:this.openViewer,style:this._getStyle()},o.createElement(j,null,this._renderImage()),o.createElement(l,null,o.createElement("div",{className:((!this.props.isChat?"_zox":''))},o.createElement("span",{className:"_zoz"},this._formatDuration()))),o.createElement(l,null,o.createElement(i,{vertical:true},o.createElement(m,{src:r('/images/chat/chat_play_icon.png')})))));}});e.exports=u;},null);
__d("XGamesGripperNoteUpdaterController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/async\/games\/gripper_note_viewed\/",{});},null);
__d("SidebarAppTickerResizer",["Animation","Arbiter","AsyncRequest","ChatSidebar","CSS","cx","debounce","DOMQuery","Event","SimpleDrag","TickerController","$","queryThenMutateDOM","XGamesGripperNoteUpdaterController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=1e-07,u=1,v=85,w=173,x=300,y=46,z=90,aa=82,ba=150;function ca(da,ea,fa,ga,ha){"use strict";this.$SidebarAppTickerResizer0=r('pagelet_ticker');this.$SidebarAppTickerResizer1=r('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer2=this.$SidebarAppTickerResizer0.parentNode;this.$SidebarAppTickerResizer3=ha;this.$SidebarAppTickerResizer1.style.height=fa;this.$SidebarAppTickerResizer4(da,ea);if(fa===null)if(ga!==null){this.$SidebarAppTickerResizer5();this.$SidebarAppTickerResizer6(this.$SidebarAppTickerResizer7());}else h.subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer5.bind(this));if(!ha){this.$SidebarAppTickerResizer8();k.hide(da);}h.subscribe('ChatSidebarDropdown/closeTicker',this.$SidebarAppTickerResizer8.bind(this));h.subscribe('ChatSidebarDropdown/openTicker',this.$SidebarAppTickerResizer9.bind(this));h.subscribe('sidebar/show',this.$SidebarAppTickerResizera.bind(this));if(ga){var ia=n.scry(document.body,'#pagelet_ticker')[0],ja=ia&&ia.parentNode,ka,la=function(){if(!k.shown(ja))return;var ma=b('XGamesGripperNoteUpdaterController').getURIBuilder().getURI();new i().setURI(ma).send();ga.show();if(ka)ka.unsubscribe();};if(ja&&k.shown(ja)){la();}else ka=h.subscribe('ticker/show',la);}this.$SidebarAppTickerResizerb=m(this.$SidebarAppTickerResizer5.bind(this),200);o.listen(window,'resize',this.$SidebarAppTickerResizerb);h.inform('Ticker/resized');}ca.prototype.$SidebarAppTickerResizera=function(){"use strict";q.show(this.$SidebarAppTickerResizer0);};ca.prototype.$SidebarAppTickerResizer5=function(da){"use strict";s(function(){this.$SidebarAppTickerResizerc();}.bind(this),function(){var ea=Math.round(parseFloat(this.$SidebarAppTickerResizer0.style.height));if(ea>Math.round(this.$SidebarAppTickerResizerd())||this.$SidebarAppTickerResizere&&this.$SidebarAppTickerResizere>u){var fa=(this.$SidebarAppTickerResizere/this.$SidebarAppTickerResizerf)*100,ga=this.$SidebarAppTickerResizerg(0,this.$SidebarAppTickerResizerd()-fa);if(!(da&&da.type==='resize'))this.$SidebarAppTickerResizerh(ga);j.resize();}}.bind(this));};ca.prototype.$SidebarAppTickerResizerd=function(){"use strict";if(!this.$SidebarAppTickerResizer3)return 0;if(!j.isVisible())return z;return Math.min(z,(this.$SidebarAppTickerResizerf-this.$SidebarAppTickerResizeri-aa)*100/this.$SidebarAppTickerResizerf);};ca.prototype.$SidebarAppTickerResizer4=function(da,ea){"use strict";var fa=new p(da);fa.subscribe('start',this.$SidebarAppTickerResizerj.bind(this));fa.subscribe(['update','end'],this.$SidebarAppTickerResizerk.bind(this));var ga=new p(ea);ga.subscribe('start',this.$SidebarAppTickerResizerj.bind(this));ga.subscribe('update',this.$SidebarAppTickerResizerl.bind(this));ga.subscribe('end',this.$SidebarAppTickerResizerm.bind(this));};ca.prototype.$SidebarAppTickerResizerj=function(da,event){"use strict";this.$SidebarAppTickerResizern=event.clientY;this.$SidebarAppTickerResizerc();this.$SidebarAppTickerResizero();};ca.prototype.$SidebarAppTickerResizerc=function(){"use strict";this.$SidebarAppTickerResizeri=this.$SidebarAppTickerResizer1.offsetTop;this.$SidebarAppTickerResizerp=this.$SidebarAppTickerResizer0.offsetHeight;this.$SidebarAppTickerResizerf=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizere=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizerq=this.$SidebarAppTickerResizere;};ca.prototype.$SidebarAppTickerResizero=function(){"use strict";k.addClass(this.$SidebarAppTickerResizer2,"_4vfq");};ca.prototype.$SidebarAppTickerResizerr=function(){"use strict";k.removeClass(this.$SidebarAppTickerResizer2,"_4vfq");};ca.prototype.$SidebarAppTickerResizerk=function(da,event){"use strict";var ea=(this.$SidebarAppTickerResizere/this.$SidebarAppTickerResizerf)*100,fa=this.$SidebarAppTickerResizerg(event.clientY-this.$SidebarAppTickerResizern,this.$SidebarAppTickerResizerd()-ea);if(da=='end'){this.$SidebarAppTickerResizerr();this.$SidebarAppTickerResizerh(fa);}j.resize();};ca.prototype.$SidebarAppTickerResizerl=function(da,event){"use strict";var ea=-this.$SidebarAppTickerResizere,fa=this.$SidebarAppTickerResizer7()-this.$SidebarAppTickerResizere,ga=this.$SidebarAppTickerResizers(event.clientY-this.$SidebarAppTickerResizern,ea,fa);this.$SidebarAppTickerResizerg(-ga,this.$SidebarAppTickerResizerd());this.$SidebarAppTickerResizerq=this.$SidebarAppTickerResizere+ga;this.$SidebarAppTickerResizerq=Math.max(u,this.$SidebarAppTickerResizerq);this.$SidebarAppTickerResizer1.style.height=this.$SidebarAppTickerResizerq+'px';};ca.prototype.$SidebarAppTickerResizerm=function(da,event){"use strict";var ea=this.$SidebarAppTickerResizerq,fa=this.$SidebarAppTickerResizeru(this.$SidebarAppTickerResizerq),ga=this.$SidebarAppTickerResizerg(this.$SidebarAppTickerResizere-fa,this.$SidebarAppTickerResizerd());if(this.$SidebarAppTickerResizere!=fa){this.$SidebarAppTickerResizer6(fa);this.$SidebarAppTickerResizerh(ga);}new g(this.$SidebarAppTickerResizer1).from('height',ea).to('height',fa).duration(x).go();};ca.prototype.$SidebarAppTickerResizerg=function(da,ea){"use strict";var fa=this.$SidebarAppTickerResizerp+da,ga=(fa/this.$SidebarAppTickerResizerf)*100;ga=Math.max(t,Math.min(ea,ga));this.$SidebarAppTickerResizer0.style.height=ga+'%';if(ga!=t){k.removeClass(this.$SidebarAppTickerResizer0,'hidden_elem');this.$SidebarAppTickerResizera();}return ga;};ca.prototype.$SidebarAppTickerResizeru=function(da){"use strict";var ea=this.$SidebarAppTickerResizerv(),fa=this.$SidebarAppTickerResizer7();return (da<(fa-y))?((da<(ea-y))?u:ea):fa;};ca.prototype.$SidebarAppTickerResizerv=function(){"use strict";return v;};ca.prototype.$SidebarAppTickerResizer7=function(){"use strict";return w;};ca.prototype.$SidebarAppTickerResizerw=function(da){"use strict";var ea=this.$SidebarAppTickerResizer7();return (da<0)?u:(da>ea?ea:da);};ca.prototype.$SidebarAppTickerResizers=function(da,ea,fa){"use strict";return (da<ea)?ea:((da>fa)?fa:da);};ca.prototype.$SidebarAppTickerResizerh=function(da){"use strict";new i('/ajax/feed/ticker/resize').setData({height:''+da}).setMethod('POST').send();h.inform('Ticker/resized');};ca.prototype.$SidebarAppTickerResizer6=function(da){"use strict";new i('/ajax/feed/apps/resize').setData({height:''+da}).setMethod('POST').send();};ca.prototype.$SidebarAppTickerResizerx=function(da){"use strict";var ea=this.$SidebarAppTickerResizerp,fa=this.$SidebarAppTickerResizerf*da/100;new g(this.$SidebarAppTickerResizer0).from('height',ea).to('height',fa).duration(ba).ondone(function(){this.$SidebarAppTickerResizer0.style.height=da+'%';this.$SidebarAppTickerResizerh(da===0?'0.0':da);j.resize();}.bind(this)).go();};ca.prototype.$SidebarAppTickerResizer8=function(){"use strict";this.$SidebarAppTickerResizerc();this.$SidebarAppTickerResizerx(0);};ca.prototype.$SidebarAppTickerResizer9=function(){"use strict";this.$SidebarAppTickerResizerc();var da=((this.$SidebarAppTickerResizerf-this.$SidebarAppTickerResizeri-aa-this.$SidebarAppTickerResizere)*50/this.$SidebarAppTickerResizerf);this.$SidebarAppTickerResizerx(da);};e.exports=ca;},null);
__d("FileFormResetOnSubmit",["DOMQuery","Event","emptyFunction"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(l,m){var n=h.listen(l,'change',i.thatReturnsFalse,h.Priority.URGENT);try{m();}catch(o){throw o;}finally{n.remove();}}function k(l){"use strict";this._form=l;}k.prototype.enable=function(){"use strict";var l=this._reset.bind(this);this._subscription=this._form.subscribe('submit',function(){setTimeout(l,0);});};k.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null;};k.prototype._reset=function(){"use strict";var l=this._form.getRoot();j(l,function(){var m=g.scry(l,'input[type="file"]');m.forEach(function(n){n.value='';});});};e.exports=k;},null);
__d("FormSubmitOnChange",["Event","submitForm"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j){"use strict";this._form=j;}i.prototype.enable=function(){"use strict";this._listener=g.listen(this._form.getRoot(),'change',this._submit.bind(this));};i.prototype.disable=function(){"use strict";this._listener.remove();this._listener=null;};i.prototype._submit=function(){"use strict";h(this._form.getRoot());};Object.assign(i.prototype,{_listener:null});e.exports=i;},null);
__d("MercuryFileUploader",["ArbiterMixin","CSS","Dialog","DOM","Event","FileForm","FileFormResetOnSubmit","FileInput","FormSubmitOnChange","MercuryAttachment","MercuryAttachmentTemplates","MercuryConstants","PhotosUploadID","SubscriptionsHandler","csx","fbt","getObjectValues","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=x(g);for(var aa in z)if(z.hasOwnProperty(aa))ca[aa]=z[aa];var ba=z===null?null:z.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=z;function ca(ea,fa,ga,ha){"use strict";this.$MercuryFileUploader0=ea;this.$MercuryFileUploader1={};this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader6={};this.$MercuryFileUploader7={};this.$MercuryFileUploader8={};this.$MercuryFileUploader9={};this.updateElements(fa,ga,ha);}ca.prototype.updateElements=function(ea,fa,ga){"use strict";this.$MercuryFileUploadera&&this.$MercuryFileUploadera.release();this.$MercuryFileUploadera=new t();this.$MercuryFileUploaderb&&this.$MercuryFileUploaderb.destroy();this.$MercuryFileUploaderb=new l(ea,[o,m]);this.$MercuryFileUploaderb.setAllowCrossOrigin(true);this.$MercuryFileUploaderb.setUploadInParallel(true);var ha=j.find(ea,"._4q60"),ia=j.find(ha,"._4q61");new n(ha,ia,fa);this.$MercuryFileUploadera.addSubscriptions(this.$MercuryFileUploaderb.subscribe('submit',function(){var ja={count:0,file_sizes:[]};if(fa.files){for(var ka=0;ka<fa.files.length;ka++)if(fa.files[ka].size>r.AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var la={};for(var ma=0;ma<fa.files.length;ma++){var na=this.$MercuryFileUploaderc();this.$MercuryFileUploaderd(na,fa.files[ma].name);ja.count++;ja.file_sizes.push(fa.files[ma].size);la[na]=fa.files[ma];}this.$MercuryFileUploaderb.setFiles(la);}else{ga.value=this.$MercuryFileUploaderc();this.$MercuryFileUploaderd(ga.value,fa.value);ja.count=1;}this.inform('submit',ja);}.bind(this)),this.$MercuryFileUploaderb.subscribe('success',this.$MercuryFileUploadere.bind(this)),this.$MercuryFileUploaderb.subscribe('failure',this.$MercuryFileUploaderf.bind(this)),k.listen(ia,'click',y(this.inform,this,'open')));};ca.prototype.showAttachmentSizeErrorDialog=function(){"use strict";this.$MercuryFileUploaderb.abort();this.$MercuryFileUploaderb.clear();new i().setTitle(v._("The file you have selected is too large")).setBody(v._("The file you have selected is too large. The maximum size is 25MB.")).setButtons(i.OK).setSemiModal(true).show();};ca.prototype.addDroppedFiles=function(ea){"use strict";if(!this.$MercuryFileUploaderb||!this.$MercuryFileUploaderb.canUseXHR())return;var fa={},ga={count:0,file_sizes:[]};for(var ha=0;ha<ea.length;ha++){var ia=ea[ha];if(ia.size>r.AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var ja=this.$MercuryFileUploaderc();this.$MercuryFileUploaderd(ja,ia.name);fa[ja]=ia;ga.file_sizes.push(ia.size);ga.count++;}this.$MercuryFileUploaderb.setFiles(fa);this.$MercuryFileUploaderb.forceSendViaXHR();this.inform('submit',ga);};ca.prototype.isUploading=function(){"use strict";return !!Object.keys(this.$MercuryFileUploader7).length;};ca.prototype.addCachedAttachments=function(ea){"use strict";ea.forEach(function(fa){var ga=this.$MercuryFileUploaderc();this.$MercuryFileUploaderd(ga,fa.filename);this.$MercuryFileUploaderg(ga,fa);}.bind(this));};ca.prototype.addCachedImageFiles=function(ea){"use strict";var fa=v._("Photo");ea.forEach(function(ga){var ha=this.$MercuryFileUploaderc();this.$MercuryFileUploaderd(ha,fa);this.$MercuryFileUploaderg(ha,{filename:ga,image_id:ga,filetype:'image/jpeg'});}.bind(this));};ca.prototype.getAttachments=function(){"use strict";return w(this.$MercuryFileUploader1);};ca.prototype.getImageFiles=function(){"use strict";var ea=Object.keys(this.$MercuryFileUploader2).sort(),fa=[];ea.forEach(function(ga){return fa.push(this.$MercuryFileUploader2[ga]);}.bind(this));return fa;};ca.prototype.getAnimatedImageFiles=function(){"use strict";return w(this.$MercuryFileUploader3);};ca.prototype.getVideoFiles=function(){"use strict";return w(this.$MercuryFileUploader4);};ca.prototype.getAudioFiles=function(){"use strict";return w(this.$MercuryFileUploader5);};ca.prototype.getFiles=function(){"use strict";return w(this.$MercuryFileUploader6);};ca.prototype.removeAttachments=function(){"use strict";if(this.$MercuryFileUploader0)j.empty(this.$MercuryFileUploader0);this.$MercuryFileUploader1={};this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader6={};this.$MercuryFileUploader8={};this.$MercuryFileUploader7={};this.$MercuryFileUploader9={};if(this.$MercuryFileUploader0)h.hide(this.$MercuryFileUploader0);this.inform('dom-updated');};ca.prototype.destroy=function(){"use strict";this.$MercuryFileUploadera&&this.$MercuryFileUploadera.release();this.$MercuryFileUploaderb&&this.$MercuryFileUploaderb.destroy();this.removeAttachments();};ca.prototype.$MercuryFileUploaderd=function(ea,fa){"use strict";var ga=q[':fb:mercury:upload-file-row'].build();this.$MercuryFileUploader8[ea]=ga;this.$MercuryFileUploader7[ea]=true;this.$MercuryFileUploader9[ea]=Date.now();j.appendContent(ga.getNode('iconText'),da(fa));k.listen(ga.getNode('closeFileUpload'),'click',this.$MercuryFileUploaderh.bind(this,ea));if(this.$MercuryFileUploader0){j.appendContent(this.$MercuryFileUploader0,ga.getRoot());h.show(this.$MercuryFileUploader0);}this.inform('dom-updated');};ca.prototype.$MercuryFileUploaderh=function(ea,event){"use strict";if(this.$MercuryFileUploader7[ea]){this.inform('upload-canceled-during-upload');}else if(this.$MercuryFileUploader1[ea]||this.$MercuryFileUploader2[ea]||this.$MercuryFileUploader3[ea]||this.$MercuryFileUploader4[ea]||this.$MercuryFileUploader5[ea]||this.$MercuryFileUploader6[ea])this.inform('upload-canceled-after-uploaded');delete this.$MercuryFileUploader1[ea];delete this.$MercuryFileUploader2[ea];delete this.$MercuryFileUploader3[ea];delete this.$MercuryFileUploader4[ea];delete this.$MercuryFileUploader5[ea];delete this.$MercuryFileUploader6[ea];delete this.$MercuryFileUploader7[ea];delete this.$MercuryFileUploader9[ea];var fa=this.$MercuryFileUploader8[ea];delete this.$MercuryFileUploader8[ea];if(fa){j.remove(fa.getRoot());this.inform('dom-updated');}this.inform('upload-canceled');return false;};ca.prototype.$MercuryFileUploaderi=function(ea,fa){"use strict";var ga=this.$MercuryFileUploader8[ea],ha=p.getAttachIconClassByMime(fa);h.addClass(ga.getNode('iconText'),ha);h.addClass(ga.getRoot(),'done');};ca.prototype.$MercuryFileUploaderg=function(ea,fa){"use strict";if(this.$MercuryFileUploader7[ea]){delete this.$MercuryFileUploader7[ea];if(fa.image_id){this.$MercuryFileUploader2[ea]=fa.image_id;}else if(fa.gif_id){this.$MercuryFileUploader3[ea]=fa.gif_id;}else if(fa.video_id){this.$MercuryFileUploader4[ea]=fa.video_id;}else if(fa.audio_id){this.$MercuryFileUploader5[ea]=fa.audio_id;}else if(fa.file_id){this.$MercuryFileUploader6[ea]=fa.file_id;}else this.$MercuryFileUploader1[ea]=fa;this.$MercuryFileUploaderi(ea,fa.filetype);this.inform('one-upload-completed',{upload_time_ms:Date.now()-this.$MercuryFileUploader9[ea]});}if(!this.isUploading())this.inform('all-uploads-completed',{count:this.getAttachments().length});};ca.prototype.$MercuryFileUploadere=function(event,ea){"use strict";var fa=ea.response.getPayload();this.$MercuryFileUploaderg(this.$MercuryFileUploaderj(ea),fa.metadata[0]);};ca.prototype.$MercuryFileUploaderf=function(event,ea){"use strict";this.inform('one-upload-failed');this.$MercuryFileUploaderh(this.$MercuryFileUploaderj(ea),event);};ca.prototype.$MercuryFileUploaderc=function(){"use strict";return 'upload_'+s.getNewID();};ca.prototype.$MercuryFileUploaderj=function(ea){"use strict";var fa=ea.response.getPayload();if(ea.upload){return ea.upload.getName();}else return fa.uploadID;};function da(ea){if(ea&&ea.startsWith('C:\\fakepath\\'))return ea.substring(12);return ea;}e.exports=ca;},null);
__d("FBRTCDispatcher",["Dispatcher"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new g();},null);
__d("FBRTCCallabilityActions",["keyMirror"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=g({CALLABILITY_FETCHED:null,CALLABILITY_FETCH_ERROR:null});function i(j){this.$FBRTCCallabilityActions0=j;}i.prototype.callabilityFetched=function(j,k){this.$FBRTCCallabilityActions0.dispatch({type:h.CALLABILITY_FETCHED,userID:j,callability:k});};i.prototype.callabilityFetchError=function(j){this.$FBRTCCallabilityActions0.dispatch({type:h.CALLABILITY_FETCH_ERROR,userID:j});};i.Types=h;e.exports=i;},null);
__d("XRTCCallabilityController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/rtc\/callability\/",{user_id:{type:"Int",required:true}});},null);
__d("FBRTCCallabilityDataManager",["AsyncRequest","FBRTCCallabilityActions","XRTCCallabilityController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';function j(k){this.$FBRTCCallabilityDataManager0=new h(k);}j.prototype.fetchCallability=function(k){var l=i.getURIBuilder().setInt('user_id',parseInt(k,10)).getURI(),m=this.$FBRTCCallabilityDataManager1.bind(this,k),n=this.$FBRTCCallabilityDataManager2.bind(this,k);new g().setURI(l).setHandler(m).setErrorHandler(n).send();};j.prototype.$FBRTCCallabilityDataManager1=function(k,l){this.$FBRTCCallabilityDataManager0.callabilityFetched(k,l.payload);};j.prototype.$FBRTCCallabilityDataManager2=function(k,l){this.$FBRTCCallabilityDataManager0.callabilityFetchError(k);};e.exports=j;},null);
__d("RTCCallabilityStore",["Cache","FBRTCAvailability","FluxStore","FBRTCCallabilityActions","FBRTCCallabilityDataManager","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=.5,n=5;for(var o in i)if(i.hasOwnProperty(o))q[o]=i[o];var p=i===null?null:i.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=i;function q(r){i.call(this,r);this.$RTCCallabilityStore0=new k(r);this.$RTCCallabilityStore1=new g();}q.prototype.__onDispatch=function(r){var s=r.type;switch(s){case j.Types.CALLABILITY_FETCHED:var t=r,u=t.userID,v=t.callability;this.$RTCCallabilityStore1.set(u,v.is_callable,null,(v.is_callable?n:m));this.__emitChange();break;case j.Types.CALLABILITY_FETCH_ERROR:this.$RTCCallabilityStore1.set(r.userID,false,null,m);this.__emitChange();break;}};q.prototype.isCallable=function(r){if(h.isCallable(r))return true;if(!this.$RTCCallabilityStore1.has(r)){this.$RTCCallabilityStore0.fetchCallability(r);this.$RTCCallabilityStore1.set(r,false,null,m);}return !!(this.$RTCCallabilityStore1.get(r));};q.prototype.callButtonTooltip=function(r,s){if(this.isCallable(r))return l._("Start a video call with {shortname}",[l.param("shortname",s)]);return l._("{shortname} is currently unavailable for video calling",[l.param("shortname",s)]);};e.exports=q;},null);
__d("FBRTCCallabilityStore",["FBRTCDispatcher","RTCCallabilityStore"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';e.exports=new h(g);},null);
__d("ChatEmployeeAwayWarning",["MercuryIDs","MercuryParticipants","MercuryViewer"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={updateEmployeeAwayWarning:function(k,l,m){h.get(i.getID(),function(n){var o=n.employee;if(o)h.getMulti(k.participants,function(p){var q=false,r=g.getUserIDFromThreadID(k.thread_id);if(!r)return;var s='fbid:'+r;for(var t in p)if(s==p[t].id&&p[t].is_employee_away)q=true;if(q){l();}else m();});});}};e.exports=j;},null);
__d("MessengerURIConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();'use strict';var g={COMPOSE_SUBPATH:'/new',GROUPS_PATH:'/groups',PEOPLE_PATH:'/people',THREAD_PREFIX:'/t/',GROUP_PREFIX:'group-',RESERVED_WORDS:['groups','people','new','messenger','t']};e.exports=g;},null);
__d("MessengerStateProcessor",["MercuryAPIArgsSource","MercuryIDs","MercuryParticipantTypes","MercuryParticipants","MercuryThreadIDMap","MercuryThreads","MessengerURIConstants"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n={preprocess:function(p){var q=p.activeThreadID;if(q){var r=h.getUserIDFromThreadID(q),s=r&&j.getNow(h.getParticipantIDFromUserID(r));if(s&&s.type!==i.EVENT){p.threadKey=s.vanity||r;}else if(r&&!s){p.threadKey=r;}else{var t=k.get(),u=t.getFBIDFromClientIDNow(q);p.threadKey=u||q;}}delete p.activeThreadID;return p;},postprocess:function(p){var q=k.get(),r=l.get(),s=o(p.threadKey),t;t=h.isValid(s)?s:q.getClientIDFromFBIDNow(s);if(!t){var u=j.getIDFromVanityOrFBID(s),v=u&&r.getCanonicalThreadToParticipant(u,null,g.MESSENGER);if(v)t=v.thread_id;}if(t){p.activeThreadID=t;p.serverThreadID=q.getFBIDFromClientIDNow(t);}delete p.threadKey;return p;}};function o(p){if(!p)return null;return p.startsWith(m.GROUP_PREFIX)?p.substr(m.GROUP_PREFIX.length):p;}e.exports=n;},null);
__d("MessengerURISerializer",["MessengerStateProcessor","MessengerURIConstants","MessengerView","URI","WWWBase"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l='/?$',m={serialize:function(v){var w=new j(k.uri);v=g.preprocess(v);switch(v.masterView){case i.MASTER.GROUPS:w.setPath(h.GROUPS_PATH);break;case i.MASTER.PEOPLE:w.setPath(h.PEOPLE_PATH);break;}if(v.detailView===i.DETAIL.COMPOSE){w.setPath(w.getPath()+h.COMPOSE_SUBPATH);}else if(v.threadKey)w.setPath(w.getPath()+h.THREAD_PREFIX+t(v.threadKey));return w;},deserialize:function(v){var w={},x=v.getPath();if(x.match('^'+h.GROUPS_PATH)){w.masterView=i.MASTER.GROUPS;}else if(x.match('^'+h.PEOPLE_PATH)){w.masterView=i.MASTER.PEOPLE;}else w.masterView=i.MASTER.RECENT;if(x.match(h.COMPOSE_SUBPATH+l)){w.detailView=i.DETAIL.COMPOSE;}else{var y=n(x);if(y&&!r(y)){w.threadKey=u(y);w.detailView=i.DETAIL.THREAD;}}return g.postprocess(w);}};function n(v){var w=v.match(h.THREAD_PREFIX+'([^/]+)'+l);return w&&w[1];}var o=h.RESERVED_WORDS.join('|'),p=new RegExp('^('+o+')$'),q=new RegExp('^\\.('+o+')$');function r(v){return !!v.match(p);}function s(v){return !!v.match(q);}function t(v){v=r(v)?'.'+v:v;return j.encodeComponent(v);}function u(v){v=j.decodeComponent(v);return s(v)?v.substr(1):v;}e.exports=m;},null);
__d("MessengerActions",["MessengerDispatcher","MessengerURISerializer","MessengerView","URI","goURI","keyMirror"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=l({CHANGE_FOLDER:null,HIDE_DIALOG:null,REPLACE_INFO_PANEL_VISIBILITY:null,REPLACE_STATE:null,SHOW_DIALOG:null}),n={Types:m,changeDetailView:function(p){o(function(q){if(q.detailView!==p)return {detailView:p};});},changeMasterView:function(p){o(function(q){if(q.masterView!==p)return {masterView:p};});},selectThread:function(p){o(function(q){if(q.activeThreadID!==p)return {activeThreadID:p,detailView:i.DETAIL.THREAD};});},changeState:function(p){g.dispatch({type:m.REPLACE_STATE,nextState:p});},changeInfoPanelVisibility:function(p){g.dispatch({type:n.Types.REPLACE_INFO_PANEL_VISIBILITY,nextState:{infoPanelVisibility:p}});},showDialog:function(p,q){g.dispatch({type:n.Types.SHOW_DIALOG,dialogClass:p,dialogProps:q});},hideDialog:function(p){g.dispatch({type:n.Types.HIDE_DIALOG,dialogClass:p});},changeFolder:function(p){g.dispatch({type:n.Types.CHANGE_FOLDER,folder:p});}};function o(p){var q=h.deserialize(new j(window.location.href)),r=p(q);if(r)k(h.serialize(Object.assign(q,r)));}e.exports=n;},null);
__d("MessengerHotLikePreviewEvents",["mixInEventEmitter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={START:'start',STOP:'stop',POP:'pop',REMOVE:'remove',FINISH_ANIMATION:'finish_animation'};g(h,{start:true,stop:true,pop:true,remove:'remove',finish_animation:'finish_animation'});e.exports=h;},null);
__d("XStickerAssetController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/asset\/",{sticker_id:{type:"Int",required:true},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}});},null);
__d("MessengerHotLikeUtils",["StickerAssetType","StickerConstants","XStickerAssetController"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j={SizeTimes:{small:1000,medium:2000,large:3000},getStickerIDForTime:function(k){var l=null;switch(true){case k<this.SizeTimes.small:l=h.HOT_LIKE_SMALL_STICKER_ID;break;case k<this.SizeTimes.medium:l=h.HOT_LIKE_MEDIUM_STICKER_ID;break;case k<this.SizeTimes.large:l=h.HOT_LIKE_LARGE_STICKER_ID;break;}return l;},getGrowCoefficientForSince:function(k){return Math.min(1,(Date.now()-k)/this.SizeTimes.large);},getMetadataForHotLike:function(k){var l;switch(k){case h.HOT_LIKE_LARGE_STICKER_ID:l=120;break;case h.HOT_LIKE_MEDIUM_STICKER_ID:l=84;break;case h.HOT_LIKE_SMALL_STICKER_ID:l=35;break;}return l?{height:l,width:l}:(void 0);},getPreviewURI:function(){return i.getURIBuilder().setInt('sticker_id',h.HOT_LIKE_LARGE_STICKER_ID).setEnum('image_type',g.IMAGE).getURI().toString();},getURIWithID:function(k){return i.getURIBuilder().setInt('sticker_id',k).setEnum('image_type',g.IMAGE).getURI().toString();}};e.exports=j;},null);
__d("MNCommerceDialogStateActions",["MessengerDispatcher","MNCommerceActionTypes"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i={showDialog:function(j,k){g.dispatch({type:h.DIALOG.SHOW,dialogContainer:j,state:k});},hideDialog:function(){g.dispatch({type:h.DIALOG.HIDE});}};e.exports=i;},null);
__d("MessengerContextBannerBootloader",["BootloadedComponent.react","Bootloader","CurrentUser","DOM","immutable","MercuryIDs","MercuryParticipants","MercuryThreads","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';function p(q,r,s){n.getForFBID(i.getID()).getThreadMeta(q,function(t){if(!t)return;m.getMulti(t.participants,function(u){var v=k.Map();v=v.withMutations(function(x){t.participants.forEach(function(y){x.set(y,u[y]);});});var w=j.create('div',{style:{left:0,position:'absolute',right:0,top:0}});o.render(o.createElement(g,{bootloadPlaceholder:o.createElement("div",{style:{height:80}}),bootloadComponent:function(x){h.loadModules(["MessengerContextBannerContainer.react"],x);},contact:v.get(l.getParticipantIDFromFromThreadID(t.thread_id)),location:r,participants:v,thread:t,viewer:i.getID()}),w);s(w);});});}e.exports={bootload:p};},null);
__d("MessengerButton.react",["ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MessengerButton",mixins:[g],propTypes:{label:l.string.isRequired,type:l.oneOf(['primary','secondary']).isRequired,use:l.oneOf(['default','danger']).isRequired},getDefaultProps:function(){return {use:'default'};},handleLinkClick:function(n){if(this.props.disabled){n.preventDefault();}else if(this.props.onClick)this.props.onClick(n);},render:function(){var n=this.props,o=n.className,p=n.label,q=(function(r,s){var t={},u=Object.prototype.hasOwnProperty;if(r==null)throw new TypeError();for(var v in r)if(u.call(r,v)&&!u.call(s,v))t[v]=r[v];return t;})(n,{className:1,label:1});return (h.createElement("a",h.__spread({className:j((("_3quh")+(' '+"_30yy")+(this.props.type==='primary'?' '+"_2t_":'')+(this.props.type==='secondary'?' '+"_2u0":'')+(this.props.use==='danger'?' '+"_3ay_":'')+(this.props.disabled?' '+"_4zab":'')),o),href:"#"},q,{onClick:this.handleLinkClick}),p));}});e.exports=m;},null);
__d("MessengerDialog.react",["LayerFadeOnHide","LayerHideOnEscape","React","XUIDialog.react","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i,n=m.PropTypes,o=i.createClass({displayName:"MessengerDialog",propTypes:{onToggle:n.func.isRequired,repositionOnUpdate:n.bool,shown:n.bool,type:n.oneOf(['alert','default']),width:n.number},getDefaultProps:function(){return {repositionOnUpdate:false,shown:true,type:'alert',width:400};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this));},render:function(){return (i.createElement(j,i.__spread({behaviors:{LayerFadeOnHide:g,LayerHideOnEscape:h}},this.props,{className:l("_4ebx",this.props.className),ref:"dialog"}),i.createElement("div",{className:(("_4eby")+(this.props.type==='alert'?' '+"_2c9g":'')+(this.props.type==='default'?' '+"_2c9i":''))},this.props.children)));}});e.exports=o;},null);
__d("MessengerDialogBody.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g.createClass({displayName:"MessengerDialogBody",render:function(){return (g.createElement("div",{className:i("_4eb-",this.props.className)},this.props.children));}});e.exports=j;},null);
__d("MessengerDialogButton.react",["MessengerButton.react","ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"MessengerDialogButton",mixins:[h],propTypes:{action:m.oneOf(['button','cancel','confirm'])},render:function(){var o=this.props,p=o.action,q=o.className,r=(function(s,t){var u={},v=Object.prototype.hasOwnProperty;if(s==null)throw new TypeError();for(var w in s)if(v.call(s,w)&&!v.call(t,w))u[w]=s[w];return u;})(o,{action:1,className:1});return (i.createElement(g,i.__spread({className:k(q,(("_5ixy")+(p==='button'?' '+"layerButton":'')+(p==='cancel'?' '+"layerCancel":'')+(p==='confirm'?' '+"layerConfirm":'')))},r)));}});e.exports=n;},null);
__d("MessengerDialogFooter.react",["LeftRight.react","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MessengerDialogFooter",propTypes:{leftContent:l.object},render:function(){return (h.createElement("div",{className:j("_4eb_",this.props.className)},h.createElement(g,null,h.createElement("div",{className:"_2_d1"},this.props.leftContent),h.createElement("div",null,this.props.children))));}});e.exports=m;},null);
__d("MessengerDialogHeader.react",["React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j=g.createClass({displayName:"MessengerDialogHeader",render:function(){return (g.createElement("h4",{className:i("_4ebz",this.props.className)},this.props.children));}});e.exports=j;},null);
__d("MessengerText.react",["ReactComponentWithPureRenderMixin","React","cx","joinClasses"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=h,l=k.PropTypes,m=h.createClass({displayName:"MessengerText",mixins:[g],propTypes:{type:l.oneOf(['primary','secondary']).isRequired,size:l.oneOf(['small'])},render:function(){return (h.createElement("div",h.__spread({},this.props,{className:j((("_39r5")+(this.props.type==='primary'?' '+"_39r6":'')+(this.props.type==='secondary'?' '+"_39r7":'')+(this.props.size==='small'?' '+"_39r8":'')),this.props.className)}),this.props.children));}});e.exports=m;},null);
__d("MessengerHotLikePreview.react",["Animation","MessengerHotLikePreviewEvents","MessengerHotLikeUtils","React","StickerConstants","SubscriptionsHandler","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=j,o=n.PropTypes,p=j.createClass({displayName:"MessengerHotLikePreview",propTypes:{since:o.number},componentDidMount:function(){this._subscriptions=new l();this._subscriptions.addSubscriptions(h.addListener(h.STOP,this._snapToStickerSize),h.addListener(h.POP,this._pop));this._growthAnimation=new g(j.findDOMNode(this)).to('width',80).to('height',80).duration(3000).go();this._setUpRotationAnimation();},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){return (j.createElement("div",{className:"_4a9g _576q"}));},_setUpRotationAnimation:function(){this._rotateAnimation=new g(j.findDOMNode(this));this._rotateHotLike(-2,2,150,1000);this._rotateHotLike(-4,4,100,1000);this._rotateHotLike(-10,10,75,1000);this._rotateAnimation.go();},_rotateHotLike:function(q,r,s,t){var u=Math.floor(t/s),v=null;for(var w=0;w<u;w++){v=w%2?q:r;this._rotateAnimation.to('rotateZ',v).duration(s).checkpoint();}},_snapToStickerSize:function(q){if(this._snapped)return;this._snapped=true;var r=Date.now()-this.props.since,s=i.getStickerIDForTime(r);if(s){var t=i.getMetadataForHotLike(s);this._rotateAnimation.stop();var u=30,v=-10;if(s===k.HOT_LIKE_SMALL_STICKER_ID){u=0;v=0;}this._growthAnimation.stop().to('width',t.width*1.2).to('height',t.height*1.2).to('rotateZ',u).duration(100).checkpoint().to('width',t.width*.9).to('height',t.height*.9).to('rotateZ',v).duration(100).checkpoint().to('width',t.width).to('height',t.height).to('rotateZ',0).duration(100).ondone(function(){h.emit(h.FINISH_ANIMATION,q,s);}).go();}},_pop:function(q){this._growthAnimation.stop().to('width',0).to('height',0).duration(100).ondone(function(){h.emit(h.REMOVE,q);}).go();}});e.exports=p;},null);
__d("MNCommerceButton.react",["CurrentEnvironment","MessengerDialogButton.react","React","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceButton",render:function(){var l=g.messengerdotcom,m=l?h:j,n=this.props.type;if(!n)n=this.props.type==='confirm'?'primary':'secondary';var o=l?'default':this.props.use,p=Object.assign({},this.props,{type:n,use:o});return (i.createElement(m,i.__spread({},p),this.props.children));}});e.exports=k;},null);
__d("MNCommerceAttachmentConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};e.exports=g;},null);
__d("MNCommerceDialog.react",["CurrentEnvironment","LayerFadeOnHide","LayerHideOnEscape","MNCommerceAttachmentConstants","MessengerDialog.react","React","XUIDialog.react","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.__markCompiled&&b.__markCompiled();'use strict';var q=l,r=q.PropTypes,s=l.createClass({displayName:"MNCommerceDialog",propTypes:{onToggle:r.func,shown:r.bool,width:r.number.isRequired},getDefaultProps:function(){return {onToggle:o,repositionOnUpdate:true,shown:true,width:g.messengerdotcom?j.MDOTCOMDIALOG.WIDTH:j.DIALOG.WIDTH};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this));},render:function(){var t=g.messengerdotcom,u=t?k:m;return (l.createElement(u,l.__spread({behaviors:{LayerFadeOnHide:h,LayerHideOnEscape:i}},this.props,{className:p(this.props.className,((t?"_3rx0":''))),ref:"dialog"}),this.props.children));}});e.exports=s;},null);
__d("MNCommerceDialogBody.react",["CurrentEnvironment","MessengerDialogBody.react","React","XUIDialogBody.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceDialogBody",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("MNCommerceDialogFooter.react",["CurrentEnvironment","MessengerDialogFooter.react","React","XUIDialogFooter.react","cloneWithProps","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i.createClass({displayName:"MNCommerceDialogFooter",render:function(){var n=g.messengerdotcom,o=n?h:j,p,q=this.props.children;if(n){p=i.Children.count(this.props.children);q=i.Children.map(this.props.children,function(r,s){if(!r)return null;return k(r,{className:"_4ec0",type:s===0&&p===2?'secondary':'primary'});});}return (i.createElement(o,i.__spread({},this.props),q));}});e.exports=m;},null);
__d("MNCommerceDialogTitle.react",["CurrentEnvironment","MessengerDialogHeader.react","React","XUIDialogTitle.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"MNCommerceDialogTitle",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("MNCommerceUnlinkDialog.react",["MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","React","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();'use strict';var n=l,o=n.PropTypes,p=l.createClass({displayName:"MNCommerceUnlinkDialog",propTypes:{onCancelButtonClick:o.func,onTurnOffButtonClick:o.func},render:function(){var q=m._("Cancel"),r=m._("Turn Off");return (l.createElement(h,{onToggle:this.props.onToggle,shown:this.props.shown},l.createElement(k,{showCloseButton:false},m._("Unlink account?")),l.createElement(i,null,l.createElement("div",null,m._("You can turn off updates if you didn't sign up or just don't want to get them anymore."))),l.createElement(j,null,l.createElement(g,{label:q,onClick:this.props.onCancelButtonClick,use:"default"}),l.createElement(g,{label:r,onClick:this.props.onTurnOffButtonClick,use:"confirm"}))));}});e.exports=p;},null);
__d("MNCommerceLoggingConstants",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={DIALOG_SURFACE:{SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error'}};e.exports=g;},null);
__d("MNCommerceUnlinkErrorDialog.react",["MNCommerceAttachmentConstants","MNCommerceErrors","React","MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=i,q=p.PropTypes,r=i.createClass({displayName:"MNCommerceUnlinkErrorDialog",propTypes:{errorType:q.number,onOkayButtonClick:q.func},render:function(){var s=o._("OK"),t=null,u=null;switch(this.props.errorType){case h.ALREADY_UNLINKED:u=i.createElement("div",null,o._("Updates Are Already Off"));t=i.createElement("div",null,o._("You aren't getting updates in Messenger."));break;default:u=i.createElement("div",null,o._("Couldn't Turn Off Updates"));t=i.createElement("div",null,o._("Sorry, something went wrong. Please try again."));break;}return (i.createElement(k,{onToggle:this.props.onToggle,shown:this.props.shown,width:g.UNLINK_ERROR_DIALOG.WIDTH},i.createElement(n,null,u),i.createElement(l,null,t),i.createElement(m,null,i.createElement(j,{label:s,onClick:this.props.onOkayButtonClick,use:"confirm"}))));}});e.exports=r;},null);
__d("MNCommerceUnlinkDialogContainer.react",["BanzaiLogger","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceUnlinkDialog.react","MNCommerceUnlinkErrorDialog.react","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=n.createClass({displayName:"MNCommerceUnlinkDialogContainer",render:function(){var p=i.getState();if(p&&p.errorType){g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.UNLINK_ERROR})});return (n.createElement(m,{onToggle:this._onToggle,shown:!!p,errorType:p.errorType,onOkayButtonClick:this._hideDialog}));}else{g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.UNLINK})});return (n.createElement(l,{onToggle:this._onToggle,shown:!!p,onCancelButtonClick:this._hideDialog,onTurnOffButtonClick:p&&p.onTurnOffButtonClick}));}},_onToggle:function(p){if(!p)this._hideDialog();},_hideDialog:function(){h.hideDialog();}});e.exports=o;},null);
__d("XMNCommerceUnlinkController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});},null);
__d("MNCommerceUnlinkDataManager",["AsyncRequest","MNCommerceDialogStateActions","MNCommerceUnlinkDialogContainer.react","XMNCommerceUnlinkController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';function k(){}k.prototype.unlink=function(l,m){var n=j.getURIBuilder().setString('page_id',l).setString('user_id',m).getURI();new g().setURI(n).setErrorHandler(this.$MNCommerceUnlinkDataManager0).send();};k.prototype.$MNCommerceUnlinkDataManager0=function(l){h.showDialog(i,{errorType:l.error});};e.exports=new k();},null);
__d("MercuryThreadMuter",["AsyncDialog","AsyncRequest","DOM","MercuryThreadInfo"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={showMuteChangeDialog:function(l,m){g.send(new h('/ajax/mercury/mute_thread_dialog.php').setRelativeTo(m),function(n){n.subscribe('confirm',function(){this.hide();var o;i.scry(this.getRoot(),'input[type="radio"]').forEach(function(p){if(p.checked)o=p.value;});o=k.convertRawMuteSetting(o);d(['MercuryThreadActions'],function(p){p.get().updateMuteSetting(l,o);});}.bind(n));});},convertRawMuteSetting:function(l){switch(l){case 'always':return -1;case '30minutes':return 1800;case '1hour':return 3600;case '8hours':return 8*3600;case '24hours':return 24*3600;case '8am':var m,n=new Date(),o=new Date();o.setHours(8);o.setMinutes(0);o.setSeconds(0);if(o>n){m=o-n;}else m=o-n+(24*3600*1000);return m/1000;default:return 0;}}};e.exports=k;},null);
__d("MercuryCallLogMessage.react",["FBRTCCore","FBRTCLogger","React","SimpleXUIDialog","Tooltip.react","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=i.createClass({displayName:"MercuryCallLogMessage",render:function(){if(this.props.isAnswered){return (this._renderAnsweredCallLogMessage(this.props.peerFBID,this.props.peerName,this.props.isOutgoingCall));}else return (this._renderMissedCallLogMessage(this.props.peerFBID,this.props.peerName,this.props.isOutgoingCall));},_renderAnsweredCallLogMessage:function(o,p,q){var r=m._("Call {firstname}",[m.param("firstname",p)]),s;if(q){s=m._("You called {firstname}.",[m.param("firstname",p)]);}else s=m._("{firstname} called you.",[m.param("firstname",p)]);return this._generateCallLink(s,r,o,p);},_renderMissedCallLogMessage:function(o,p,q){var r,s;if(q){r=m._("{firstname} missed a call from you.",[m.param("firstname",p)]);s=m._("Call {firstname} again",[m.param("firstname",p)]);}else{r=m._("You missed a call from {firstname}.",[m.param("firstname",p)]);s=m._("Call {firstname} back",[m.param("firstname",p)]);}return this._generateCallLink(r,s,o,p);},_generateCallLink:function(o,p,q,r){if(g.shouldEnableVideoCalling()){return (i.createElement("a",{className:"_1xpw",onClick:this._handleClick.bind(this,q,r)},i.createElement(k,{alignH:"center",position:"above",tooltip:p},o)));}else return (i.createElement("span",{className:"_1xpw"},o));},_handleClick:function(o,p){if(g.isAvailableForWebrtcCalling(o)){g.startOutgoingCall(o,h.Trigger.ADMIN_MESSAGE,false);}else j.show(m._("{firstname} can't be called because they are temporarily offline.",[m.param("firstname",p)]),m._("Can't Connect Call"));}});e.exports=n;},null);
__d("MercuryTypingReceiver",["Arbiter","ChannelConstants","FBID","MercuryActionType","MercuryIDs","MercuryPayloadSource","MercuryDispatcher","MercurySingletonMixin","MercuryViewer","TypingStates","isEmpty","mixInEventEmitter","setTimeoutAcrossTransitions","MercuryThreadIDMap"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=b('MercuryThreadIDMap').get(),u=30000;function v(w){"use strict";this.$MercuryTypingReceiver0=null;this.$MercuryTypingReceiver1={};this.$MercuryTypingReceiver2=m.getForFBID(w);this.$MercuryTypingReceiver2.subscribe('update-typing-state',function(y,z){var aa=z.payload_source;if(aa!=l.CLIENT_CHANNEL_MESSAGE)return;var ba=z.actions;if(!ba||!ba.length)return;var ca=j.USER_GENERATED_MESSAGE;ba.forEach(function(da){if(da.action_type==ca&&da.author!=o.getID())this.$MercuryTypingReceiver4(da.thread_id,da.author);}.bind(this));}.bind(this));var x;if(i.isUser(w)){x=[h.getArbiterType('typ'),h.getArbiterType('ttyp')];}else x=[h.getArbiterType('page_typing')];g.subscribe(x,function(y,z){var aa=z.obj,ba=this.$MercuryTypingReceiver5(aa);if(ba){var ca=k.getParticipantIDFromUserID(aa.from);if(aa.st==p.TYPING){this.$MercuryTypingReceiver1[ba]=this.$MercuryTypingReceiver1[ba]||{};var da=this.$MercuryTypingReceiver1[ba][ca];this.$MercuryTypingReceiver1[ba][ca]=Date.now();if(!this.$MercuryTypingReceiver0)this.$MercuryTypingReceiver0=s(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);!da&&this.$MercuryTypingReceiver7(ba);}else if(aa.st==p.INACTIVE)this.$MercuryTypingReceiver4(ba,ca);}}.bind(this));}v.prototype.$MercuryTypingReceiver8=function(w){"use strict";var x=this.$MercuryTypingReceiver1[w]||{},y=Object.keys(x);y.sort(function(z,aa){return x[z]-x[aa];});return y;};v.prototype.$MercuryTypingReceiver6=function(){"use strict";this.$MercuryTypingReceiver0=null;var w=Date.now(),x={},y=false;for(var z in this.$MercuryTypingReceiver1){var aa=false;for(var ba in this.$MercuryTypingReceiver1[z]||{})if(this.$MercuryTypingReceiver1[z][ba]<w-u){delete this.$MercuryTypingReceiver1[z][ba];aa=true;}else y=true;if(aa)x[z]=this.$MercuryTypingReceiver8(z);}if(!q(x))this.$MercuryTypingReceiver9(x);if(y)this.$MercuryTypingReceiver0=s(function(){this.$MercuryTypingReceiver6();}.bind(this),3000);};v.prototype.$MercuryTypingReceiver4=function(w,x){"use strict";if(w in this.$MercuryTypingReceiver1)if(x in this.$MercuryTypingReceiver1[w]){delete this.$MercuryTypingReceiver1[w][x];this.$MercuryTypingReceiver7(w);}};v.prototype.$MercuryTypingReceiver9=function(w){"use strict";this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',w);};v.prototype.$MercuryTypingReceiver7=function(w){"use strict";var x={};x[w]=this.$MercuryTypingReceiver8(w);this.$MercuryTypingReceiver9(x);};v.prototype.$MercuryTypingReceiver5=function(w){"use strict";if(w.thread_fbid)return t.getClientIDFromFBIDNow(w.thread_fbid);if(w.type==='typ'||w.type==='page_typing')return k.getThreadIDFromUserID(w.from);return null;};r(v,{'state-changed':true});Object.assign(v,n);e.exports=v;},null);
__d("MercuryIndicatorController",["ArbiterMixin","DOM","MercuryActionType","MercuryDelayedRoger","MercuryIDs","MercuryMessageSourceTags","MercuryParticipants","MercuryViewer","arrayContains","formatDate","removeFromArray","fbt","MercuryRoger","MercuryThreads","MercuryTypingReceiver"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=b('MercuryRoger').get(),t=b('MercuryThreads').get(),u=b('MercuryTypingReceiver').get(),v=[];function w(x){this._threadID=x;this._canonicalUser=k.getUserIDFromThreadID(x);v.push(this);}Object.assign(w.prototype,g,{destroy:function(){q(v,this);},setLastMessage:function(x){this._lastMsg=x;this._handleStateChange();},_informStateChanged:function(x){if(x.activity=='none'&&this._currentActivity=='none')return;if(this._lastMsg&&n.isViewer(this._lastMsg.author))x.self_authored=true;this._currentActivity=x.activity;this.inform('state-changed',x);},_notifySentFrom:function(){var x,y,z=this._lastMsg.source_tags||[];if(o(z,l.MESSENGER)){x=h.create('a',{href:'/mobile/messenger','class':'fcg',target:'_blank'},r._("Sent from Messenger"));y='sentFromMobile';}else if(o(z,l.MOBILE)){x=h.create('a',{href:'/mobile','class':'fcg',target:'_blank'},r._("Sent from Mobile"));y='sentFromMobile';}else if(o(z,l.EMAIL)){x=r._("Sent from email");y='sentFromEmail';}else{this._informStateChanged({activity:'none'});return;}this._informStateChanged({activity:y,text:x});},_notifySeenTimestamp:function(x){var y=s.getSeenTimestamp(this._threadID,x[0])*.001,z=Date.now()*.001,aa;if(y<z-518400){aa='M j';}else if(y<z-86400){aa='D g:ia';}else aa='g:ia';this._informStateChanged({activity:'seen-timestamp',text:r._("Seen {timestamp}",[r.param("timestamp",p(y,aa))])});},_nameNormalizer:function(x){var y;m.getMulti(x,function(z){function aa(ca){if(z[ca]!==(void 0)){return z[ca].short_name.toLowerCase();}else return ca;}var ba=x.map(aa);y=function(ca){var da=aa(ca),ea=ba.indexOf(da)!==ba.lastIndexOf(da);return ea?z[ca].name:z[ca].short_name;};});return y;},_notifySeenBy:function(x){var y=this._lastMsg,z=true;m.getMulti(x,function(aa){z=false;if(this._lastMsg!=y)return;var ba=t.getThreadMetaNow(this._threadID),ca=ba?ba.participants.length:0,da=x.length+(y.author!=n.getID()),ea,fa=false,ga=ca>2&&da>=ca-1,ha;if(ba)ha=this._nameNormalizer(ba.participants);if(!ha)ha=function(la){return aa[la].short_name;};if(ga){ea=r._("Seen by everyone");}else if(x.length==1){ea=r._("Seen by {user}",[r.param("user",aa[x[0]].short_name)]);}else if(x.length==2){ea=r._("Seen by {user1}, {user2}",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name)]);}else if(x.length==3){ea=r._("Seen by {user1}, {user2}, {user3}",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("user3",aa[x[2]].short_name)]);}else if(x.length>3){var ia=Object.keys(aa).length-2,ja=r._({"*":"{num} more"},[r.param("num",ia,[0])]),ka=h.create('span',{className:'more'},ja);ea=r._("Seen by {user1}, {user2}, {=num more link}",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("=num more link",ka)]);fa=true;}this._informStateChanged({activity:'seen-by',text:ea,seenBy:x,tooltip:fa});}.bind(this));z&&this._informStateChanged({activity:'none'});},_notifyTyping:function(x){var y=this._lastMsg,z=true;m.getMulti(x,function(aa){z=false;if(this._lastMsg!=y)return;var ba=t.getThreadMetaNow(this._threadID),ca=ba?ba.participants.length:0,da;if(ba)da=this._nameNormalizer(ba.participants);if(!da)da=function(ja){return aa[ja].short_name;};var ea,fa=false;if(ca>2&&x.length>=ca-1){ea=r._("Everyone is typing...");}else if(x.length==1){ea=r._("{name} is typing...",[r.param("name",aa[x[0]].short_name)]);}else if(x.length==2){ea=r._("{user1} and {user2} are typing...",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name)]);}else if(x.length==3){ea=r._("{user1}, {user2}, and {user3} are typing...",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("user3",aa[x[2]].short_name)]);}else if(x.length>3){var ga=Object.keys(aa).length-2,ha=r._({"*":"{num} more"},[r.param("num",ga,[0])]),ia=h.create('a',{href:'#'},ha);ea=r._("{user1}, {user2}, and {=num more link} are typing...",[r.param("user1",aa[x[0]].short_name),r.param("user2",aa[x[1]].short_name),r.param("=num more link",ia)]);fa=true;}this._informStateChanged({activity:'typing',text:ea,typing:x,tooltip:fa});}.bind(this));z&&this._informStateChanged({activity:'none'});},_handleStateChange:function(){var x=i.LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==x){this._informStateChanged({activity:'none'});return;}if(this._typing&&this._typing.length){this._notifyTyping(this._typing);return;}if(this._canonicalUser&&this._lastMsg.author!=n.getID()){this._notifySentFrom();return;}var y=j.getSeenBy(this._threadID,true);if(y.length)if(this._canonicalUser){this._notifySeenTimestamp(y);return;}else{this._notifySeenBy(y);return;}this._informStateChanged({activity:'none'});}});u.addRetroactiveListener('state-changed',function(x){v.forEach(function(y){var z=x[y._threadID];if(z!==(void 0)){y._typing=z;y._handleStateChange();}});});j.subscribe('state-changed',function(x,y){v.forEach(function(z){y[z._threadID]&&z._handleStateChange();});});e.exports=w;},null);
__d("MercuryLastMessageIndicator.react",["DOM","MercuryIndicatorController","MercuryParticipants","React","Tooltip","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=j,p=o.PropTypes,q=j.createClass({displayName:"MercuryLastMessageIndicator",propTypes:{hideTyping:p.bool,indicatorWillShow:p.func,indicatorDidShow:p.func,lastMessage:p.object,threadID:p.string.isRequired},getDefaultProps:function(){return {indicatorWillShow:m,indicatorDidShow:m};},getInitialState:function(){return {data:{}};},componentDidMount:function(){this._setup(this.props);},componentWillReceiveProps:function(r){if(r.threadID!=this.props.threadID){this._destroy();this._setup(r);}else if(r.lastMessage!=this.props.lastMessage)this._controller.setLastMessage(r.lastMessage);},componentWillUpdate:function(r,s){if(this.isVisible(r,s))this.props.indicatorWillShow();},componentDidUpdate:function(){if(!this.isVisible())return;this.setText();this.setTooltip();this.props.indicatorDidShow();},componentWillUnmount:function(){this._destroy();},render:function(){return (j.createElement("div",{className:this.getRootClass()},j.createElement("div",{className:"_510h"}),j.createElement("span",{className:"_510f",ref:"text"},"Â ")));},getRootClass:function(){var r=(("_510g")+(this.state.data.self_authored?' '+"_510e":'')),s=this.state.data.activity,t=null;if(String(s).startsWith('seen')){t='seen';}else if(s=='typing'){t=this.props.hideTyping?null:s;}else t=s;return n(r,t,this.props.className);},isVisible:function(r,s){r=r||this.props;s=s||this.state;return (s.data&&s.data.activity!='none'&&!(r.hideTyping&&s.data.activity=='typing'));},setText:function(){if(this.state.data.text)g.setContent(j.findDOMNode(this.refs.text),this.state.data.text);},setTooltip:function(){if(this.state.data.activity=='seen-by'&&this.state.data.tooltip)i.getMulti(this.state.data.seenBy,function(r){var s=g.create('div',null,this.state.data.seenBy.map(function(t){return g.create('div',null,r[t].name);}));k.set(g.find(j.findDOMNode(this),'span.more'),s,'above','center');}.bind(this));},_setup:function(r){this._controller=new h(r.threadID);this._subscription=this._controller.subscribe('state-changed',function(s,t){return this.setState({data:t});}.bind(this));r.lastMessage&&this._controller.setLastMessage(r.lastMessage);},_destroy:function(){this._subscription.unsubscribe();this._controller.destroy();}});e.exports=q;},null);
__d("MercuryShareAttachment.react",["BootloadedComponent.react","MercuryShareAttachmentReactShape","MercuryShareAttachmentRenderLocations","MercuryShareStyleMap","React","cx","emptyFunction","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o=k,p=o.PropTypes,q=k.createClass({displayName:"MercuryShareAttachment",propTypes:{attachment:h,location:p.oneOf(i.getValues()),onComponentLoaded:p.func.isRequired},getDefaultProps:function(){return {onComponentLoaded:m};},componentDidMount:function(){this._handleComponentLoad();},_renderComponent:function(r,s){if(this.props.location===i.MESSENGER)s=n("_52mr _2poz _ui9",s);return !!s?k.createElement("div",{className:s},r):r;},render:function(){var r=j.getStyleFactory(this.props.attachment);if(!r)return null;var s=r,t=s.attachment,u=s.factory;return (this._renderComponent(k.createElement(g,k.__spread({},this.props,{attachment:t,bootloadComponent:function(v){u.componentLoader.load().then(function(w){return v(w[0]);});},bootloadPlaceholder:k.createElement("div",null),module:u.componentName,onComponentLoad:this._handleComponentLoad})),u.cx&&u.cx.get(this.props.location)));},_handleComponentLoad:function(){this.props.onComponentLoaded(k.findDOMNode(this));}});e.exports=q;},null);
__d("XStickerPackImagesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/{pack_id}\/images\/",{pack_id:{type:"Int",required:true},sticker_size:{type:"Int",defaultValue:50}});},null);
__d("XStickersAddPackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/addpack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"},is_promoted:{type:"Bool",defaultValue:false}});},null);
__d("XStickersRemovePackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/removepack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"}});},null);
__d("XStickerStateInitialDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/",{});},null);
__d("XStickerStatePackDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/pack\/",{pack_id:{type:"Int",required:true}});},null);
__d("XStickerStateStoreDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/state\/store\/",{});},null);
__d("XStickerSearchPromotePackController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/search\/promotePack\/",{sticker_id:{type:"Int",required:true}});},null);
__d("XStickerSearchNUXSeenController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/searchNUX\/seen\/",{});},null);
__d("XStickerTagDataController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/tag\/data\/",{});},null);
__d("XStickerQueryImagesController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/stickers\/query\/images\/",{query:{type:"String",required:true}});},null);
__d("StickerServerRequests",["AsyncRequest","Promise","XStickerPackImagesController","XStickersAddPackController","XStickersRemovePackController","XStickerStateInitialDataController","XStickerStatePackDataController","XStickerStateStoreDataController","XStickerSearchPromotePackController","XStickerSearchNUXSeenController","XStickerTagDataController","XStickerQueryImagesController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s={addPack:function(u,v,w){var x=j.getURIBuilder().setInt('pack_id',u).setBool('is_promoted',v).getURI();new g(x).setHandler(function(y){return w(y.payload);}).send();},removePack:function(u,v){var w=k.getURIBuilder().setInt('pack_id',u).getURI();new g(w).setHandler(function(x){return v(x.payload);}).send();},getStickersForPack:function(u,v){var w=i.getURIBuilder().setInt('pack_id',u).setInt('sticker_size',v).getURI();return new h(function(x,y){return new g().setURI(w).setMethod("POST").setHandler(function(z){return x(z.payload);}).send();});},getStickersForQuery:function(u,v){new g().setURI(r.getURIBuilder().setString('query',u).getURI()).setMethod("POST").setHandler(function(w){return v(w);}).send();},fetchTrayData:function(u){return t(l.getURIBuilder().getURI(),u,true);},fetchStoreData:function(u){return t(n.getURIBuilder().getURI(),u);},fetchPackData:function(u,v){return t(m.getURIBuilder().setInt('pack_id',u).getURI(),v);},fetchTagData:function(u){return t(q.getURIBuilder().getURI(),u,true);},markSeenSearchNUX:function(){new g(p.getURIBuilder().getURI().toString()).send();},promotePackSentFromSearch:function(u,v){var w=o.getURIBuilder().setInt('sticker_id',u).getURI();t(w,v,true);}};function t(u,v,w){return new h(function(x,y){return new g(u).setHandler(function(z){return x(z.getPayload());}).setAllowCrossPageTransition(w).send();}).then(v);}e.exports=s;},null);
__d("StickerImages",["StickerServerRequests"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h={},i={},j={},k={getStickerTagsData:function(){return j;},requestStickersForPack:function(l,m,n){if(!l)return;if(!i[l]){i[l]=g.getStickersForPack(l,m);i[l].then(function(o){o.forEach(function(p){return this.cacheSticker(p);}.bind(this));}.bind(this));}i[l].then(function(o){return n(o);});},cacheSticker:function(l){h[l.id]=l;},getSticker:function(l){return h[l];}};e.exports=k;},null);
__d("StickerUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={getScaledDimensions:function(h,i,j){var k,l,m;if(i>h){m=j/i;k=h*m;l=i*m;}else{m=j/h;k=h*m;l=i*m;}return {height:Math.round(k),width:Math.round(l)};},capitalizeWords:function(h){var i=h.split(" ");for(var j=0;j<i.length;j++){var k=i[j].charAt(0).toUpperCase();i[j]=k+i[j].substr(1);}return i.join(" ");}};e.exports=g;},null);
__d("MercuryAttachmentRenderer",["MercuryAttachmentAudioClip.react","MercuryAttachment","MercuryAttachmentFile.react","MercuryAttachmentPhoto.react","MercuryAttachmentPhotoGrid.react","MercuryAttachmentType","MercuryAttachmentVideo.react","MercuryAudioType","MercuryMessageInfo","MercuryShareAttachment.react","MercuryShareAttachmentRenderLocations","MessengerHotLikeUtils","React","Sticker.react","StickerAssetType","StickerConstants","StickerImages","StickerUtils","cx","XStickerAssetController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();'use strict';var aa={isBubblePreferred:function(ba){return !this.isStickerAttachment(ba);},renderFile:function(ba,ca){return (s.createElement(i,{name:ba.name,open_url:ca?null:ba.open_url,rel:ba.rel,type:ba.icon_type,url:ba.url}));},renderAudioClip:function(ba,ca){var da=ba.metadata.duration/1000,ea=100,fa=ca?160:400,ga=100;if(da>=5)ga=(1-Math.pow(10,(da-5)/-30))*(fa-ea)+ea;return (s.createElement(g,{src:ba.url,duration:ba.metadata.duration/1000,showHelp:false,width:ga}));},renderVideo:function(ba,ca,da){var ea=ca?ba.metadata.chat_size:ba.metadata.inbox_size,fa=ca?ba.metadata.chat_preview:ba.metadata.inbox_preview;return (s.createElement(m,{duration:ba.metadata.duration,isInbound:o.isInbound(da),isChat:ca,name:ba.name,pageID:ba.metadata.pageid,thumbSize:ea,thumbnail:fa,videoSize:ba.metadata.dimensions,videoID:ba.metadata.fbid,videoURI:ba.url}));},constructStickerComponent:function(ba,ca,da,ea){var fa=ea?'chatScrolled/':'messengerScrolled/';fa+=ba.thread_id;if(!ca){ca=r.getMetadataForHotLike(ba.sticker_id);if(!ca){var ga=w.getSticker(ba.sticker_id),ha=Object.assign({},ga),ia=x.getScaledDimensions(ga.height,ga.width,v.THREAD_SIZE),ja=ia.height,ka=ia.width;ha.height=ja;ha.width=ka;ha.stickerID=ba.sticker_id;ha.spriteURI='';ha.spriteURI2x='';ha.paddedSpriteURI='';ha.paddedSpriteURI2x='';ca=ha;}}var la=null;if(ca.stickerID){la=ca.stickerID.toString();}else if(ba.sticker_id)la=ba.sticker_id.toString();var ma=null;if(ca.packID)ma=ca.packID.toString();var na=z.getURIBuilder().setInt('sticker_id',la),oa=null,pa=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){pa=ca.paddedSpriteURI2x;oa=ca.spriteURI2x;}else{pa=ca.paddedSpriteURI;oa=ca.spriteURI;}return (s.createElement(t,{animationTrigger:"hover",className:"mvs",frameCount:ca.frameCount||1,frameRate:ca.frameRate||83,framesPerCol:ca.framesPerCol||1,framesPerRow:ca.framesPerRow||1,onStickerClick:da,packID:ma,paddedSpriteURI:pa,sourceHeight:ca.height,sourceURI:na.setEnum('image_type',u.IMAGE).getURI().toString(),sourceWidth:ca.width,spriteURI:oa,stickerID:la,subscribedThreadID:fa}));},renderPhotoAttachments:function(ba,ca,da){var ea=ba.length;if(!ea)return null;if(ea===1){var fa=ba[0],ga=h.resizeContain({width:da,height:da},{width:fa.preview_width,height:fa.preview_height});return (s.createElement("div",{className:"_55pk"},s.createElement(j,{image:fa,width:ga.width,height:ga.height,message:ca})));}return (s.createElement("div",{className:"_55pk"},s.createElement(k,{images:ba,size:da,message:ca})));},isPhotoAttachment:function(ba){return ba.attach_type==l.PHOTO||ba.attach_type==l.ANIMATED_IMAGE||(ba.attach_type==l.FILE&&ba.preview_url);},isVideoAttachment:function(ba){return ba.attach_type==l.VIDEO;},isShareAttachment:function(ba){return ba.attach_type==l.SHARE;},isFileAttachment:function(ba){return ba.attach_type==l.FILE;},isErrorAttachment:function(ba){return ba.attach_type==l.ERROR;},isStickerAttachment:function(ba){return ba.attach_type==l.STICKER;},isVoiceAttachment:function(ba){if(!ba.metadata)return false;return (ba.metadata.type===n.AudioClip||ba.metadata.type===n.VoiceMessageWithTranscript);},sortAttachmentsStablyByType:function(ba){var ca=[aa.isPhotoAttachment,aa.isShareAttachment,aa.isFileAttachment,aa.isErrorAttachment];ca.push(function(ea){return true;});var da=ca.map(function(ea){return [];});ba.forEach(function(ea){for(var fa=0;fa<ca.length;fa++)if(ca[fa](ea)){da[fa].push(ea);break;}});return Array.prototype.concat.apply([],da);},constructStoryBasedShareAttachment:function(ba,ca,da,ea,fa){var ga=da?q.CHAT:q.WEB_INBOX;return (s.createElement("div",{className:((!!ba.body&&da?"_r38":''))},s.createElement(p,{attachment:ca.share,location:ga,maxWidth:fa,onComponentLoaded:function(ha){if(ha&&ha.firstChild&&ea)ea(ha.firstChild,true);}})));}};e.exports=aa;},null);
__d("MercuryAttachments.react",["MercuryAttachmentRenderer","DOM","Event","ImmutableObject","MercuryAttachmentMalicious.react","MessengerHotLikePreview.react","React","SubscriptionsHandler","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p=m,q=p.PropTypes,r=m.createClass({displayName:"MercuryAttachments",propTypes:{attachments:q.array.isRequired,maxWidth:q.number.isRequired,message:q.instanceOf(j).isRequired,isChat:q.bool,onImageLoad:q.func,onStickerClick:q.func},getDefaultProps:function(){return {isChat:false,onImageLoad:o,onStickerClick:o};},_subscriptionsHandler:(null),componentDidMount:function(){this._subscriptionsHandler=new n();},componentDidUpdate:function(){var s=this._subscriptionsHandler;h.scry(m.findDOMNode(this),'img').forEach(function(t){if(s)s.addSubscriptions(i.listen(t,'load',function(){this.props.onImageLoad&&this.props.onImageLoad(t);}.bind(this)));}.bind(this));},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release();},_renderAttachment:function(s){if(g.isStickerAttachment(s)){return g.constructStickerComponent(this.props.message,this.props.attachments[0].metadata,this.props.onStickerClick,this.props.isChat);}else if(g.isVoiceAttachment(s)){return g.renderAudioClip(this.props.attachments[0],this.props.isChat);}else if(g.isVideoAttachment(s)){return g.renderVideo(this.props.attachments[0],this.props.isChat,this.props.message);}else if(g.isShareAttachment(s)){return g.constructStoryBasedShareAttachment(this.props.message,s,this.props.isChat,this.props.onImageLoad,this.props.maxWidth);}else if(g.isFileAttachment(s))return g.renderFile(s,this.props.isChat);return m.createElement(k,null);},render:function(){if(this.props.message.is_like_preview)return (m.createElement(l,{isChat:this.props.isChat,key:'hlp:'+this.props.message.like_preview_since,since:this.props.message.like_preview_since}));if(this.props.attachments.length===0)return m.createElement("div",m.__spread({},this.props));var s=g.renderPhotoAttachments(this.props.attachments.filter(g.isPhotoAttachment),this.props.message,this.props.maxWidth),t=g.sortAttachmentsStablyByType(this.props.attachments.filter(function(u){return !g.isPhotoAttachment(u);})).map(this._renderAttachment);return (m.createElement("div",m.__spread({},this.props),s,t));}});e.exports=r;},null);
__d("WebMessengerDeleteThreadDialog",["Dialog","fbt","MercuryThreadActions"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i=b('MercuryThreadActions').get(),j={show:function(k){var l=[];l.push({name:'delete_conversation',label:h._("Delete Conversation"),handler:function(){return i["delete"](k);}});l.push(g.CANCEL);new g().setTitle(h._("Delete This Entire Conversation?")).setBody(h._("Once you delete your copy of this conversation, it cannot be undone.")).setButtons(l).show();}};e.exports=j;},null);
__d("MNCommerceLogMessageUtils",["BanzaiLogger","Link.react","MercuryIDs","MNCommerceLoggingConstants","MNCommerceLoggerEvents","MNCommerceUnlinkDataManager","MNCommerceDialogStateActions","MNCommerceReplyTypes","MNCommerceUnlinkDialogContainer.react","React","cx","fbt","MercuryThreads"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=b('MercuryThreads').get();function t(){}t.prototype.isCommercePageAdminMessage=function(u){return !!(u&&u.log_message_data&&u.log_message_data.replyType===n.COMMERCE_LINK);};t.prototype.getCommercePageUnlink=function(u,v){var w=function(){var x=i.getUserIDFromParticipantID(u.author),y=s.getThreadMetaNow(u.thread_id),z=null;y.participants.every(function(ba){if(ba!==u.author){z=i.getUserIDFromParticipantID(ba);return false;}return true;});var aa=function(){m.hideDialog();l.unlink(x,z);};m.showDialog(o,{onTurnOffButtonClick:aa});g.log('MessengerCommerceLoggerConfig',{event:k.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:j.DIALOG_SURFACE.UNLINK})});};return (p.createElement("span",null,u.log_message_body,' ',p.createElement(h,{className:((!v?"_2w2m":'')+(v?' '+"_1jvn":'')),onClick:w},r._("Turn Off"))));};e.exports=new t();},null);
__d("P2PActions",["ChatOpenTab","MessengerActions","P2PActionConstants","P2PDispatcher"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k={updateCreditCards:function(l){j.dispatch({type:i.CREDIT_CARDS_UPDATED,data:l});},ignoreCreditCardChannelEvents:function(){j.dispatch({type:i.CHANNEL_EVENTS_IGNORED});},allowCreditCardChannelEvents:function(){j.dispatch({type:i.CHANNEL_EVENTS_ALLOWED});},addCreditCard:function(l){j.dispatch({type:i.CREDIT_CARD_ADDED,data:l});},addCreditCardError:function(l){j.dispatch({type:i.CREDIT_CARD_ADDED_ERROR,data:l});},updatePresetCreditCard:function(l){j.dispatch({type:i.PRESET_CREDIT_CARD_UPDATED,data:l});},updatePresetCreditCardError:function(l){j.dispatch({type:i.PRESET_CREDIT_CARD_UPDATED_ERROR,data:l});},updateCreditCard:function(l){j.dispatch({type:i.CREDIT_CARD_UPDATED,data:l});},updateCreditCardError:function(l){j.dispatch({type:i.CREDIT_CARD_UPDATED_ERROR,data:l});},deleteCreditCard:function(l){j.dispatch({type:i.CREDIT_CARD_DELETED,data:l});},deleteCreditCardError:function(l){j.dispatch({type:i.CREDIT_CARD_DELETED_ERROR,data:l});},verifyCreditCard:function(l){j.dispatch({type:i.CREDIT_CARD_VERIFIED,data:l});},verifyCreditCardError:function(l){j.dispatch({type:i.CREDIT_CARD_VERIFIED_ERROR,data:l});},updateTransfers:function(l){j.dispatch({type:i.TRANSFERS_UPDATED,data:l});},updateTransfersError:function(l){j.dispatch({type:i.TRANSFERS_UPDATED_ERROR,data:l});},updateNUXTransfers:function(l){j.dispatch({type:i.NUX_TRANSFERS_UPDATED,data:l});},transferAdded:function(l){j.dispatch({type:i.TRANSFER_ADDED,data:l});},transferAddedError:function(l){j.dispatch({type:i.TRANSFER_ADDED_ERROR,data:l});},transferUpdated:function(l){j.dispatch({type:i.TRANSFER_UPDATED,data:l});},transferUpdatedError:function(l){j.dispatch({type:i.TRANSFER_UPDATED_ERROR,data:l});},transferAccepted:function(){j.dispatch({type:i.TRANSFER_ACCEPTED});},transferDeclined:function(l){j.dispatch({type:i.TRANSFER_DECLINED,data:l});},chatSendViewOpened:function(l){if(g.canOpenTab()){g.openThread(l.threadID);}else h.selectThread(l.threadID);j.dispatch({type:i.CHAT_SEND_VIEW_OPENED,data:l});},chatSendViewClosed:function(l){j.dispatch({type:i.CHAT_SEND_VIEW_CLOSED,data:l});},binNumberValidated:function(l){j.dispatch({type:i.BIN_NUMBER_VALIDATED,data:l});},binNumberValidatedError:function(l){j.dispatch({type:i.BIN_NUMBER_VALIDATED_ERROR,data:l});},userEligibilityUpdated:function(l){j.dispatch({type:i.USER_ELIGIBILITY_UDPATED,data:l});},showDialog:function(l,m){j.dispatch({type:i.DIALOG_SHOWN,data:{dialogClass:l,dialogProps:m}});},hideDialog:function(){j.dispatch({type:i.DIALOG_CLOSED});},bannerStatesUpdated:function(l){j.dispatch({type:i.BANNER_STATES_UPDATED,data:l});},bannerDismissed:function(l){j.dispatch({type:i.BANNER_DISMISSED,data:l});},bannerCompleted:function(l){j.dispatch({type:i.BANNER_COMPLETED,data:l});},moneypennyTransferCreated:function(l){j.dispatch({type:i.MONEYPENNY_TRANSFER_CREATED,data:l});},moneypennyTransferCreatedError:function(l){j.dispatch({type:i.MONEYPENNY_TRANSFER_CREATED_ERROR,data:l});}};e.exports=k;},null);
__d("P2PAmountUtils",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=10000,h={isAmountOverLegalLimit:function(i){return parseFloat(this.sanitizeAmount(i))>=g;},sanitizeAmount:function(i){return i.replace(/[^0-9\.]+/g,'');}};e.exports=h;},null);
__d("P2PButton.react",["CurrentEnvironment","MessengerDialogButton.react","React","XUIButton.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"P2PButton",render:function(){var l=g.messengerdotcom,m=l?h:j,n=this.props.type;if(!n)n=this.props.use==='confirm'?'primary':'secondary';var o=l?'default':this.props.use,p=Object.assign({},this.props,{type:n,use:o});return (i.createElement(m,i.__spread({},p),this.props.children));}});e.exports=k;},null);
__d("P2PBigAmount.react",["CurrentEnvironment","Image.react","React","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();'use strict';var l=i,m=l.PropTypes,n=i.createClass({displayName:"P2PBigAmount",propTypes:{amount:m.string.isRequired,isPending:m.bool},getImage:function(){if(this.isMessengerDotCom()){if(this.props.isPending){return k('/images/p2p/message-icon-dark-gray.png');}else return k('/images/p2p/message-icon-blue.png');}else if(this.props.isPending){return k('/images/p2p/message-icon-gray.png');}else return k('/images/p2p/message-icon-black.png');},isMessengerDotCom:function(){return g.messengerdotcom;},render:function(){return (i.createElement("div",{className:(("_8j6")+(this.isMessengerDotCom()?' '+"_8j7":''))},i.createElement("div",{className:"_8j8"},i.createElement(h,{height:16,src:this.getImage(),width:16})),i.createElement("div",{className:(("_8jc")+(this.props.isPending?' '+"_8jd":'')+(this.props.amount.length>=8?' '+"_8je":'')+(' '+"_3oh-"))},this.props.amount)));}});e.exports=n;},null);
__d("P2PDialog.react",["CurrentEnvironment","LayerFadeOnHide","MessengerDialog.react","React","XUIDialog.react","emptyFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=j,n=m.PropTypes,o=j.createClass({displayName:"P2PDialog",propTypes:{onToggle:n.func,shown:n.bool,width:n.number},getDefaultProps:function(){return {onToggle:l,repositionOnUpdate:false,shown:true,width:400};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout(function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}.bind(this));},render:function(){var p=g.messengerdotcom,q=p?i:k;return (j.createElement(q,j.__spread({behaviors:{LayerFadeOnHide:h}},this.props,{ref:"dialog"}),this.props.children));}});e.exports=o;},null);
__d("P2PDialogBody.react",["CurrentEnvironment","MessengerDialogBody.react","React","XUIDialogBody.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i.createClass({displayName:"P2PDialogBody",render:function(){var l=g.messengerdotcom,m=l?h:j;return (i.createElement(m,i.__spread({},this.props),this.props.children));}});e.exports=k;},null);
__d("P2PDialogFooter.react",["CurrentEnvironment","MessengerDialogFooter.react","React","XUIDialogFooter.react","cloneWithProps","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();'use strict';var m=i.createClass({displayName:"P2PDialogFooter",render:function(){var n=g.messengerdotcom,o=n?h:j,p,q=this.props.children;if(n){p=i.Children.count(this.props.children);q=i.Children.map(this.props.children,function(r,s){if(!r)return null;return k(r,{className:"_4ec0",type:s===0&&p===2?'secondary':'primary'});});}return (i.createElement(o,i.__spread({},this.props),q));}});e.exports=m;},null);
__d("P2PLogger",["BanzaiLogger"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h='P2PPaymentLoggerConfig',i={log:function(j,k){k=Object.assign({event:j},k);g.log(h,k);}};e.exports=i;},null);
__d("P2PText.react",["CurrentEnvironment","MessengerText.react","React","XUIGrayText.react"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();'use strict';var k=i,l=k.PropTypes,m=i.createClass({displayName:"P2PText",propTypes:{type:l.oneOf(['primary','secondary']).isRequired},render:function(){var n=g.messengerdotcom,o=n?h:j,p=this.props,q=p.type,r=this.props;if(!n)r=Object.assign({},this.props,{display:this.props.display||'block',shade:q==='primary'?'dark':'light',size:this.props.size||'small'});return (i.createElement(o,i.__spread({},r),this.props.children));}});e.exports=m;},null);
__d("P2PNonEnabledGroupReceiptDialog.react",["CurrentEnvironment","LeftRight.react","P2PAmountUtils","P2PButton.react","P2PBigAmount.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","XUICloseButton.react","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PText.react","React","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){b.__markCompiled&&b.__markCompiled();'use strict';var w=t,x=w.PropTypes,y=t.createClass({displayName:"P2PNonEnabledGroupSendReceiptDialog",propTypes:{amount:x.string.isRequired,onClose:x.func.isRequired,receiverName:x.string.isRequired,senderName:x.string.isRequired},componentDidMount:function(){this.log(q.UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CLICKED,{raw_amount:this.props.amount});},log:function(z,aa){p.log(z,Object.assign({www_event_flow:r.UI_FLOW_P2P_GROUP_SEND},aa));},_handleToggle:function(z){if(!z){this.props.onClose();this.log(q.UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CANCELLED);}},_handleOKClick:function(){this._handleToggle(false);},_handleCloseClick:function(){this._handleToggle(false);},render:function(){var z=g.messengerdotcom,aa=z?270:250,ba=t.createElement(h,null,t.createElement("div",null),t.createElement(o,{onClick:this._handleCloseClick}));return (t.createElement(l,{className:(("_45c8")+(z?' '+"_45c9":'')),layerHideOnBlur:false,onToggle:this._handleToggle,shown:true,width:aa},t.createElement(m,null,!z?ba:null,t.createElement("div",{className:"_45ca"},t.createElement(k,{amount:i.sanitizeAmount(this.props.amount)})),t.createElement(s,{className:"_45cc",size:"small",type:"secondary"},v._("{sender name} sent {amount} to {receiver name}",[v.param("sender name",this.props.senderName),v.param("amount",this.props.amount),v.param("receiver name",this.props.receiverName)]),".")),t.createElement(n,null,t.createElement(j,{use:"confirm",size:"medium",label:v._("OK"),type:"primary",onClick:this._handleOKClick}))));}});e.exports=y;},null);
__d("XP2PTransactionDetailController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/p2p\/transaction\/",{id:{type:"String",required:true}});},null);
__d("P2PMercuryLogMessage.react",["CurrentEnvironment","CurrentUser","Link.react","MercuryIDs","P2PActions","P2PGKValues","P2PNonEnabledGroupReceiptDialog.react","P2PPaymentLogMessageSubtype","React","ReactLayeredComponentMixin","XP2PTransactionDetailController","cx","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();'use strict';var t=o,u=t.PropTypes,v=o.createClass({displayName:"P2PMercuryLogMessage",mixins:[p],propTypes:{amount:u.string,receiver:u.object.isRequired,sender:u.object.isRequired,subtype:u.oneOf(Object.keys(n).map(function(w){return n[w];})),transferID:u.string.isRequired,threadFBID:u.string,threadID:u.string},getDefaultProps:function(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function(){return {nonEnabledGroupReceiptDialogShown:false};},handleGroupDetailsLinkClicked:function(){k.chatSendViewOpened({threadID:this.props.threadID,groupThreadFBID:this.props.threadFBID,groupSendReceiptDetails:{amount:this.props.amount,receiverName:this.props.receiver.short_name,senderName:this.props.sender.short_name}});},handleNonEnabledGroupDetailsLinkClicked:function(){this.setState({nonEnabledGroupReceiptDialogShown:true});},_handleNonEnabledGroupDetailsDialogClosed:function(){this.setState({nonEnabledGroupReceiptDialogShown:false});},isViewerSender:function(){return (j.getUserIDFromParticipantID(this.props.sender.id)===h.getID());},isViewerReceiver:function(){return (j.getUserIDFromParticipantID(this.props.receiver.id)===h.getID());},renderTransferDetailsLink:function(){var w=(q.getURIBuilder()).setString('id',this.props.transferID).getURI();return (o.createElement(i,{className:"_kiq",href:w,target:"_blank"},s._("See details")));},renderGroupDetailsLink:function(){return (o.createElement(i,{className:"_kiq",href:"#",onClick:this.handleGroupDetailsLinkClicked},s._("See details")));},renderNonEnabledGroupDetailsLink:function(){return (o.createElement(i,{className:"_kiq",href:"#",onClick:this.handleNonEnabledGroupDetailsLinkClicked},s._("See details")));},renderLayers:function(){var w={};if(this.state.nonEnabledGroupReceiptDialogShown)w.nonEnabledGroupReceiptDialog=o.createElement(m,{amount:this.props.amount,onClose:this._handleNonEnabledGroupDetailsDialogClosed,receiverName:this.props.receiver.short_name,senderName:this.props.sender.short_name});return w;},render:function(){var w=null,x=this.props.amount,y=this.props.subtype,z=this.isViewerSender(),aa=this.isViewerReceiver(),ba,ca=g.messengerdotcom?l.P2PGroupSendMessengerDotCom:l.P2PGroupSendWWW;if(!z&&!aa){if(ca){ba=this.renderGroupDetailsLink();}else ba=this.renderNonEnabledGroupDetailsLink();}else ba=this.renderTransferDetailsLink();switch(y){case n.SENT_IN_GROUP:w=(s._("{sendername} sent {amount} to {receivername}. {details}.",[s.param("sendername",this.props.sender.short_name),s.param("amount",x),s.param("receivername",this.props.receiver.short_name),s.param("details",ba)]));break;case n.CANCELED_EXPIRED:case n.CANCELED_SAME_CARD:case n.CANCELED_SENDER_RISK:case n.CANCELED_RECIPIENT_RISK:case n.CANCELED_CUSTOMER_SERVICE:if(z){w=(s._("Your {amount} payment was canceled. {details}.",[s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));}else w=(s._("{firstname}'s {amount} payment was canceled. {details}.",[s.param("firstname",this.props.sender.short_name),s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));break;case n.CANCELED_DECLINED:if(z){w=(s._("{firstname} didn't accept your {amount} payment. {details}.",[s.param("firstname",this.props.receiver.short_name),s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));}else w=(s._("You didn't accept {firstname}'s {amount} payment. {details}.",[s.param("firstname",this.props.sender.short_name),s.param("amount",x),s.param("details",this.renderTransferDetailsLink())]));break;}return o.createElement("div",null,w);}});e.exports=v;},null);
__d("MercuryLogMessageRenderer",["MercuryCallLogMessage.react","CSS","HovercardLink","MercuryIDs","MercuryViewer","MessagesViewer","MercuryLogMessageType","MNCommerceLogMessageUtils","P2PMercuryLogMessage.react","MercuryParticipants","React","Image.react","TextWithEntities.react","TooltipLink.react","cx","fbt","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x={renderText:function(qa,ra){switch(qa.log_message_type){case m.SUBSCRIBE:aa(qa,ra);break;case m.UNSUBSCRIBE:fa(qa,ra);break;case m.VIDEO_CALL:case m.PHONE_CALL:ha(qa,ra);break;case m.THREAD_NAME:ia(qa,ra);break;case m.THREAD_IMAGE:ja(qa,ra);break;case m.WALLPAPER:ka(qa,ra);break;case m.SERVER_ERROR:la(qa,ra);break;case m.ORION:ma(qa,ra);break;case m.PAGE_REPLY:ga(qa,ra);break;case m.GENERIC_ADMIN_TEXT:na(qa,ra);break;}},renderIcon:function(qa){return (q.createElement(r,{className:y(qa),src:w('images/spacer.gif')}));},renderLegacy:function(qa,ra,sa,ta){y(ta).split(' ').forEach(function(ua){return ua&&h.addClass(qa,ua);});this.renderText(ta,function(ua){q.render(q.createElement("span",null,ua),ra);});this.renderAttachmentLegacy(sa,ta);},renderAttachmentLegacy:function(qa,ra){if(ra.log_message_type==m.THREAD_IMAGE){var sa=ra.log_message_data.image;if(sa&&sa.preview_url){q.render(q.createElement(r,{className:"_z6a",onClick:function(){return z(sa);},src:sa.preview_url}),qa);h.show(qa);}}}};e.exports=x;function y(qa){var ra=qa.log_message_type,sa=qa.log_message_data;return (("_5wzu")+(ra==m.SUBSCRIBE?' '+"_5wzj":'')+(ra==m.UNSUBSCRIBE?' '+"_5wzk":'')+(ra==m.THREAD_NAME?' '+"_5wzl":'')+(ra==m.THREAD_IMAGE?' '+"_5wzm":'')+(ra==m.VIDEO_CALL&&sa.answered?' '+"_5wzn":'')+(ra==m.VIDEO_CALL&&!sa.answered?' '+"_5wzo":'')+(ra==m.PHONE_CALL&&sa.answered?' '+"_5wzp":'')+(ra==m.PHONE_CALL&&!sa.answered?' '+"_5wzq":'')+(ra==m.SERVER_ERROR?' '+"_5wzr":''));}function z(qa){l.bootstrapWithConfig({src:qa.preview_url,endpoint:qa.url,fbid:qa.metadata.fbid,dimensions:qa.metadata.dimensions,disablePaging:true},null);}function aa(qa,ra){var sa=pa(qa.log_message_data.added_participants);switch(sa.length){case 1:ba(qa,ra,sa);break;case 2:ca(qa,ra,sa);break;case 3:da(qa,ra,sa);break;default:ea(qa,ra,sa);break;}}function ba(qa,ra,sa){var ta=[qa.author,sa[0]];p.getMulti(ta,function(ua){if(qa.author==k.getID()){ra(v._("You added {subscriber1}.",[v.param("subscriber1",oa(ua[sa[0]]))]));}else if(sa[0]==k.getID()){ra(v._("{actor} added you.",[v.param("actor",oa(ua[qa.author]))]));}else ra(v._("{actor} added {subscriber1}.",[v.param("actor",oa(ua[qa.author])),v.param("subscriber1",oa(ua[sa[0]]))]));});}function ca(qa,ra,sa){var ta=[qa.author].concat(sa);p.getMulti(ta,function(ua){if(qa.author==k.getID()){ra(v._("You added {subscriber1} and {subscriber2}.",[v.param("subscriber1",oa(ua[sa[0]])),v.param("subscriber2",oa(ua[sa[1]]))]));}else if(sa[0]==k.getID()){ra(v._("{actor} added you and {subscriber2}.",[v.param("actor",oa(ua[qa.author])),v.param("subscriber2",oa(ua[sa[1]]))]));}else ra(v._("{actor} added {subscriber1} and {subscriber2}.",[v.param("actor",oa(ua[qa.author])),v.param("subscriber1",oa(ua[sa[0]])),v.param("subscriber2",oa(ua[sa[1]]))]));});}function da(qa,ra,sa){var ta=[qa.author].concat(sa);p.getMulti(ta,function(ua){if(qa.author==k.getID()){ra(v._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[v.param("subscriber1",oa(ua[sa[0]])),v.param("subscriber2",oa(ua[sa[1]])),v.param("subscriber3",oa(ua[sa[2]]))]));}else if(sa[0]==k.getID()){ra(v._("{actor} added you, {subscriber2} and {subscriber3}.",[v.param("actor",oa(ua[qa.author])),v.param("subscriber2",oa(ua[sa[1]])),v.param("subscriber3",oa(ua[sa[2]]))]));}else ra(v._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[v.param("actor",oa(ua[qa.author])),v.param("subscriber1",oa(ua[sa[0]])),v.param("subscriber2",oa(ua[sa[1]])),v.param("subscriber3",oa(ua[sa[2]]))]));});}function ea(qa,ra,sa){var ta=[qa.author].concat(sa);p.getMulti(ta,function(ua){function va(xa){var ya=q.createElement("div",null,xa.map(function(za){return q.createElement("div",null,za.name);}));return (q.createElement(t,{alignH:"center",position:"above",tooltip:ya},v._({"*":"{num} more"},[v.param("num",xa.length,[0])])));}var wa=sa.map(function(xa){return ua[xa];});if(qa.author==k.getID()){ra(v._("You added {subscriber1}, {subscriber2} and {more_people}.",[v.param("subscriber1",oa(wa[0])),v.param("subscriber2",oa(wa[1])),v.param("more_people",va(wa.slice(2)))]));}else if(sa[0]==k.getID()){ra(v._("{actor} added you, {subscriber2} and {more_people}.",[v.param("actor",oa(ua[qa.author])),v.param("subscriber2",oa(wa[1])),v.param("more_people",va(wa.slice(2)))]));}else ra(v._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[v.param("actor",oa(ua[qa.author])),v.param("subscriber1",oa(wa[0])),v.param("subscriber2",oa(wa[1])),v.param("more_people",va(wa.slice(2)))]));});}function fa(qa,ra){var sa=[qa.author],ta=qa.log_message_data.removed_participants,ua;if(ta.length===1){ua=ta[0];sa.push(ua);}p.getMulti(sa,function(va){var wa=va[qa.author],xa=va[ua];if(qa.author==k.getID()){if(!ua||ua==qa.author){ra(v._("You left the conversation."));}else ra(v._("You removed {name} from the conversation.",[v.param("name",oa(xa))]));}else if(!ua||ua==qa.author){ra(v._("{actor} left the conversation.",[v.param("actor",oa(wa))]));}else if(ua==k.getID()){ra(v._("{actor} removed you from the conversation.",[v.param("actor",oa(wa))]));}else ra(v._("{actor} removed {name} from the conversation.",[v.param("actor",oa(wa)),v.param("name",oa(xa))]));});}function ga(qa,ra){if(n.isCommercePageAdminMessage(qa)){ra(n.getCommercePageUnlink(qa,false));}else ra(qa.log_message_body);}function ha(qa,ra){var sa=qa.log_message_data.caller,ta=qa.log_message_data.callee,ua=qa.log_message_data.answered,va=sa===k.getID(),wa=va?ta:sa;p.get(wa,function(xa){var ya=j.getUserIDFromParticipantID(xa.id),za=xa.short_name?xa.short_name:xa.name;ra(q.createElement(g,{peerFBID:ya,peerName:za,isAnswered:ua,isOutgoingCall:va}));});}function ia(qa,ra){var sa=qa.log_message_data.name;if(qa.author==k.getID()){if(sa){ra(v._("You named the conversation: {name}.",[v.param("name",q.createElement("span",{className:"_5wzs"},q.createElement(s,{renderEmoticons:true,renderEmoji:true,text:sa})))]));}else ra(v._("You removed the conversation name."));}else p.get(qa.author,function(ta){var ua=oa(ta);if(sa){ra(v._("{actor} named the conversation: {name}.",[v.param("actor",ua),v.param("name",q.createElement("span",{className:"_5wzs"},sa))]));}else ra(v._("{actor} removed the conversation name.",[v.param("actor",ua)]));});}function ja(qa,ra){if(qa.author==k.getID()){if(qa.log_message_data.image){ra(v._("You changed the conversation picture."));}else ra(v._("You removed the conversation picture."));}else p.get(qa.author,function(sa){var ta=oa(sa);if(qa.log_message_data.image){ra(v._("{actor} changed the conversation picture.",[v.param("actor",ta)]));}else ra(v._("{actor} removed the conversation picture.",[v.param("actor",ta)]));});}function ka(qa,ra){if(qa.author==k.getID()){ra(v._("You changed the wallpaper."));}else p.get(qa.author,function(sa){var ta=oa(sa);ra(v._("{actor} changed the wallpaper.",[v.param("actor",ta)]));});}function la(qa,ra){ra(v._("Couldn't find previous messages."));}function ma(qa,ra){var sa=qa.log_message_data,ta=sa.senderId,ua=sa.receiverId;p.getMulti([ta,ua],function(va){ra(q.createElement(o,{amount:sa.formattedAmount,receiver:va[ua],sender:va[ta],subtype:sa.subtype,threadFBID:qa.thread_fbid,threadID:qa.thread_id,transferID:sa.transfer_id}));});}function na(qa,ra){ra(qa.log_message_body);}function oa(qa,ra){var sa=qa.fbid,ta=i.constructEndpoint({id:sa});if(qa.href)return (q.createElement("a",{className:"_5wzt",href:qa.href,"data-hovercard":ta},ra?qa.short_name:qa.name));return qa.name;}function pa(qa){var ra=qa.indexOf(k.getID());if(ra>0){var sa=qa.filter(function(ta){return ta!==k.getID();});return [k.getID()].concat(sa);}return qa;}},null);
__d("URLScraper",["ArbiterMixin","DataStore","Event","URLMatcher","copyProperties","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m='scraperLastPermissiveMatch',n=l(g);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r,s){"use strict";this.input=r;this.enable();this.getValueFn=s;}q.prototype.reset=function(){"use strict";h.set(this.input,m,null);};q.prototype.enable=function(){"use strict";if(this.events)return;var r=function(s){setTimeout(this.check.bind(this,s),30);};this.events=i.listen(this.input,{paste:r.bind(this,false),keydown:r.bind(this,true)});};q.prototype.disable=function(){"use strict";if(!this.events)return;for(var event in this.events)this.events[event].remove();this.events=null;};q.prototype.check=function(r){"use strict";var s=this.getValueFn?this.getValueFn():this.input.value;if(r&&q.trigger(s))return;var t=q.match(s),u=j.permissiveMatch(s);if(u&&(u!=h.get(this.input,m))){h.set(this.input,m,u);this.inform('match',{url:t||u,alt_url:u});}};k(q,j);e.exports=q;},null);
__d("StickersDispatcher",["Dispatcher","StickerConstants"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();'use strict';var i=Object.assign(new g(),{_handleUpdate:function(j,k){var l=Object.assign({payloadSource:j},k);this.dispatch(l);},handleUpdateFromViewActions:function(j){this._handleUpdate(h.PayloadSource.VIEW_ACTION,j);}});e.exports=i;},null);
__d("StickerActions",["BanzaiLogger","StickerConstants","StickersDispatcher"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j={addPack:function(k){i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.ADD_PACK,packID:k}]});},removePack:function(k){i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.REMOVE_PACK,packID:k}]});},selectPack:function(k,l){if(!l)g.log('StickersLoggerConfig',{event:'select_pack',packid:k});i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.SELECT_PACK,packID:k}]});},resetNumNewPacks:function(){i.handleUpdateFromViewActions({actions:[{actionType:h.ActionTypes.RESET_NUM_NEW_PACKS}]});}};e.exports=j;},null);
__d("StickerSearch",["StickerServerRequests"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h,i,j={},k={requestStickersForQuery:function(l,m){h=l;g.getStickersForQuery(l,function(n){return h===l&&m(n.payload);});},prepareTagsData:function(){if(!i)i=g.fetchTagData(function(l){j=l;});return i;},getTagByName:function(l){return j[l];},getTagsIndex:function(){return j;}};e.exports=k;},null);
__d("StickerState",["ImmutableObject","StickerConfig","PresenceState","StickerConstants","StickerImages","StickersDispatcher","StickerServerRequests","mixInEventEmitter"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();'use strict';var o={},p,q,r,s=null,t=0,u={},v=[],w=[],x=[],y=null,z=i.get();if(z)y=z.tray_pack_id;var aa=h.ShowStickerReplyNUX,ba=h.ShowStickerSearchNUX,ca={onTrayDataReady:function(fa){if(!q)q=m.fetchTrayData(function(ga){v=ga.packs.map(function(ha){return da(ha);});r=ga.mru;t=ga.num_new_packs;x=ga.tags;});q.then(fa);},onStoreDataReady:function(fa){if(!p)p=m.fetchStoreData(function(ga){w=ga.packs.map(function(ha){return da(ha);});});p.then(fa);},onPackDataReady:function(fa,ga){if(!o[fa])o[fa]=m.fetchPackData(fa,function(ha){da(ha);});o[fa].then(ga);},getPacksInTray:function(){var fa=[],ga;for(var ha=0;ha<v.length;ha++)if(v[ha].id==j.EMOTICON_PACK_ID){ga=v[ha];}else if(v[ha].isMessengerCapable)fa.push(v[ha]);ga&&fa.push(ga);return fa;},getPacksInCommentsTray:function(){var fa=[],ga=[],ha;for(var ia=0;ia<v.length;ia++)if(v[ia].id==j.EMOTICON_PACK_ID){ha=v[ia];}else if(v[ia].isCommentsCapable){fa.push(v[ia]);}else ga.push(v[ia]);var ja=fa.concat(ga);if(ha)ja.push(ha);return ja;},getPacksInComposerTray:function(){return v.filter(function(fa){return fa.isComposerCapable;});},getPackIDsInTray:function(){return v.map(function(fa){return fa.id;});},getPacksInStore:function(){return w.filter(function(fa){return fa.isMessengerCapable;});},getComposerPacksInStore:function(){return w.filter(function(fa){return fa.isComposerCapable;});},getPack:function(fa){return u[fa];},getNumNewPacks:function(){return t;},getFeaturedTags:function(){return x;},resetNumNewPacks:function(){if(t){t=0;this.emit(this.NUM_NEW_PACKS_CHANGED,0);}},addMRUPack:function(){if(r){this._addPackToTray(r);r=null;}},addPack:function(fa){var ga=false;if(u[fa])ga=u[fa].isPromoted;m.addPack(fa,ga,function(ha){this._addPackToTray(ha);}.bind(this));},removePack:function(fa){m.removePack(fa,function(ga){v=v.filter(function(ha){return ha.id!==ga;});u[ga]=g.set(u[ga],{isInTray:false});w=w.map(function(ha){return u[ha.id];});this.emit(this.PACKS_CHANGED,ga);}.bind(this));},setTrayPackID:function(fa){y=fa;i.doSync();this.emit(ca.PACK_SELECTED,fa);},getTrayPackID:function(){return y;},shouldShowStickerReplyNUX:function(){return aa;},clearShowStickerReplyNUX:function(){aa=false;},shouldShowStickerSearchNUX:function(){return ba;},clearShowStickerSearchNUX:function(){m.markSeenSearchNUX();ba=false;},_addPackToTray:function(fa,ga){da(fa);u[fa.id]=g.set(u[fa.id],{isPurchased:!ga,isInTray:true});var ha=v.filter(function(ja){return ja.id===fa.id;}).length>0;if(!ha){var ia;if(!ga){ia=v.filter(function(ja){return ja.isMRU||ja.isSearch;}).length;}else ia=v.filter(function(ja){return ja.id!==j.EMOTICON_PACK_ID;}).length;v.splice(ia,0,u[fa.id]);}w=w.map(function(ja){return u[ja.id];});this.emit(this.PACKS_CHANGED,fa.id);},_addRecentlyUsedSticker:function(fa){for(var ga=0;ga<s.length;++ga)if(s[ga].id===fa.id){s.splice(ga,1);break;}s.unshift(fa);},getMRUStickerPack:function(fa){if(!s)s=fa;return s;},updateRecentlyUsed:function(fa){if(!s){this.addMRUPack();return;}this._addRecentlyUsedSticker(k.getSticker(fa));},promotePackSentFromSearch:function(fa){m.promotePackSentFromSearch(fa,function(ga){return ga&&this._addPackToTray(ga,true);}.bind(this));}};l.register(function(fa){if(fa.actions&&fa.actions.length){var ga=j.ActionTypes;fa.actions.forEach(function(ha){switch(ha.actionType){case ga.ADD_PACK:ca.addPack(ha.packID);break;case ga.REMOVE_PACK:ca.removePack(ha.packID);break;case ga.SELECT_PACK:ca.setTrayPackID(ha.packID);break;case ga.RESET_NUM_NEW_PACKS:ca.resetNumNewPacks();break;}});}});ca.PACKS_CHANGED='StickerState/packsChanged';ca.PACK_SELECTED='StickerState/packSelected';ca.NUM_NEW_PACKS_CHANGED='StickerState/numNewPacksChanged';i.registerStateStorer(function(fa){fa.tray_pack_id=y;});function da(fa){var ga=fa.id;if(!u[ga]){return (u[ga]=new g(fa));}else return (u[ga]=g.set(u[ga],fa));}var ea={};ea[ca.PACK_SELECTED]=true;ea[ca.PACKS_CHANGED]=true;ea[ca.NUM_NEW_PACKS_CHANGED]=true;n(ca,ea);e.exports=ca;},null);
__d("AbstractDialogFitHeight",["CSS","DOM","Event","Style","SubscriptionsHandler","Vector","csx","cx","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=450,q=100,r=67,s=67;function t(u){"use strict";this.$AbstractDialogFitHeight0=u;}t.prototype.enable=function(){"use strict";this.$AbstractDialogFitHeight1=new k();this.$AbstractDialogFitHeight1.addSubscriptions(this.$AbstractDialogFitHeight0.subscribe('beforeshow',this.$AbstractDialogFitHeight2.bind(this)),i.listen(window,'resize',o(this.$AbstractDialogFitHeight2.bind(this))));this.$AbstractDialogFitHeight3=h.find(this.$AbstractDialogFitHeight0.getRoot(),"._4-i2");g.addClass(this.$AbstractDialogFitHeight3,"_5pfh");this.$AbstractDialogFitHeight4=q;if(h.scry(this.$AbstractDialogFitHeight0.getRoot(),"._4-i0").length)this.$AbstractDialogFitHeight4+=r;if(h.scry(this.$AbstractDialogFitHeight0.getRoot(),"._5a8u").length)this.$AbstractDialogFitHeight4+=s;};t.prototype.disable=function(){"use strict";this.$AbstractDialogFitHeight1.release();this.$AbstractDialogFitHeight1=null;g.removeClass(this.$AbstractDialogFitHeight3,"_5pfh");};t.prototype.$AbstractDialogFitHeight2=function(){"use strict";var u=l.getViewportDimensions().y,v=u-this.$AbstractDialogFitHeight4;j.set(this.$AbstractDialogFitHeight3,this.getHeightProperty(),Math.max(p,v)+'px');this.$AbstractDialogFitHeight0.updatePosition();};e.exports=t;},null);
__d("DialogFitHeight",["AbstractDialogFitHeight"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.getHeightProperty=function(){"use strict";return 'height';};e.exports=j;},null);
__d("StickerStoreController",["Bootloader","DialogFitHeight","DOM","LayerAutoFocus","LayerFadeOnHide","LayerHideOnEscape","React","XUIDialog.react","XUIDialogBody.react","XUISpinner.react","cx","requestAnimationFrame"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();'use strict';var s=m,t=s.PropTypes,u=688,v=null,w=m.createClass({displayName:"StoreLayer",propTypes:{isComposer:t.bool,packID:t.string,shown:t.bool},getDefaultProps:function(){return {isComposer:false,packID:null,shown:false};},getInitialState:function(){return {renderStore:function(){return (m.createElement("div",{className:"_5r5e"},m.createElement(p,{background:"light",size:"large"})));}};},componentDidMount:function(){g.loadModules(["StickerStore.react"],function(z){this.setState({renderStore:function(){return (m.createElement(z,{currentPackID:this.props.packID,isComposer:this.props.isComposer,onPackSelect:this._packSelected,shown:this.props.shown}));}.bind(this)});}.bind(this));},_packSelected:function(z){this.setProps({packID:z});},_onToggle:function(z){r(this.setProps.bind(this,{shown:z},null));},render:function(){return (m.createElement(n,{behaviors:{DialogFitHeight:h,LayerAutoFocus:j,LayerFadeOnHide:k,LayerHideOnEscape:l},onToggle:this._onToggle,shown:this.props.shown,width:u},m.createElement(o,{className:"_5rq- autofocus"},this.state.renderStore())));}});function x(z,aa){var ba=i.create('div');i.appendContent(document.body,ba);v=m.render(m.createElement(w,{isComposer:aa,packID:z,shown:true}),ba);}var y={showStore:function(z,aa){if(!v){x(z,!!aa);}else v.setProps({shown:true,packID:z,isComposer:!!aa});}};e.exports=y;},null);
__d("ClearableTypeahead",["Event"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={resetOnCloseButtonClick:function(i,j){g.listen(j,'click',function(){var k=i.getCore();k.getElement().focus();k.reset();});}};e.exports=h;},null);
__d("legacy:CompactTypeaheadRenderer",["CompactTypeaheadRenderer"],function(a,b,c,d){b.__markCompiled&&b.__markCompiled();if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.compact=b('CompactTypeaheadRenderer');},3);
__d("XNFXStartForMessageThreadController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/nfx\/start_message_thread\/",{thread_fbid:{type:"String",required:true},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}});},null);