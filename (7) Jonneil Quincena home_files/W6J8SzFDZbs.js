/*!CK:2910119710!*//*1434942598,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["cZCtH"]); }

__d("GroupBrowseCompactHover",["CSS","Event","cx"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j={handle_hover:function(k){h.listen(k,'mouseover',function(){g.addClass(k,"_4awp");});h.listen(k,'mouseout',function(){g.removeClass(k,"_4awp");});}};e.exports=j;},null);
__d("AsyncDOM",["CSS","DOM"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={invoke:function(j,k){for(var l=0;l<j.length;++l){var m=j[l],n=m[0],o=m[1],p=m[2],q=m[3],r=(p&&k)||null;if(o)r=h.scry(r||document.documentElement,o)[0];switch(n){case 'eval':(new Function(q)).apply(r);break;case 'hide':g.hide(r);break;case 'show':g.show(r);break;case 'setContent':h.setContent(r,q);break;case 'appendContent':h.appendContent(r,q);break;case 'prependContent':h.prependContent(r,q);break;case 'insertAfter':h.insertAfter(r,q);break;case 'insertBefore':h.insertBefore(r,q);break;case 'remove':h.remove(r);break;case 'replace':h.replace(r,q);break;default:}}}};e.exports=i;},null);
__d("AsyncFormRequestUtils",["Arbiter"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={subscribe:function(i,j,k){g.subscribe('AsyncRequest/'+j,function(l,m){var n=m.request.relativeTo;if(n&&n===i)k(m);});}};e.exports=h;},null);
__d("EmbedLikeButton",["Arbiter","AsyncFormRequestUtils","ClientIDs","CSS","DOM","DOMQuery","Event","Form"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();window.resetConfirmStoryLike=function(p){j.show(l.find(document,'#likeStory_'+p));k.remove(l.find(document,'#confirmStory_'+p));};var o={addClientId:function(p){p.setAttribute('value',i.getNewClientID());},init:function(p,q,r,s){var t=function(u){return n.bootstrap(s);};m.listen(p,'click',t);m.listen(q,'click',t);h.subscribe(s,'send',function(u){var v=r.getAttribute('value')==='1';if(v){j.hide(p);j.show(q);}else{j.hide(q);j.show(p);}g.inform('embeddedUfiToggle');r.setAttribute('value',v?'':'1');});}};e.exports=o;},null);
__d("PluginEmbedConnectButton",["Arbiter","CSS","DOM","Plugin"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k={init:function(l,m){g.subscribe(j.ERROR,function(event,n){i.setContent(m,n.content);h.show(m);h.hide(l);});g.subscribe(j.CONNECT,function(event,n){h.show(l);h.hide(m);});},autoconnect:function(l,m){l.click();}};e.exports=k;},null);
__d("MorePagerFetchOnScroll",["AsyncRequest","DOMQuery","Event","Style","Vector","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m={};function n(o,p){"use strict";this._pager=o;this._offset=p||0;this._scrollParent=j.getScrollParent(o);this.setPagerInViewHandler(this._defaultPagerInViewHandler.bind(this));this._hasEventHandlers=false;if(!this.check()){this._scrollListener=i.listen(this._scrollParent,'scroll',l(function(){this.check();}.bind(this),50));this._clickListener=i.listen(this._scrollParent,'click',l(function(){this.check();}.bind(this),50));this._hasEventHandlers=true;}m[o.id]=this;}n.prototype.check=function(){"use strict";if(!h.contains(document.body,this._pager)){this.removeEventListeners();return true;}var o=k.getElementPosition(this._pager).y,p=this._scrollParent===window?k.getViewportDimensions().y:k.getElementDimensions(this._scrollParent).y,q=this._scrollParent===window?k.getScrollPosition().y+p:k.getElementPosition(this._scrollParent).y+p;if(o-this._offset<q){this._inViewHandler();this.removeEventListeners();return true;}return false;};n.prototype.removeEventListeners=function(){"use strict";if(this._hasEventHandlers){this._scrollListener&&this._scrollListener.remove();this._clickListener&&this._clickListener.remove();this._hasEventHandlers=false;}};n.prototype.setPagerInViewHandler=function(o){"use strict";this._inViewHandler=o;return this;};n.prototype._defaultPagerInViewHandler=function(){"use strict";var o=h.scry(this._pager,'a')[0];if(o)g.bootstrap(o.getAttribute('ajaxify')||o.href,o);};n.getInstance=function(o){"use strict";return m[o];};e.exports=n;},null);
__d("PluginLikebox",["AsyncDOM","AsyncRequest","CSS","DOMEvent","DOMEventListener","DOMQuery","EmbedLikeButton","Event","MorePagerFetchOnScroll","PlatformWidgetEndpoint","Popup"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){b.__markCompiled&&b.__markCompiled();var r=3;function s(t,u,v){this.stream_id=t;this.force_wall=u;this.width=v;this.retries=0;this.load();k.add(l.find(document.body,'.pluginLikeboxStream'),'click',function(w){var x=new j(w),y=x.target.parentNode;if(i.hasClass(y,'text_exposed_link')){x.kill();i.addClass(l.find(y,'^.text_exposed_root'),'text_exposed');}var z=x.target.href?x.target:x.target.parentNode.href?x.target.parentNode:null;if(z&&z.pathname==='/sharer/sharer.php'){x.kill();q.open(z.href,670,340);}});}Object.assign(s.prototype,{load:function(t){new h().setMethod('GET').setURI(p.plugins('likebox','stream')).setData({id:this.stream_id,dom:t?'pluginLikeboxMoreStories':'pluginLikeboxStream',force_wall:this.force_wall,nobootload:1,inlinecss:1,max_timestamp:t,width:this.width}).setReadOnly(true).setErrorHandler(function(){}).setHandler(this.handleResponse.bind(this)).setRequestHeader('X-ALT-REFERER',document.referrer).send();},handleResponse:function(t){if(t.inlinecss){var u=document.createElement('style');u.setAttribute("type","text/css");document.getElementsByTagName('head')[0].appendChild(u);if(u.styleSheet){u.styleSheet.cssText=t.inlinecss;}else u.appendChild(document.createTextNode(t.inlinecss));}g.invoke(t.domops);(function(){var y=l.scry(document.body,'.embeddedForm'),z='embeddedProcessed';y.map(function(aa){if(!i.hasClass(aa,z)){var ba=l.find(aa,'.embeddedLikeButton'),ca=l.find(aa,'.embeddedUnlikeButton');l.scry(ba,'a').concat(l.scry(ca,'a')).forEach(function(da){n.listen(da,'click',function(ea){ea.preventDefault();});});m.addClientId(l.find(aa,'input[name="client_id"]'));m.init(ba,ca,l.find(aa,'input[name="like_action"]'),aa);i.addClass(aa,z);}});})();var v=l.scry(document.body,"#pluginLikeboxMoreStories a");if(!v.length)return;v=v[0];var w=function(){this.load(parseInt(v.getAttribute('data-timestamp'),10));var y=l.find(v.parentNode,'.uiMorePagerLoader');i.addClass(y,'uiMorePagerPrimary');i.removeClass(y,'uiMorePagerLoader');i.hide(v);}.bind(this);k.add(v,'click',function(y){new j(y).kill();w();});new o(v,0).setPagerInViewHandler(w);var x=parseInt(v.getAttribute('data-storycount'),10);if(x===0){if(this.retries<=r){this.retries++;w();}else i.hide(v);}else this.retries=0;return h.suppressOnloadToken;}});e.exports=s;},null);