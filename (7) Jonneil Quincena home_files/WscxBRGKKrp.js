/*!CK:3923950825!*//*1435268598,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["gFoTB"]); }

__d("ProfileWizardUIEvents",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={CUSTOM_HIDE_HANDLE:'ProfileWizardUIEvents/customHideHandle',CUSTOM_SHOW_HANDLE:'ProfileWizardUIEvents/customShowHandle',HIDE_POPUP:'ProfileWizardUIEvents/hidePopup',SHOW_POPUP:'ProfileWizardUIEvents/showPopup',STEP_COMPLETE:'ProfileWizardUIEvents/stepComplete'};e.exports=g;},null);
__d("XProfileWizardImpressionController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/profile\/wizard_impression\/{surface}\/",{error_code:{type:"Int"},step:{type:"Int",required:true},surface:{type:"Enum",required:true,enumType:1}});},null);
__d("ProfileWizardUIManager",["Arbiter","AsyncRequest","ProfileWizardUIEvents","XProfileWizardImpressionController","invariant","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();function m(n,o){"use strict";this.$ProfileWizardUIManager0=n;this.$ProfileWizardUIManager1=this.$ProfileWizardUIManager0[0];var p=g.subscribe(i.STEP_COMPLETE,this.stepComplete.bind(this));if(o!=null)m.informShowPopupForStep(o);l(function(){return p.unsubscribe();});}m.prototype.stepComplete=function(n,o){"use strict";var p=this.getNextStepIndex(o.stepNumber);if(p){m.informShowPopupForStep(p);this.$ProfileWizardUIManager1=p;}};m.prototype.getCurrentStepIndex=function(){"use strict";return this.$ProfileWizardUIManager1;};m.prototype.getNextStepIndex=function(n){"use strict";var o=this.$ProfileWizardUIManager0.indexOf(n);k(o!==-1);if(o<this.$ProfileWizardUIManager0.length-1)return this.$ProfileWizardUIManager0[o+1];return null;};m.informShowPopupForStep=function(n){"use strict";g.inform(i.SHOW_POPUP+n,{stepNumber:n},g.BEHAVIOR_PERSISTENT);};m.informHidePopupForStep=function(n){"use strict";g.inform(i.HIDE_POPUP+n,{stepNumber:n},g.BEHAVIOR_PERSISTENT);};m.informStepComplete=function(n){"use strict";g.inform(i.STEP_COMPLETE,{stepNumber:n});};m.informCustomShowHandler=function(n){"use strict";g.inform(i.CUSTOM_SHOW_HANDLE+n,{stepNumber:n},g.BEHAVIOR_PERSISTENT);};m.informCustomHideHandler=function(n){"use strict";g.inform(i.CUSTOM_HIDE_HANDLE+n,{stepNumber:n},g.BEHAVIOR_PERSISTENT);};m.subscribeShowPopupForStep=function(n,o,p){"use strict";return m.$ProfileWizardUIManager2(i.SHOW_POPUP,n,p);};m.subscribeHidePopupForStep=function(n,o,p){"use strict";return m.$ProfileWizardUIManager2(i.HIDE_POPUP,n,p);};m.subscribeCustomShowHandler=function(n,o){"use strict";return m.$ProfileWizardUIManager2(i.CUSTOM_SHOW_HANDLE,n,o);};m.subscribeCustomHideHandler=function(n,o){"use strict";return m.$ProfileWizardUIManager2(i.CUSTOM_HIDE_HANDLE,n,o);};m.$ProfileWizardUIManager2=function(event,n,o){"use strict";var p=g.subscribe(event+n,o);l(function(){return p.unsubscribe();});return p;};m.markStepImpression=function(n,o){"use strict";var p=j.getURIBuilder().setInt('step',n).setEnum('surface',o).getURI();new h().setURI(p).send();};m.init=function(n,o){"use strict";return new m(n,o);};e.exports=m;},null);
__d("XTimelineCoverPhotoGalleryController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/timeline\/cover\/gallery\/",{});},null);
__d("TimelineCoverPhotoNUX",["AsyncRequest","CSS","ProfileWizardUIManager","XTimelineCoverPhotoGalleryController","$","cx","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n='fbProfileCover',o="_3y4k",p={init:function(q,r,s,t){this._dialog=r;this._coverPhotoContainer=k(n);this._popover=q.getPopover();this._hasCoverPhoto=t;i.subscribeCustomShowHandler(s,function(){return this._showDialog();}.bind(this));i.subscribeCustomHideHandler(s,function(){return this._hideDialog();}.bind(this));this._popoverToken=this._popover.subscribeOnce('show',function(){if(this._hasCoverPhoto||this._showDialogCalled)return;this._popover.hideLayer();this._showDialog();}.bind(this));var u=this._dialog.subscribe('cancel',function(){h.removeClass(this._coverPhotoContainer,o);}.bind(this)),v=this._dialog.subscribe('confirm',function(){this._popover.showLayer();this._hideDialog();}.bind(this));m(function(){this._dialog.unsubscribe(u);this._dialog.unsubscribe(v);this._popover.unsubscribe(this._popoverToken);}.bind(this));},_hideDialog:function(){this._dialog.hide();h.removeClass(this._coverPhotoContainer,o);},_showDialog:function(){if(this._showDialogCalled)return;this._dialog.show();if(!this._hasCoverPhoto){h.addClass(this._coverPhotoContainer,o);new g().setURI(j.getURIBuilder().getURI()).send();}this._showDialogCalled=true;}};e.exports=p;},null);
__d("ProfileWizardStepFlyout",["Event","ProfileWizardUIManager","destroyOnUnload"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l,m){"use strict";h.subscribeShowPopupForStep(l,m,function(){h.informCustomShowHandler(l);k.show();});h.subscribeHidePopupForStep(l,m,function(){h.informCustomHideHandler(l);k.hide();});var n=g.listen(k.getCausalElement(),'click',function(){return h.informHidePopupForStep(l);}),o=[k.subscribe('cancel',function(){h.informStepComplete(l);h.markStepImpression(l,m);}),k.subscribe('confirm',function(){k.hide();h.markStepImpression(l,m);})];i(function(){while(o.length)k.unsubscribe(o.pop());n.remove();});}e.exports=j;},null);